"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[6614],{80806:(t,e,s)=>{s.r(e),s.d(e,{default:()=>P});var a=s(20641),o=s(90033);const l={class:"main-content"},r={key:0,class:"loading_page spinner spinner-primary mr-3"},n={slot:"table-actions",class:"mt-2 mb-3"},i=(0,a.Lk)("i",{class:"i-File-Copy"},null,-1),m={slot:"table-row","slot-scope":"props"},u={key:0};function d(t,e,s,d,p,c){const h=(0,a.g2)("breadcumb"),g=(0,a.g2)("b-button"),C=(0,a.g2)("vue-good-table");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(h,{page:t.$t("Top_customers"),folder:t.$t("Reports")},null,8,["page","folder"]),p.isLoading?((0,a.uX)(),(0,a.CE)("div",r)):(0,a.Q3)("",!0),p.isLoading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(C,{key:1,mode:"remote",columns:c.columns,totalRows:p.totalRows,rows:p.customers,onOnPageChange:c.onPageChange,onOnPerPageChange:c.onPerPageChange,"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"table-hover tableOne vgt-table"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",n,[(0,a.bF)(g,{onClick:e[0]||(e[0]=t=>c.export_PDF()),size:"sm",variant:"outline-success ripple m-1"},{default:(0,a.k6)((()=>[i,(0,a.eW)(" PDF ")])),_:1})]),(0,a.Lk)("template",m,["total"==t.props.column.field?((0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("span",null,(0,o.v_)(t.currentUser.currency)+" "+(0,o.v_)(t.props.row.total),1)])):(0,a.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange"]))])}var p=s(5947),c=s.n(p),h=s(95353),g=s(44323);s(13246);const C={metaInfo:{title:"Top Customers"},data(){return{isLoading:!0,serverParams:{sort:{field:"id",type:"desc"},page:1,perPage:10},limit:"10",totalRows:"",customers:[]}},computed:{...(0,h.L8)(["currentUser"]),columns(){return[{label:this.$t("Name"),field:"name",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Phone"),field:"phone",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Email"),field:"email",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("TotalSales"),field:"total_sales",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("TotalAmount"),field:"total",tdClass:"text-left",thClass:"text-left",sortable:!1}]}},methods:{export_PDF(){var t=this;let e=new g["default"]("p","pt"),s=[{title:"Customer Name",dataKey:"name"},{title:"Phone",dataKey:"phone"},{title:"Email",dataKey:"email"},{title:"Total Sales",dataKey:"total_sales"},{title:"Total Amount",dataKey:"total"}];e.autoTable(s,t.customers),e.text("Top Customers",40,25),e.save("Top_Customers.pdf")},updateParams(t){this.serverParams=Object.assign({},this.serverParams,t)},onPageChange({currentPage:t}){this.serverParams.page!==t&&(this.updateParams({page:t}),this.Get_top_Customers(t))},onPerPageChange({currentPerPage:t}){this.limit!==t&&(this.limit=t,this.updateParams({page:1,perPage:t}),this.Get_top_Customers(1))},Get_top_Customers(t){c().start(),c().set(.1),axios.get("report/top_customers?page="+t+"&limit="+this.limit).then((t=>{this.customers=t.data.customers,this.totalRows=t.data.totalRows,c().done(),this.isLoading=!1})).catch((t=>{c().done(),setTimeout((()=>{this.isLoading=!1}),500)}))}},created:function(){this.Get_top_Customers(1)}};var b=s(66262);const f=(0,b.A)(C,[["render",d]]),P=f}}]);
//# sourceMappingURL=top_customers.a50864e9.js.map