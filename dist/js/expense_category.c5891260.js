"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[3680],{91559:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var a=s(20641),i=s(90033),o=s(53751);const r={class:"main-content"},n={key:0,class:"loading_page spinner spinner-primary mr-3"},l={key:1},d={slot:"selected-row-actions"},c={slot:"table-actions",class:"mt-2 mb-3"},h=(0,a.Lk)("i",{class:"i-Add"},null,-1),g={slot:"table-row","slot-scope":"props"},m={key:0},u=(0,a.Lk)("i",{class:"i-Edit text-25 text-success"},null,-1),p=[u],b=(0,a.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),C=[b],_=["placeholder"],y=(0,a.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1),$={key:0,class:"typo__p"},f=(0,a.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),v=[f];function x(e,t,s,u,b,f){const x=(0,a.g2)("breadcumb"),P=(0,a.g2)("b-button"),k=(0,a.g2)("vue-good-table"),w=(0,a.g2)("b-form-input"),D=(0,a.g2)("b-form-invalid-feedback"),S=(0,a.g2)("b-form-group"),F=(0,a.g2)("validation-provider"),T=(0,a.g2)("b-col"),E=(0,a.g2)("b-row"),L=(0,a.g2)("b-form"),B=(0,a.g2)("b-modal"),O=(0,a.g2)("validation-observer"),U=(0,a.gN)("b-tooltip");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(x,{page:e.$t("Expense_Category"),folder:e.$t("Expenses")},null,8,["page","folder"]),b.isLoading?((0,a.uX)(),(0,a.CE)("div",n)):((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(k,{mode:"remote",columns:f.columns,totalRows:b.totalRows,rows:b.categories,onOnPageChange:f.onPageChange,onOnPerPageChange:f.onPerPageChange,onOnSortChange:f.onSortChange,onOnSearch:f.onSearch,"search-options":{enabled:!0,placeholder:e.$t("Search_this_table")},"select-options":{enabled:!0,clearSelectionText:""},onOnSelectedRowsChange:f.selectionChanged,"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"tableOne table-hover vgt-table"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t[0]||(t[0]=e=>f.delete_by_selected())},(0,i.v_)(e.$t("Del")),1)]),(0,a.Lk)("div",c,[e.currentUserPermissions&&e.currentUserPermissions.includes("expense_add")?((0,a.uX)(),(0,a.Wv)(P,{key:0,onClick:t[1]||(t[1]=e=>f.New_Category()),size:"sm",variant:"primary ripple m-1"},{default:(0,a.k6)((()=>[h,(0,a.eW)(" "+(0,i.v_)(e.$t("Add")),1)])),_:1})):(0,a.Q3)("",!0)]),(0,a.Lk)("template",g,["actions"==e.props.column.field?((0,a.uX)(),(0,a.CE)("span",m,[e.currentUserPermissions&&e.currentUserPermissions.includes("expense_edit")?(0,a.bo)(((0,a.uX)(),(0,a.CE)("a",{key:0,onClick:t[2]||(t[2]=t=>f.Edit_Category(e.props.row)),title:"Edit",class:"cursor-pointer"},p)),[[U,void 0,void 0,{hover:!0}]]):(0,a.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("expense_delete")?(0,a.bo)(((0,a.uX)(),(0,a.CE)("a",{key:1,title:"Delete",class:"cursor-pointer",onClick:t[3]||(t[3]=t=>f.Delete_Category(e.props.row.id))},C)),[[U,void 0,void 0,{hover:!0}]]):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options","onOnSelectedRowsChange"])])),(0,a.bF)(O,{ref:"Create_Category"},{default:(0,a.k6)((()=>[(0,a.bF)(B,{"hide-footer":"",size:"lg",id:"New_Category",title:b.editmode?e.$t("Edit"):e.$t("Add")},{default:(0,a.k6)((()=>[(0,a.bF)(L,{onSubmit:(0,o.D$)(f.Submit_Category,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.bF)(T,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(F,{name:"Name category",rules:{required:!0}},{default:(0,a.k6)((s=>[(0,a.bF)(S,{label:e.$t("Namecategorie")+" *"},{default:(0,a.k6)((()=>[(0,a.bF)(w,{state:f.getValidationState(s),"aria-describedby":"category-feedback",label:"name",modelValue:b.category.name,"onUpdate:modelValue":t[4]||(t[4]=e=>b.category.name=e)},null,8,["state","modelValue"]),(0,a.bF)(D,{id:"category-feedback"},{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(s.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,a.bF)(T,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(S,{label:e.$t("Description")},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>b.category.description=e),rows:"4",name:"Description",id:"Description",class:"form-control",placeholder:e.$t("Afewwords")},null,8,_),[[o.Jo,b.category.description]])])),_:1},8,["label"])])),_:1}),(0,a.bF)(T,{md:"12",class:"mt-3"},{default:(0,a.k6)((()=>[(0,a.bF)(P,{variant:"primary",type:"submit",disabled:b.SubmitProcessing},{default:(0,a.k6)((()=>[y,(0,a.eW)(" "+(0,i.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[6]||((0,a.Vq)(-1),t[6]=b.SubmitProcessing?((0,a.uX)(),(0,a.CE)("div",$,v)):(0,a.Q3)("",!0),(0,a.Vq)(1),t[6])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])])),_:1},512)])}var P=s(95353),k=s(5947),w=s.n(k);const D={metaInfo:{title:"Expense Category"},data(){return{isLoading:!0,SubmitProcessing:!1,serverParams:{columnFilters:{},sort:{field:"id",type:"desc"},page:1,perPage:10},selectedIds:[],totalRows:"",search:"",categories:[],editmode:!1,limit:"10",category:{id:"",name:"",description:""}}},computed:{...(0,P.L8)(["currentUserPermissions"]),columns(){return[{label:this.$t("Namecategorie"),field:"name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Description"),field:"description",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{Submit_Category(){this.$refs.Create_Category.validate().then((e=>{e?this.editmode?this.Update_Category():this.Create_Category():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},makeToast(e,t,s){this.$root.$bvToast.toast(t,{title:s,variant:e,solid:!0})},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Categories(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Categories(1))},selectionChanged({selectedRows:e}){this.selectedIds=[],e.forEach(((e,t)=>{this.selectedIds.push(e.id)}))},onSortChange(e){this.updateParams({sort:{type:e[0].type,field:e[0].field}}),this.Get_Categories(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_Categories(this.serverParams.page)},getValidationState({dirty:e,validated:t,valid:s=null}){return e||t?s:null},New_Category(){this.reset_Form(),this.editmode=!1,this.$bvModal.show("New_Category")},Edit_Category(e){this.Get_Categories(this.serverParams.page),this.reset_Form(),this.category=e,this.editmode=!0,this.$bvModal.show("New_Category")},reset_Form(){this.category={id:"",name:"",description:""}},Get_Categories(e){w().start(),w().set(.1),axios.get("expenses_category?page="+e+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.categories=e.data.Expenses_category,this.totalRows=e.data.totalRows,w().done(),this.isLoading=!1})).catch((e=>{w().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},Create_Category(){this.SubmitProcessing=!0,axios.post("expenses_category",{name:this.category.name,description:this.category.description}).then((e=>{Fire.$emit("Create_Category_Expense"),this.makeToast("success",this.$t("Successfully_Created"),this.$t("Success")),this.SubmitProcessing=!1})).catch((e=>{this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed")),this.SubmitProcessing=!1}))},Update_Category(){this.SubmitProcessing=!0,axios.put("expenses_category/"+this.category.id,{name:this.category.name,description:this.category.description}).then((e=>{Fire.$emit("Create_Category_Expense"),this.makeToast("success",this.$t("Successfully_Updated"),this.$t("Success")),this.SubmitProcessing=!1})).catch((e=>{this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed")),this.SubmitProcessing=!1}))},Delete_Category(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&axios.delete("expenses_category/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.CatDeleted"),"success"),Fire.$emit("Delete_Category_Expense")})).catch((()=>{this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")}))}))},delete_by_selected(){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&(w().start(),w().set(.1),axios.post("expenses_category_delete_by_selection",{selectedIds:this.selectedIds}).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.CatDeleted"),"success"),Fire.$emit("Delete_Category_Expense")})).catch((()=>{setTimeout((()=>w().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))}},created:function(){this.Get_Categories(1),Fire.$on("Create_Category_Expense",(()=>{this.Get_Categories(this.serverParams.page),this.$bvModal.hide("New_Category")})),Fire.$on("Delete_Category_Expense",(()=>{this.Get_Categories(this.serverParams.page)}))}};var S=s(66262);const F=(0,S.A)(D,[["render",x]]),T=F}}]);
//# sourceMappingURL=expense_category.c5891260.js.map