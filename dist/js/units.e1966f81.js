"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[9028],{96317:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var i=a(20641),s=a(90033),l=a(53751);const o={class:"main-content"},n={key:0,class:"loading_page spinner spinner-primary mr-3"},r={slot:"table-actions",class:"mt-2 mb-3"},d=(0,i.Lk)("i",{class:"i-Add"},null,-1),u={slot:"table-row","slot-scope":"props"},h={key:0},m=(0,i.Lk)("i",{class:"i-Edit text-25 text-success"},null,-1),b=[m],c=(0,i.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),p=[c],_={key:1},g={key:0},v={key:1},f=(0,i.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1),k={key:0,class:"typo__p"},$=(0,i.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),U=[$];function C(e,t,a,m,c,$){const C=(0,i.g2)("breadcumb"),S=(0,i.g2)("b-button"),w=(0,i.g2)("vue-good-table"),F=(0,i.g2)("b-card"),P=(0,i.g2)("b-form-input"),x=(0,i.g2)("b-form-invalid-feedback"),N=(0,i.g2)("b-form-group"),y=(0,i.g2)("validation-provider"),T=(0,i.g2)("b-col"),V=(0,i.g2)("v-select"),E=(0,i.g2)("b-row"),O=(0,i.g2)("b-form"),D=(0,i.g2)("b-modal"),L=(0,i.g2)("validation-observer"),B=(0,i.gN)("b-tooltip");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(C,{page:e.$t("Units"),folder:e.$t("Products")},null,8,["page","folder"]),c.isLoading?((0,i.uX)(),(0,i.CE)("div",n)):(0,i.Q3)("",!0),c.isLoading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(F,{key:1,class:"wrapper"},{default:(0,i.k6)((()=>[(0,i.bF)(w,{mode:"remote",columns:$.columns,totalRows:c.totalRows,rows:c.units,onOnPageChange:$.onPageChange,onOnPerPageChange:$.onPerPageChange,onOnSortChange:$.onSortChange,onOnSearch:$.onSearch,"search-options":{enabled:!0,placeholder:e.$t("Search_this_table")},"select-options":{enabled:!0,clearSelectionText:""},"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"table-hover tableOne vgt-table"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",r,[(0,i.bF)(S,{onClick:t[0]||(t[0]=e=>$.New_Unit()),class:"btn-rounded",variant:"btn btn-primary btn-icon m-1"},{default:(0,i.k6)((()=>[d,(0,i.eW)(" "+(0,s.v_)(e.$t("Add")),1)])),_:1})]),(0,i.Lk)("template",u,["actions"==e.props.column.field?((0,i.uX)(),(0,i.CE)("span",h,[(0,i.bo)(((0,i.uX)(),(0,i.CE)("a",{onClick:t[1]||(t[1]=t=>$.Edit_Unit(e.props.row)),title:"Edit"},b)),[[B,void 0,void 0,{hover:!0}]]),(0,i.bo)(((0,i.uX)(),(0,i.CE)("a",{title:"Delete",onClick:t[2]||(t[2]=t=>$.Remove_Unit(e.props.row.id))},p)),[[B,void 0,void 0,{hover:!0}]])])):"BaseUnit"==e.props.column.field?((0,i.uX)(),(0,i.CE)("div",_,[""!=e.props.row.base_unit_name?((0,i.uX)(),(0,i.CE)("span",g,(0,s.v_)(e.props.row.base_unit_name),1)):((0,i.uX)(),(0,i.CE)("span",v,"N/D"))])):(0,i.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options"])])),_:1})),(0,i.bF)(L,{ref:"Create_Unit"},{default:(0,i.k6)((()=>[(0,i.bF)(D,{"hide-footer":"",size:"md",id:"New_Unit",title:c.editmode?e.$t("Edit"):e.$t("Add")},{default:(0,i.k6)((()=>[(0,i.bF)(O,{onSubmit:(0,l.D$)($.Submit_Unit,["prevent"])},{default:(0,i.k6)((()=>[(0,i.bF)(E,null,{default:(0,i.k6)((()=>[(0,i.bF)(T,{md:"12"},{default:(0,i.k6)((()=>[(0,i.bF)(y,{name:"Code Currency",rules:{required:!0,max:15}},{default:(0,i.k6)((a=>[(0,i.bF)(N,{label:e.$t("Name")+" *"},{default:(0,i.k6)((()=>[(0,i.bF)(P,{placeholder:e.$t("Enter_Name_Unit"),state:$.getValidationState(a),"aria-describedby":"Name-feedback",label:"Name",modelValue:c.unit.name,"onUpdate:modelValue":t[3]||(t[3]=e=>c.unit.name=e)},null,8,["placeholder","state","modelValue"]),(0,i.bF)(x,{id:"Name-feedback"},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,i.bF)(T,{md:"12"},{default:(0,i.k6)((()=>[(0,i.bF)(y,{name:"ShortName",rules:{required:!0,max:15}},{default:(0,i.k6)((a=>[(0,i.bF)(N,{label:e.$t("ShortName")+" *"},{default:(0,i.k6)((()=>[(0,i.bF)(P,{placeholder:e.$t("Enter_ShortName_Unit"),state:$.getValidationState(a),"aria-describedby":"ShortName-feedback",label:"ShortName",modelValue:c.unit.ShortName,"onUpdate:modelValue":t[4]||(t[4]=e=>c.unit.ShortName=e)},null,8,["placeholder","state","modelValue"]),(0,i.bF)(x,{id:"ShortName-feedback"},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,i.bF)(T,{md:"12"},{default:(0,i.k6)((()=>[(0,i.bF)(N,{label:e.$t("BaseUnit")},{default:(0,i.k6)((()=>[(0,i.bF)(V,{onInput:$.Selected_Base_Unit,modelValue:c.unit.base_unit,"onUpdate:modelValue":t[5]||(t[5]=e=>c.unit.base_unit=e),reduce:e=>e.value,placeholder:e.$t("Choose_Base_Unit"),options:c.units_base.map((e=>({label:e.name,value:e.id})))},null,8,["onInput","modelValue","reduce","placeholder","options"])])),_:1},8,["label"])])),_:1}),(0,i.bo)((0,i.bF)(T,{md:"12"},{default:(0,i.k6)((()=>[(0,i.bF)(N,{label:e.$t("Operator")},{default:(0,i.k6)((()=>[(0,i.bF)(V,{modelValue:c.unit.operator,"onUpdate:modelValue":t[6]||(t[6]=e=>c.unit.operator=e),reduce:e=>e.value,placeholder:e.$t("Choose_Operator"),options:[{label:"Multiply (*)",value:"*"},{label:"Divide (/)",value:"/"}]},null,8,["modelValue","reduce","placeholder"])])),_:1},8,["label"])])),_:1},512),[[l.aG,c.show_operator]]),(0,i.bo)((0,i.bF)(T,{md:"12"},{default:(0,i.k6)((()=>[(0,i.bF)(y,{name:"Operation Value",rules:{required:!0,regex:/^\d*\.?\d*$/}},{default:(0,i.k6)((a=>[(0,i.bF)(N,{label:e.$t("OperationValue")+" *"},{default:(0,i.k6)((()=>[(0,i.bF)(P,{placeholder:e.$t("Enter_Operation_Value"),state:$.getValidationState(a),"aria-describedby":"Operation-feedback",label:"Operation",modelValue:c.unit.operator_value,"onUpdate:modelValue":t[7]||(t[7]=e=>c.unit.operator_value=e)},null,8,["placeholder","state","modelValue"]),(0,i.bF)(x,{id:"Operation-feedback"},{default:(0,i.k6)((()=>[(0,i.eW)((0,s.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1},512),[[l.aG,c.show_operator]]),(0,i.bF)(T,{md:"12",class:"mt-3"},{default:(0,i.k6)((()=>[(0,i.bF)(S,{variant:"primary",type:"submit",disabled:c.SubmitProcessing},{default:(0,i.k6)((()=>[f,(0,i.eW)(" "+(0,s.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[8]||((0,i.Vq)(-1),t[8]=c.SubmitProcessing?((0,i.uX)(),(0,i.CE)("div",k,U)):(0,i.Q3)("",!0),(0,i.Vq)(1),t[8])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])])),_:1},512)])}var S=a(5947),w=a.n(S);const F={metaInfo:{title:"Unit"},data(){return{isLoading:!0,SubmitProcessing:!1,serverParams:{columnFilters:{},sort:{field:"id",type:"desc"},page:1,perPage:10},totalRows:"",search:"",limit:"10",units:[],units_base:[],editmode:!1,show_operator:!1,unit:{id:"",name:"",ShortName:"",base_unit:"",base_unit_name:"",operator:"*",operator_value:1}}},computed:{columns(){return[{label:this.$t("Name"),field:"name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("ShortName"),field:"ShortName",tdClass:"text-left",thClass:"text-left"},{label:this.$t("BaseUnit"),field:"base_unit_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Operator"),field:"operator",tdClass:"text-left",thClass:"text-left"},{label:this.$t("OperationValue"),field:"operator_value",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Units(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Units(1))},onSortChange(e){this.updateParams({sort:{type:e[0].type,field:e[0].field}}),this.Get_Units(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_Units(this.serverParams.page)},getValidationState({dirty:e,validated:t,valid:a=null}){return e||t?a:null},Submit_Unit(){this.$refs.Create_Unit.validate().then((e=>{e?this.editmode?this.Update_Unit():this.Create_Unit():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},makeToast(e,t,a){this.$root.$bvToast.toast(t,{title:a,variant:e,solid:!0})},New_Unit(){this.reset_Form(),this.show_operator=!1,this.editmode=!1,this.$bvModal.show("New_Unit")},Edit_Unit(e){this.Get_Units(this.serverParams.page),this.reset_Form(),this.unit=e,""==this.unit.base_unit?this.show_operator=!1:this.show_operator=!0,this.editmode=!0,this.$bvModal.show("New_Unit")},Selected_Base_Unit(e){this.show_operator=null!=e},Get_Units(e){w().start(),w().set(.1),axios.get("units?page="+e+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.units=e.data.Units,this.totalRows=e.data.totalRows,this.units_base=e.data.Units_base,w().done(),this.isLoading=!1})).catch((e=>{w().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},setToStrings(){null===this.unit.base_unit&&(this.unit.base_unit="")},Create_Unit(){this.SubmitProcessing=!0,this.setToStrings(),axios.post("units",{name:this.unit.name,ShortName:this.unit.ShortName,base_unit:this.unit.base_unit,operator:this.unit.operator,operator_value:this.unit.operator_value}).then((e=>{this.SubmitProcessing=!1,Fire.$emit("Event_Unit"),this.makeToast("success",this.$t("Create.TitleUnit"),this.$t("Success"))})).catch((e=>{this.SubmitProcessing=!1,this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed"))}))},Update_Unit(){this.SubmitProcessing=!0,this.setToStrings(),axios.put("units/"+this.unit.id,{name:this.unit.name,ShortName:this.unit.ShortName,base_unit:this.unit.base_unit,operator:this.unit.operator,operator_value:this.unit.operator_value}).then((e=>{this.SubmitProcessing=!1,Fire.$emit("Event_Unit"),this.makeToast("success",this.$t("Update.TitleUnit"),this.$t("Success"))})).catch((e=>{this.SubmitProcessing=!1,this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed"))}))},reset_Form(){this.unit={id:"",name:"",ShortName:"",base_unit:"",base_unit_name:"",operator:"*",operator_value:1}},Remove_Unit(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&axios.delete("units/"+e).then((e=>{e.data.success?this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.UnitDeleted"),"success"):this.$swal(this.$t("Delete.Failed"),this.$t("Unit_already_linked_with_sub_unit"),"warning"),Fire.$emit("Delete_Unit")})).catch((()=>{this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")}))}))}},created:function(){this.Get_Units(1),Fire.$on("Event_Unit",(()=>{setTimeout((()=>{this.Get_Units(this.serverParams.page),this.$bvModal.hide("New_Unit")}),500)})),Fire.$on("Delete_Unit",(()=>{setTimeout((()=>{this.Get_Units(this.serverParams.page)}),500)}))}};var P=a(66262);const x=(0,P.A)(F,[["render",C]]),N=x}}]);
//# sourceMappingURL=units.e1966f81.js.map