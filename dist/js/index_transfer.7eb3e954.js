"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[2413],{44970:(e,t,s)=>{s.r(t),s.d(t,{default:()=>q});var l=s(20641),a=s(90033),r=s(53751);const n={class:"main-content"},i={key:0,class:"loading_page spinner spinner-primary mr-3"},o={key:1},d={slot:"selected-row-actions"},u={slot:"table-actions",class:"mt-2 mb-3"},h=(0,l.Lk)("i",{class:"i-Filter-2"},null,-1),c=(0,l.Lk)("i",{class:"i-File-Copy"},null,-1),m=(0,l.Lk)("i",{class:"i-File-Excel"},null,-1),f=(0,l.Lk)("span",{class:"ul-btn__icon"},[(0,l.Lk)("i",{class:"i-Add"})],-1),_={class:"ul-btn__text ml-1"},b={slot:"table-row","slot-scope":"props"},p={key:0},g=(0,l.Lk)("i",{class:"i-Eye text-25 text-info"},null,-1),k=[g],v=(0,l.Lk)("i",{class:"i-Edit text-25 text-success"},null,-1),F=(0,l.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),$=[F],T={key:1},w={key:0,class:"badge badge-outline-success"},C={key:1,class:"badge badge-outline-warning"},L={key:2,class:"badge badge-outline-danger"},x={class:"px-3 py-2"},P=(0,l.Lk)("i",{class:"i-Filter-2"},null,-1),y=(0,l.Lk)("i",{class:"i-Power-2"},null,-1),D={class:"table table-hover table-bordered table-sm"},R={key:0,class:"badge badge-outline-success"},S={key:1,class:"badge badge-outline-warning"},E={key:2,class:"badge badge-outline-danger"},X={class:"table-responsive"},W={class:"table table-hover table-bordered table-sm"},G={scope:"col"},B={scope:"col"},U={scope:"col"},V={scope:"col"};function O(e,t,s,g,F,O){const I=(0,l.g2)("breadcumb"),K=(0,l.g2)("b-button"),N=(0,l.g2)("vue-excel-xlsx"),z=(0,l.g2)("router-link"),Q=(0,l.g2)("vue-good-table"),A=(0,l.g2)("b-form-input"),j=(0,l.g2)("b-form-group"),q=(0,l.g2)("b-col"),M=(0,l.g2)("v-select"),H=(0,l.g2)("b-row"),J=(0,l.g2)("b-sidebar"),Y=(0,l.g2)("b-modal"),Z=(0,l.gN)("b-toggle"),ee=(0,l.gN)("b-tooltip");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(I,{page:e.$t("ListTransfers"),folder:e.$t("StockTransfers")},null,8,["page","folder"]),F.isLoading?((0,l.uX)(),(0,l.CE)("div",i)):((0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(Q,{mode:"remote",columns:O.columns,totalRows:F.totalRows,rows:F.transfers,onOnPageChange:O.onPageChange,onOnPerPageChange:O.onPerPageChange,onOnSortChange:O.onSortChange,onOnSearch:O.onSearch,"search-options":{enabled:!0,placeholder:e.$t("Search_this_table")},"select-options":{enabled:!0,clearSelectionText:""},onOnSelectedRowsChange:O.selectionChanged,"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"tableOne table-hover vgt-table"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",d,[(0,l.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t[0]||(t[0]=e=>O.delete_by_selected())},(0,a.v_)(e.$t("Del")),1)]),(0,l.Lk)("div",u,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(K,{variant:"outline-info ripple m-1",size:"sm"},{default:(0,l.k6)((()=>[h,(0,l.eW)(" "+(0,a.v_)(e.$t("Filter")),1)])),_:1})),[[Z,void 0,void 0,{"sidebar-right":!0}]]),(0,l.bF)(K,{onClick:t[1]||(t[1]=e=>O.Transfer_PDF()),size:"sm",variant:"outline-success ripple m-1"},{default:(0,l.k6)((()=>[c,(0,l.eW)(" PDF ")])),_:1}),(0,l.bF)(N,{class:"btn btn-sm btn-outline-danger ripple m-1",data:F.transfers,columns:O.columns,"file-name":"transfers","file-type":"xlsx","sheet-name":"transfers"},{default:(0,l.k6)((()=>[m,(0,l.eW)(" EXCEL ")])),_:1},8,["data","columns"]),e.currentUserPermissions&&e.currentUserPermissions.includes("transfer_add")?((0,l.uX)(),(0,l.Wv)(z,{key:0,class:"btn-sm btn btn-primary ripple btn-icon m-1",to:"/app/transfers/store"},{default:(0,l.k6)((()=>[f,(0,l.Lk)("span",_,(0,a.v_)(e.$t("Add")),1)])),_:1})):(0,l.Q3)("",!0)]),(0,l.Lk)("template",b,["actions"==e.props.column.field?((0,l.uX)(),(0,l.CE)("span",p,[(0,l.bo)(((0,l.uX)(),(0,l.CE)("a",{title:"View",onClick:t[2]||(t[2]=t=>O.showDetails(e.props.row.id))},k)),[[ee,void 0,void 0,{hover:!0}]]),e.currentUserPermissions&&e.currentUserPermissions.includes("transfer_edit")?(0,l.bo)(((0,l.uX)(),(0,l.Wv)(z,{key:0,title:"Edit",to:{name:"edit_transfer",params:{id:e.props.row.id}}},{default:(0,l.k6)((()=>[v])),_:1},8,["to"])),[[ee,void 0,void 0,{hover:!0}]]):(0,l.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("transfer_delete")?(0,l.bo)(((0,l.uX)(),(0,l.CE)("a",{key:1,title:"Delete",onClick:t[3]||(t[3]=t=>O.Remove_Transfer(e.props.row.id))},$)),[[ee,void 0,void 0,{hover:!0}]]):(0,l.Q3)("",!0)])):"statut"==e.props.column.field?((0,l.uX)(),(0,l.CE)("div",T,["completed"==e.props.row.statut?((0,l.uX)(),(0,l.CE)("span",w,(0,a.v_)(e.$t("complete")),1)):"sent"==e.props.row.statut?((0,l.uX)(),(0,l.CE)("span",C,(0,a.v_)(e.$t("Sent")),1)):((0,l.uX)(),(0,l.CE)("span",L,(0,a.v_)(e.$t("Pending")),1))])):(0,l.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options","onOnSelectedRowsChange"])])),(0,l.bF)(J,{id:"sidebar-right",title:e.$t("Filter"),"bg-variant":"white",right:"",shadow:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",x,[(0,l.bF)(H,null,{default:(0,l.k6)((()=>[(0,l.bF)(q,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(j,{label:e.$t("Reference")},{default:(0,l.k6)((()=>[(0,l.bF)(A,{label:"Reference",placeholder:e.$t("Reference"),modelValue:F.Filter_Ref,"onUpdate:modelValue":t[4]||(t[4]=e=>F.Filter_Ref=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(q,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(j,{label:e.$t("FromWarehouse")},{default:(0,l.k6)((()=>[(0,l.bF)(M,{reduce:e=>e.value,placeholder:e.$t("Choose_Warehouse"),modelValue:F.Filter_From,"onUpdate:modelValue":t[5]||(t[5]=e=>F.Filter_From=e),options:F.warehouses.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(q,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(j,{label:e.$t("ToWarehouse")},{default:(0,l.k6)((()=>[(0,l.bF)(M,{reduce:e=>e.value,placeholder:e.$t("Choose_Warehouse"),modelValue:F.Filter_To,"onUpdate:modelValue":t[6]||(t[6]=e=>F.Filter_To=e),options:F.warehouses.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(q,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(j,{label:e.$t("Status")},{default:(0,l.k6)((()=>[(0,l.bF)(M,{modelValue:F.Filter_status,"onUpdate:modelValue":t[7]||(t[7]=e=>F.Filter_status=e),reduce:e=>e.value,placeholder:e.$t("Choose_Status"),options:[{label:"Completed",value:"completed"},{label:"Sent",value:"sent"},{label:"Pending",value:"pending"}]},null,8,["modelValue","reduce","placeholder"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(q,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(K,{onClick:t[8]||(t[8]=e=>O.Get_Transfers(F.serverParams.page)),variant:"primary ripple m-1",size:"sm",block:""},{default:(0,l.k6)((()=>[P,(0,l.eW)(" "+(0,a.v_)(e.$t("Filter")),1)])),_:1})])),_:1}),(0,l.bF)(q,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(K,{onClick:t[9]||(t[9]=e=>O.Reset_Filter()),variant:"danger ripple m-1",size:"sm",block:""},{default:(0,l.k6)((()=>[y,(0,l.eW)(" "+(0,a.v_)(e.$t("Reset")),1)])),_:1})])),_:1})])),_:1})])])),_:1},8,["title"]),(0,l.bF)(Y,{"ok-only":"",size:"lg",id:"showDetails",title:e.$t("TransferDetail")},{default:(0,l.k6)((()=>[(0,l.bF)(H,null,{default:(0,l.k6)((()=>[(0,l.bF)(q,{lg:"5",md:"12",sm:"12",class:"mt-3"},{default:(0,l.k6)((()=>[(0,l.Lk)("table",D,[(0,l.Lk)("tbody",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("date")),1),(0,l.Lk)("th",null,(0,a.v_)(F.transfer.date),1)]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("Reference")),1),(0,l.Lk)("th",null,(0,a.v_)(F.transfer.Ref),1)]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("FromWarehouse")),1),(0,l.Lk)("th",null,(0,a.v_)(F.transfer.from_warehouse),1)]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("ToWarehouse")),1),(0,l.Lk)("th",null,(0,a.v_)(F.transfer.to_warehouse),1)]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("Total")),1),(0,l.Lk)("th",null,(0,a.v_)(e.currentUser.currency)+(0,a.v_)(O.formatNumber(F.transfer.GrandTotal,2)),1)]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("Status")),1),(0,l.Lk)("th",null,["completed"==F.transfer.statut?((0,l.uX)(),(0,l.CE)("span",R,(0,a.v_)(e.$t("complete")),1)):"sent"==F.transfer.statut?((0,l.uX)(),(0,l.CE)("span",S,(0,a.v_)(e.$t("Sent")),1)):((0,l.uX)(),(0,l.CE)("span",E,(0,a.v_)(e.$t("Pending")),1))])])])])])),_:1}),(0,l.bF)(q,{lg:"7",md:"12",sm:"12",class:"mt-3"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",X,[(0,l.Lk)("table",W,[(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",G,(0,a.v_)(e.$t("ProductName")),1),(0,l.Lk)("th",B,(0,a.v_)(e.$t("CodeProduct")),1),(0,l.Lk)("th",U,(0,a.v_)(e.$t("Quantity")),1),(0,l.Lk)("th",V,(0,a.v_)(e.$t("SubTotal")),1)])]),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(F.details,(t=>((0,l.uX)(),(0,l.CE)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(t.name),1),(0,l.Lk)("td",null,(0,a.v_)(t.code),1),(0,l.Lk)("td",null,(0,a.v_)(O.formatNumber(t.quantity,2))+" "+(0,a.v_)(t.unit),1),(0,l.Lk)("td",null,(0,a.v_)(e.currentUser.currency)+" "+(0,a.v_)(t.total.toFixed(2)),1)])))),256))])])])])),_:1})])),_:1}),(0,l.bo)((0,l.Lk)("hr",null,null,512),[[r.aG,F.transfer.note]]),(0,l.bF)(H,{class:"mt-4"},{default:(0,l.k6)((()=>[(0,l.bF)(q,{md:"12"},{default:(0,l.k6)((()=>[(0,l.Lk)("p",null,(0,a.v_)(F.transfer.note),1)])),_:1})])),_:1})])),_:1},8,["title"])])}var I=s(95353),K=s(5947),N=s.n(K),z=s(44323);s(13246);const Q={metaInfo:{title:"Transfer"},data(){return{isLoading:!0,serverParams:{sort:{field:"id",type:"desc"},page:1,perPage:10},selectedIds:[],search:"",totalRows:"",loading:!0,spinner:!1,limit:"10",Filter_date:"",Filter_status:"",Filter_Ref:"",Filter_From:"",Filter_To:"",details:[],warehouses:[],transfers:[],transfer:{GrandTotal:""}}},computed:{...(0,I.L8)(["currentUserPermissions","currentUser"]),columns(){return[{label:this.$t("date"),field:"date",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Reference"),field:"Ref",tdClass:"text-left",thClass:"text-left"},{label:this.$t("FromWarehouse"),field:"from_warehouse",tdClass:"text-left",thClass:"text-left"},{label:this.$t("ToWarehouse"),field:"to_warehouse",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Items"),field:"items",type:"decimal",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Total"),field:"GrandTotal",type:"decimal",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Status"),field:"statut",html:!0,tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Transfers(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Transfers(1))},selectionChanged({selectedRows:e}){this.selectedIds=[],e.forEach(((e,t)=>{this.selectedIds.push(e.id)}))},onSortChange(e){let t="";t="from_warehouse"==e[0].field?"from_warehouse_id":"to_warehouse"==e[0].field?"to_warehouse_id":e[0].field,this.updateParams({sort:{type:e[0].type,field:t}}),this.Get_Transfers(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_Transfers(this.serverParams.page)},setToStrings(){null===this.Filter_From?this.Filter_From="":null===this.Filter_To?this.Filter_To="":null===this.Filter_status&&(this.Filter_status="")},formatNumber(e,t){const s=("string"===typeof e?e:e.toString()).split(".");if(t<=0)return s[0];let l=s[1]||"";if(l.length>t)return`${s[0]}.${l.substr(0,t)}`;while(l.length<t)l+="0";return`${s[0]}.${l}`},Reset_Filter(){this.search="",this.Filter_date="",this.Filter_status="",this.Filter_Ref="",this.Filter_From="",this.Filter_To="",this.Get_Transfers(this.serverParams.page)},Get_Transfers(e){N().start(),N().set(.1),this.setToStrings(),axios.get("transfers?page="+e+"&Ref="+this.Filter_Ref+"&statut="+this.Filter_status+"&from_warehouse_id="+this.Filter_From+"&to_warehouse_id="+this.Filter_To+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.transfers=e.data.transfers,this.warehouses=e.data.warehouses,this.totalRows=e.data.totalRows,N().done(),this.isLoading=!1})).catch((e=>{N().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},showDetails(e){N().start(),N().set(.1),axios.get("transfers/"+e).then((e=>{this.transfer=e.data.transfer,this.details=e.data.details,Fire.$emit("Get_Details_Transfer")})).catch((e=>{Fire.$emit("Get_Details_Transfer")}))},Transfer_PDF(){var e=this;let t=new z["default"]("p","pt"),s=[{title:"Ref",dataKey:"Ref"},{title:"From warehouse",dataKey:"from_warehouse"},{title:"To warehouse",dataKey:"to_warehouse"},{title:"Total Products",dataKey:"items"},{title:"Status",dataKey:"statut"}];t.autoTable(s,e.transfers),t.text("Transfer List",40,25),t.save("Transfer_List.pdf")},Remove_Transfer(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&(N().start(),N().set(.1),axios.delete("transfers/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.TitleTransfer"),"success"),Fire.$emit("Delete_Transfer")})).catch((()=>{setTimeout((()=>N().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))},delete_by_selected(){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&(N().start(),N().set(.1),axios.post("transfers/delete/by_selection",{selectedIds:this.selectedIds}).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.TitleTransfer"),"success"),Fire.$emit("Delete_Transfer")})).catch((()=>{setTimeout((()=>N().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))}},created:function(){this.Get_Transfers(1),Fire.$on("Get_Details_Transfer",(()=>{this.$bvModal.show("showDetails"),setTimeout((()=>N().done()),500)})),Fire.$on("Delete_Transfer",(()=>{setTimeout((()=>{this.Get_Transfers(this.serverParams.page),setTimeout((()=>N().done()),500)}),500)}))}};var A=s(66262);const j=(0,A.A)(Q,[["render",O]]),q=j}}]);
//# sourceMappingURL=index_transfer.7eb3e954.js.map