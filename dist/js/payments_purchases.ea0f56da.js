"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[1559],{36234:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var l=a(20641),s=a(90033);const r={class:"main-content"},i={key:0,class:"loading_page spinner spinner-primary mr-3"},n={slot:"table-actions",class:"mt-2 mb-3"},o=(0,l.Lk)("i",{class:"i-Filter-2"},null,-1),d=(0,l.Lk)("i",{class:"i-File-Copy"},null,-1),u=(0,l.Lk)("i",{class:"i-File-Excel"},null,-1),h={class:"px-3 py-2"},c=(0,l.Lk)("i",{class:"i-Filter-2"},null,-1),p=(0,l.Lk)("i",{class:"i-Power-2"},null,-1);function m(e,t,a,m,g,b){const _=(0,l.g2)("breadcumb"),f=(0,l.g2)("date-range-picker"),P=(0,l.g2)("b-col"),F=(0,l.g2)("b-button"),v=(0,l.g2)("vue-excel-xlsx"),y=(0,l.g2)("vue-good-table"),R=(0,l.g2)("b-card"),k=(0,l.g2)("b-form-input"),C=(0,l.g2)("b-form-group"),S=(0,l.g2)("v-select"),D=(0,l.g2)("b-row"),w=(0,l.g2)("b-sidebar"),x=(0,l.gN)("b-toggle");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(_,{page:e.$t("PurchaseInvoice"),folder:e.$t("Reports")},null,8,["page","folder"]),g.isLoading?((0,l.uX)(),(0,l.CE)("div",i)):(0,l.Q3)("",!0),g.isLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(P,{key:1,md:"12",class:"text-center"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:g.dateRange,"onUpdate:modelValue":t[0]||(t[0]=e=>g.dateRange=e),startDate:g.startDate,endDate:g.endDate,onUpdate:b.Submit_filter_dateRange,"locale-data":g.locale},{input:(0,l.k6)((e=>[(0,l.eW)((0,s.v_)(e.startDate.toJSON().slice(0,10))+" - "+(0,s.v_)(e.endDate.toJSON().slice(0,10)),1)])),_:1},8,["modelValue","startDate","endDate","onUpdate","locale-data"])])),_:1})),g.isLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(R,{key:2,class:"wrapper"},{default:(0,l.k6)((()=>[(0,l.bF)(y,{mode:"remote",columns:b.columns,totalRows:g.totalRows,rows:g.rows,"group-options":{enabled:!0,headerPosition:"bottom"},onOnPageChange:b.onPageChange,onOnPerPageChange:b.onPerPageChange,onOnSortChange:b.onSortChange,onOnSearch:b.onSearch,"search-options":{placeholder:e.$t("Search_this_table"),enabled:!0},"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"table-hover tableOne vgt-table"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",n,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(F,{variant:"outline-info ripple m-1",size:"sm"},{default:(0,l.k6)((()=>[o,(0,l.eW)(" "+(0,s.v_)(e.$t("Filter")),1)])),_:1})),[[x,void 0,void 0,{"sidebar-right":!0}]]),(0,l.bF)(F,{onClick:t[1]||(t[1]=e=>b.Payment_PDF()),size:"sm",variant:"outline-success ripple m-1"},{default:(0,l.k6)((()=>[d,(0,l.eW)(" PDF ")])),_:1}),(0,l.bF)(v,{class:"btn btn-sm btn-outline-danger ripple m-1",data:g.payments,columns:b.columns,"file-name":"payments","file-type":"xlsx","sheet-name":"payments"},{default:(0,l.k6)((()=>[u,(0,l.eW)(" EXCEL ")])),_:1},8,["data","columns"])])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options"])])),_:1})),(0,l.bF)(w,{id:"sidebar-right",title:e.$t("Filter"),"bg-variant":"white",right:"",shadow:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",h,[(0,l.bF)(D,null,{default:(0,l.k6)((()=>[(0,l.bF)(P,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:e.$t("Reference")},{default:(0,l.k6)((()=>[(0,l.bF)(k,{label:"Reference",placeholder:e.$t("Reference"),modelValue:g.Filter_Ref,"onUpdate:modelValue":t[2]||(t[2]=e=>g.Filter_Ref=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(P,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:e.$t("Supplier")},{default:(0,l.k6)((()=>[(0,l.bF)(S,{reduce:e=>e.value,placeholder:e.$t("Choose_Supplier"),modelValue:g.Filter_Supplier,"onUpdate:modelValue":t[3]||(t[3]=e=>g.Filter_Supplier=e),options:g.suppliers.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(P,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:e.$t("Purchase")},{default:(0,l.k6)((()=>[(0,l.bF)(S,{reduce:e=>e.value,placeholder:e.$t("PleaseSelect"),modelValue:g.Filter_purchase,"onUpdate:modelValue":t[4]||(t[4]=e=>g.Filter_purchase=e),options:g.purchases.map((e=>({label:e.Ref,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(P,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:e.$t("Paymentchoice")},{default:(0,l.k6)((()=>[(0,l.bF)(S,{modelValue:g.Filter_Reg,"onUpdate:modelValue":t[5]||(t[5]=e=>g.Filter_Reg=e),reduce:e=>e.value,placeholder:e.$t("PleaseSelect"),options:[{label:"Cash",value:"Cash"},{label:"cheque",value:"cheque"},{label:"TPE",value:"tpe"},{label:"Western Union",value:"Western Union"},{label:"bank transfer",value:"bank transfer"},{label:"credit card",value:"credit card"},{label:"other",value:"other"}]},null,8,["modelValue","reduce","placeholder"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{onClick:t[6]||(t[6]=e=>b.Payments_Purchases(g.serverParams.page)),variant:"primary ripple m-1",size:"sm",block:""},{default:(0,l.k6)((()=>[c,(0,l.eW)(" "+(0,s.v_)(e.$t("Filter")),1)])),_:1})])),_:1}),(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{onClick:t[7]||(t[7]=e=>b.Reset_Filter()),variant:"danger ripple m-1",size:"sm",block:""},{default:(0,l.k6)((()=>[p,(0,l.eW)(" "+(0,s.v_)(e.$t("Reset")),1)])),_:1})])),_:1})])),_:1})])])),_:1},8,["title"])])}var g=a(5947),b=a.n(g),_=a(44323),f=(a(13246),a(32464)),P=a.n(f),F=a(95093),v=a.n(F);const y={metaInfo:{title:"Payment Purchases"},components:{DateRangePicker:P()},data(){return{isLoading:!0,serverParams:{sort:{field:"id",type:"desc"},page:1,perPage:10},limit:"10",search:"",totalRows:"",Filter_Supplier:"",Filter_Ref:"",Filter_purchase:"",Filter_Reg:"",payments:[],suppliers:[],rows:[{Reglement:"Total",children:[]}],purchases:[],today_mode:!0,startDate:"",endDate:"",dateRange:{startDate:"",endDate:""},locale:{Label:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:v().weekdaysMin(),monthNames:v().monthsShort(),firstDay:1}}},computed:{columns(){return[{label:this.$t("date"),field:"date",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Reference"),field:"Ref",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Purchase"),field:"Ref_Purchase",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Supplier"),field:"provider_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("ModePaiement"),field:"Reglement",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Amount"),field:"montant",type:"decimal",headerField:this.sumCount,tdClass:"text-left",thClass:"text-left"}]}},methods:{sumCount(e){let t=0;for(let a=0;a<e.children.length;a++)t+=e.children[a].montant;return t},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Payments_Purchases(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Payments_Purchases(1))},onSortChange(e){let t="";t="Ref_Purchase"==e[0].field?"purchase_id":e[0].field,this.updateParams({sort:{type:e[0].type,field:t}}),this.Payments_Purchases(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Payments_Purchases(this.serverParams.page)},Reset_Filter(){this.search="",this.Filter_Supplier="",this.Filter_Ref="",this.Filter_purchase="",this.Filter_Reg="",this.Payments_Purchases(this.serverParams.page)},setToStrings(){null===this.Filter_Supplier?this.Filter_Supplier="":null===this.Filter_purchase&&(this.Filter_purchase="")},Payment_PDF(){var e=this;let t=new _["default"]("p","pt"),a=[{title:"Date",dataKey:"date"},{title:"Ref",dataKey:"Ref"},{title:"Purchase",dataKey:"Ref_Purchase"},{title:"Supplier",dataKey:"provider_name"},{title:"Paid by",dataKey:"Reglement"},{title:"Amount",dataKey:"montant"}];t.autoTable(a,e.payments),t.text("Payments Purchases List",40,25),t.save("Payments_Purchases_List.pdf")},Submit_filter_dateRange(){var e=this;e.startDate=e.dateRange.startDate.toJSON().slice(0,10),e.endDate=e.dateRange.endDate.toJSON().slice(0,10),e.Payments_Purchases(1)},get_data_loaded(){var e=this;if(e.today_mode){let t=new Date;e.startDate=t.getFullYear(),e.endDate=(new Date).toJSON().slice(0,10),e.dateRange.startDate=t.getFullYear(),e.dateRange.endDate=(new Date).toJSON().slice(0,10)}},Payments_Purchases(e){b().start(),b().set(.1),this.setToStrings(),this.get_data_loaded(),axios.get("payment_purchase?page="+e+"&Ref="+this.Filter_Ref+"&provider_id="+this.Filter_Supplier+"&purchase_id="+this.Filter_purchase+"&Reglement="+this.Filter_Reg+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit+"&to="+this.endDate+"&from="+this.startDate).then((e=>{this.payments=e.data.payments,this.suppliers=e.data.suppliers,this.purchases=e.data.purchases,this.totalRows=e.data.totalRows,this.rows[0].children=this.payments,b().done(),this.isLoading=!1,this.today_mode=!1})).catch((e=>{b().done(),setTimeout((()=>{this.isLoading=!1,this.today_mode=!1}),500)}))}},created:function(){this.Payments_Purchases(1)}};var R=a(66262);const k=(0,R.A)(y,[["render",m]]),C=k}}]);
//# sourceMappingURL=payments_purchases.ea0f56da.js.map