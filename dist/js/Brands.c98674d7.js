"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[8573],{71912:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var s=a(20641),i=a(90033),n=a(53751);const r={class:"main-content"},d={key:0,class:"loading_page spinner spinner-primary mr-3"},l={slot:"selected-row-actions"},o={slot:"table-actions",class:"mt-2 mb-3"},c=(0,s.Lk)("i",{class:"i-Add"},null,-1),h={slot:"table-row","slot-scope":"props"},m={key:0},b=(0,s.Lk)("i",{class:"i-Edit text-25 text-success"},null,-1),u=[b],g=(0,s.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),p=[g],_={key:1},f=["state"],v=(0,s.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1),$={key:0,class:"typo__p"},B=(0,s.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),k=[B];function C(e,t,a,b,g,B){const C=(0,s.g2)("breadcumb"),w=(0,s.g2)("b-button"),F=(0,s.g2)("b-img"),P=(0,s.g2)("vue-good-table"),D=(0,s.g2)("b-card"),x=(0,s.g2)("b-form-input"),S=(0,s.g2)("b-form-invalid-feedback"),T=(0,s.g2)("b-form-group"),y=(0,s.g2)("validation-provider"),E=(0,s.g2)("b-col"),L=(0,s.g2)("b-form-textarea"),I=(0,s.g2)("b-row"),N=(0,s.g2)("b-form"),O=(0,s.g2)("b-modal"),V=(0,s.g2)("validation-observer"),G=(0,s.gN)("b-tooltip");return(0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(C,{page:e.$t("Brand"),folder:e.$t("Products")},null,8,["page","folder"]),g.isLoading?((0,s.uX)(),(0,s.CE)("div",d)):(0,s.Q3)("",!0),g.isLoading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(D,{key:1,class:"wrapper"},{default:(0,s.k6)((()=>[(0,s.bF)(P,{mode:"remote",columns:B.columns,totalRows:g.totalRows,rows:g.brands,onOnPageChange:B.onPageChange,onOnPerPageChange:B.onPerPageChange,onOnSortChange:B.onSortChange,onOnSearch:B.onSearch,"search-options":{enabled:!0,placeholder:e.$t("Search_this_table")},"select-options":{enabled:!0,clearSelectionText:""},onOnSelectedRowsChange:B.selectionChanged,"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"table-hover tableOne vgt-table"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",l,[(0,s.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t[0]||(t[0]=e=>B.delete_by_selected())},(0,i.v_)(e.$t("Del")),1)]),(0,s.Lk)("div",o,[(0,s.bF)(w,{onClick:t[1]||(t[1]=e=>B.New_Brand()),class:"btn-rounded",variant:"btn btn-primary btn-icon m-1"},{default:(0,s.k6)((()=>[c,(0,s.eW)(" "+(0,i.v_)(e.$t("Add")),1)])),_:1})]),(0,s.Lk)("template",h,["actions"==e.props.column.field?((0,s.uX)(),(0,s.CE)("span",m,[(0,s.bo)(((0,s.uX)(),(0,s.CE)("a",{onClick:t[2]||(t[2]=t=>B.Edit_Brand(e.props.row)),title:"Edit"},u)),[[G,void 0,void 0,{hover:!0}]]),(0,s.bo)(((0,s.uX)(),(0,s.CE)("a",{title:"Delete",onClick:t[3]||(t[3]=t=>B.Delete_Brand(e.props.row.id))},p)),[[G,void 0,void 0,{hover:!0}]])])):"image"==e.props.column.field?((0,s.uX)(),(0,s.CE)("span",_,[(0,s.bF)(F,{thumbnail:"",height:"50",width:"50",fluid:"",src:"/images/brands/"+e.props.row.image,alt:"image"},null,8,["src"])])):(0,s.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options","onOnSelectedRowsChange"])])),_:1})),(0,s.bF)(V,{ref:"Create_brand"},{default:(0,s.k6)((()=>[(0,s.bF)(O,{"hide-footer":"",size:"md",id:"New_brand",title:g.editmode?e.$t("Edit"):e.$t("Add")},{default:(0,s.k6)((()=>[(0,s.bF)(N,{onSubmit:(0,n.D$)(B.Submit_Brand,["prevent"]),enctype:"multipart/form-data"},{default:(0,s.k6)((()=>[(0,s.bF)(I,null,{default:(0,s.k6)((()=>[(0,s.bF)(E,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(y,{name:"Brand Name",rules:{required:!0,min:3,max:20}},{default:(0,s.k6)((a=>[(0,s.bF)(T,{label:e.$t("BrandName")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(x,{placeholder:e.$t("Enter_Name_Brand"),state:B.getValidationState(a),"aria-describedby":"Name-feedback",label:"Name",modelValue:g.brand.name,"onUpdate:modelValue":t[4]||(t[4]=e=>g.brand.name=e)},null,8,["placeholder","state","modelValue"]),(0,s.bF)(S,{id:"Name-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(E,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(y,{name:"Brand Description",rules:{max:30}},{default:(0,s.k6)((a=>[(0,s.bF)(T,{label:e.$t("BrandDescription")},{default:(0,s.k6)((()=>[(0,s.bF)(L,{rows:"3",placeholder:e.$t("Enter_Description_Brand"),state:B.getValidationState(a),"aria-describedby":"Description-feedback",label:"Description",modelValue:g.brand.description,"onUpdate:modelValue":t[5]||(t[5]=e=>g.brand.description=e)},null,8,["placeholder","state","modelValue"]),(0,s.bF)(S,{id:"Description-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(E,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(y,{name:"Image",ref:"Image",rules:"mimes:image/*|size:200"},{default:(0,s.k6)((()=>[(0,s.bF)(T,{"slot-scope":"{validate, valid, errors }",label:e.$t("BrandImage")},{default:(0,s.k6)((()=>[(0,s.Lk)("input",{state:!e.errors[0]&&(!!e.valid||null),class:(0,i.C4)({"is-invalid":!!e.errors.length}),onChange:t[6]||(t[6]=(...e)=>B.onFileSelected&&B.onFileSelected(...e)),label:"Choose Image",type:"file"},null,42,f),(0,s.bF)(S,{id:"Image-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(e.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1},512)])),_:1}),(0,s.bF)(E,{md:"12",class:"mt-3"},{default:(0,s.k6)((()=>[(0,s.bF)(w,{variant:"primary",type:"submit",disabled:g.SubmitProcessing},{default:(0,s.k6)((()=>[v,(0,s.eW)(" "+(0,i.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[7]||((0,s.Vq)(-1),t[7]=g.SubmitProcessing?((0,s.uX)(),(0,s.CE)("div",$,k)):(0,s.Q3)("",!0),(0,s.Vq)(1),t[7])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])])),_:1},512)])}var w=a(5947),F=a.n(w);const P={metaInfo:{title:"Brand"},data(){return{isLoading:!0,SubmitProcessing:!1,serverParams:{columnFilters:{},sort:{field:"id",type:"desc"},page:1,perPage:10},selectedIds:[],totalRows:"",search:"",data:new FormData,editmode:!1,brands:[],limit:"10",brand:{id:"",name:"",description:"",image:""}}},computed:{columns(){return[{label:this.$t("BrandImage"),field:"image",tdClass:"text-left",thClass:"text-left"},{label:this.$t("BrandName"),field:"name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("BrandDescription"),field:"description",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Brands(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Brands(1))},onSortChange(e){this.updateParams({sort:{type:e[0].type,field:e[0].field}}),this.Get_Brands(this.serverParams.page)},selectionChanged({selectedRows:e}){this.selectedIds=[],e.forEach(((e,t)=>{this.selectedIds.push(e.id)}))},onSearch(e){this.search=e.searchTerm,this.Get_Brands(this.serverParams.page)},getValidationState({dirty:e,validated:t,valid:a=null}){return e||t?a:null},Submit_Brand(){this.$refs.Create_brand.validate().then((e=>{e?this.editmode?this.Update_Brand():this.Create_Brand():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},makeToast(e,t,a){this.$root.$bvToast.toast(t,{title:a,variant:e,solid:!0})},async onFileSelected(e){const{valid:t}=await this.$refs.Image.validate(e);this.brand.image=t?e.target.files[0]:""},New_Brand(){this.reset_Form(),this.editmode=!1,this.$bvModal.show("New_brand")},Edit_Brand(e){this.Get_Brands(this.serverParams.page),this.reset_Form(),this.brand=e,this.editmode=!0,this.$bvModal.show("New_brand")},Get_Brands(e){F().start(),F().set(.1),axios.get("brands?page="+e+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.brands=e.data.brands,this.totalRows=e.data.totalRows,F().done(),this.isLoading=!1})).catch((e=>{F().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},Create_Brand(){var e=this;e.SubmitProcessing=!0,e.data.append("name",e.brand.name),e.data.append("description",e.brand.description),e.data.append("image",e.brand.image),axios.post("brands",e.data).then((t=>{e.SubmitProcessing=!1,Fire.$emit("Event_Brand"),this.makeToast("success",this.$t("Create.TitleBrand"),this.$t("Success"))})).catch((t=>{e.SubmitProcessing=!1,this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed"))}))},Update_Brand(){var e=this;e.SubmitProcessing=!0,e.data.append("name",e.brand.name),e.data.append("description",e.brand.description),e.data.append("image",e.brand.image),e.data.append("_method","put"),axios.post("brands/"+e.brand.id,e.data).then((t=>{e.SubmitProcessing=!1,Fire.$emit("Event_Brand"),this.makeToast("success",this.$t("Update.TitleBrand"),this.$t("Success"))})).catch((t=>{e.SubmitProcessing=!1,this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed"))}))},reset_Form(){this.brand={id:"",name:"",description:"",image:""},this.data=new FormData},Delete_Brand(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&axios.delete("brands/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.TitleBrand"),"success"),Fire.$emit("Delete_Brand")})).catch((()=>{this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")}))}))},delete_by_selected(){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&(F().start(),F().set(.1),axios.post("brands/delete/by_selection",{selectedIds:this.selectedIds}).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.TitleBrand"),"success"),Fire.$emit("Delete_Brand")})).catch((()=>{setTimeout((()=>F().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))}},created:function(){this.Get_Brands(1),Fire.$on("Event_Brand",(()=>{setTimeout((()=>{this.Get_Brands(this.serverParams.page),this.$bvModal.hide("New_brand")}),500)})),Fire.$on("Delete_Brand",(()=>{setTimeout((()=>{this.Get_Brands(this.serverParams.page)}),500)}))}};var D=a(66262);const x=(0,D.A)(P,[["render",C]]),S=x}}]);
//# sourceMappingURL=Brands.c98674d7.js.map