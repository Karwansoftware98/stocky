"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[7584],{50818:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var l=s(20641),a=s(90033),i=s(53751);const o={class:"main-content"},r={key:0,class:"loading_page spinner spinner-primary mr-3"},d={key:1},n={slot:"selected-row-actions"},c={slot:"table-actions",class:"mt-2 mb-3"},u=(0,l.Lk)("i",{class:"i-Filter-2"},null,-1),m=(0,l.Lk)("i",{class:"i-File-Copy"},null,-1),h=(0,l.Lk)("i",{class:"i-File-Excel"},null,-1),p=(0,l.Lk)("i",{class:"i-Download"},null,-1),_=(0,l.Lk)("span",{class:"ul-btn__icon"},[(0,l.Lk)("i",{class:"i-Add"})],-1),b={class:"ul-btn__text ml-1"},g={slot:"table-row","slot-scope":"props"},k={key:0},f=(0,l.Lk)("i",{class:"i-Eye text-25 text-info"},null,-1),v=(0,l.Lk)("i",{class:"i-Edit text-25 text-success"},null,-1),F=(0,l.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),$=[F],P={key:1},C={class:"px-3 py-2"},y=(0,l.Lk)("i",{class:"i-Filter-2"},null,-1),L=(0,l.Lk)("i",{class:"i-Power-2"},null,-1),x={key:0,class:"typo__p"},w=(0,l.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),D=[w],T={class:"table table-bordered table-sm mt-4"},S={class:"badge badge-outline-success"},B={class:"badge badge-outline-success"},U={class:"badge badge-outline-success"},W={class:"badge badge-outline-success"},E={class:"badge badge-outline-success"},V={class:"badge badge-outline-success"},R={class:"badge badge-outline-info"},I={class:"badge badge-outline-info"},X={class:"badge badge-outline-info"};function O(e,t,s,F,w,O){const q=(0,l.g2)("breadcumb"),z=(0,l.g2)("b-button"),G=(0,l.g2)("vue-excel-xlsx"),K=(0,l.g2)("router-link"),N=(0,l.g2)("b-img"),Q=(0,l.g2)("vue-good-table"),A=(0,l.g2)("b-form-input"),M=(0,l.g2)("b-form-group"),j=(0,l.g2)("b-col"),H=(0,l.g2)("v-select"),J=(0,l.g2)("b-row"),Y=(0,l.g2)("b-sidebar"),Z=(0,l.g2)("b-form-invalid-feedback"),ee=(0,l.g2)("b-form"),te=(0,l.g2)("b-modal"),se=(0,l.gN)("b-toggle"),le=(0,l.gN)("b-tooltip");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.bF)(q,{page:e.$t("productsList"),folder:e.$t("Products")},null,8,["page","folder"]),w.isLoading?((0,l.uX)(),(0,l.CE)("div",r)):((0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(Q,{mode:"remote",columns:O.columns,totalRows:w.totalRows,rows:w.products,onOnPageChange:O.onPageChange,onOnPerPageChange:O.onPerPageChange,onOnSortChange:O.onSortChange,onOnSearch:O.onSearch,"select-options":{enabled:!0,clearSelectionText:""},onOnSelectedRowsChange:O.selectionChanged,"search-options":{enabled:!0,placeholder:e.$t("Search_this_table")},"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"tableOne vgt-table"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",n,[(0,l.Lk)("button",{class:"btn btn-danger",onClick:t[0]||(t[0]=e=>O.delete_by_selected())},(0,a.v_)(e.$t("Del")),1)]),(0,l.Lk)("div",c,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(z,{variant:"outline-info m-1",size:"sm"},{default:(0,l.k6)((()=>[u,(0,l.eW)(" "+(0,a.v_)(e.$t("Filter")),1)])),_:1})),[[se,void 0,void 0,{"sidebar-right":!0}]]),(0,l.bF)(z,{onClick:t[1]||(t[1]=e=>O.Product_PDF()),size:"sm",variant:"outline-success m-1"},{default:(0,l.k6)((()=>[m,(0,l.eW)(" PDF ")])),_:1}),(0,l.bF)(G,{class:"btn btn-sm btn-outline-danger ripple m-1",data:w.products,columns:O.columns,"file-name":"products","file-type":"xlsx","sheet-name":"products"},{default:(0,l.k6)((()=>[h,(0,l.eW)(" EXCEL ")])),_:1},8,["data","columns"]),e.currentUserPermissions&&e.currentUserPermissions.includes("product_import")?((0,l.uX)(),(0,l.Wv)(z,{key:0,onClick:t[2]||(t[2]=e=>O.Show_import_products()),size:"sm",variant:"info m-1"},{default:(0,l.k6)((()=>[p,(0,l.eW)(" "+(0,a.v_)(e.$t("import_products")),1)])),_:1})):(0,l.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("products_add")?((0,l.uX)(),(0,l.Wv)(K,{key:1,class:"btn-sm btn btn-primary btn-icon m-1",to:"/app/products/store"},{default:(0,l.k6)((()=>[_,(0,l.Lk)("span",b,(0,a.v_)(e.$t("Add")),1)])),_:1})):(0,l.Q3)("",!0)]),(0,l.Lk)("template",g,["actions"==e.props.column.field?((0,l.uX)(),(0,l.CE)("span",k,[e.currentUserPermissions&&e.currentUserPermissions.includes("products_view")?(0,l.bo)(((0,l.uX)(),(0,l.Wv)(K,{key:0,title:"View",to:{name:"detail_product",params:{id:e.props.row.id}}},{default:(0,l.k6)((()=>[f])),_:1},8,["to"])),[[le,void 0,void 0,{hover:!0}]]):(0,l.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("products_edit")?(0,l.bo)(((0,l.uX)(),(0,l.Wv)(K,{key:1,title:"Edit",to:{name:"edit_product",params:{id:e.props.row.id}}},{default:(0,l.k6)((()=>[v])),_:1},8,["to"])),[[le,void 0,void 0,{hover:!0}]]):(0,l.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("products_delete")?(0,l.bo)(((0,l.uX)(),(0,l.CE)("a",{key:2,onClick:t[3]||(t[3]=t=>O.Remove_Product(e.props.row.id)),title:"Delete",class:"cursor-pointer"},$)),[[le,void 0,void 0,{hover:!0}]]):(0,l.Q3)("",!0)])):"image"==e.props.column.field?((0,l.uX)(),(0,l.CE)("span",P,[(0,l.bF)(N,{thumbnail:"",height:"50",width:"50",fluid:"",src:"/images/products/"+e.props.row.image,alt:"image"},null,8,["src"])])):(0,l.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","onOnSelectedRowsChange","search-options"]),(0,l.bF)(Y,{id:"sidebar-right",title:e.$t("Filter"),"bg-variant":"white",right:"",shadow:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",C,[(0,l.bF)(J,null,{default:(0,l.k6)((()=>[(0,l.bF)(j,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(M,{label:e.$t("CodeProduct")},{default:(0,l.k6)((()=>[(0,l.bF)(A,{label:"Code Product",placeholder:e.$t("SearchByCode"),modelValue:w.Filter_code,"onUpdate:modelValue":t[4]||(t[4]=e=>w.Filter_code=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(j,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(M,{label:e.$t("ProductName")},{default:(0,l.k6)((()=>[(0,l.bF)(A,{label:"Name Product",placeholder:e.$t("SearchByName"),modelValue:w.Filter_name,"onUpdate:modelValue":t[5]||(t[5]=e=>w.Filter_name=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(j,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(M,{label:e.$t("Categorie")},{default:(0,l.k6)((()=>[(0,l.bF)(H,{reduce:e=>e.value,placeholder:e.$t("Choose_Category"),modelValue:w.Filter_category,"onUpdate:modelValue":t[6]||(t[6]=e=>w.Filter_category=e),options:w.categories.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(j,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(M,{label:e.$t("Brand")},{default:(0,l.k6)((()=>[(0,l.bF)(H,{reduce:e=>e.value,placeholder:e.$t("Choose_Brand"),modelValue:w.Filter_brand,"onUpdate:modelValue":t[7]||(t[7]=e=>w.Filter_brand=e),options:w.brands.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(j,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{onClick:t[8]||(t[8]=e=>O.Get_Products(w.serverParams.page)),variant:"primary m-1",size:"sm",block:""},{default:(0,l.k6)((()=>[y,(0,l.eW)(" "+(0,a.v_)(e.$t("Filter")),1)])),_:1})])),_:1}),(0,l.bF)(j,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{onClick:t[9]||(t[9]=e=>O.Reset_Filter()),variant:"danger m-1",size:"sm",block:""},{default:(0,l.k6)((()=>[L,(0,l.eW)(" "+(0,a.v_)(e.$t("Reset")),1)])),_:1})])),_:1})])),_:1})])])),_:1},8,["title"]),(0,l.bF)(te,{"ok-only":"","ok-title":"Cancel",size:"md",id:"importProducts",title:e.$t("import_products")},{default:(0,l.k6)((()=>[(0,l.bF)(ee,{onSubmit:(0,i.D$)(O.Submit_import,["prevent"]),enctype:"multipart/form-data"},{default:(0,l.k6)((()=>[(0,l.bF)(J,null,{default:(0,l.k6)((()=>[(0,l.bF)(j,{md:"12",sm:"12",class:"mb-3"},{default:(0,l.k6)((()=>[(0,l.bF)(M,null,{default:(0,l.k6)((()=>[(0,l.Lk)("input",{type:"file",onChange:t[10]||(t[10]=(...e)=>O.onFileSelected&&O.onFileSelected(...e)),label:"Choose File"},null,32),(0,l.bF)(Z,{id:"File-feedback",class:"d-block"},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("field_must_be_in_csv_format")),1)])),_:1})])),_:1})])),_:1}),(0,l.bF)(j,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{type:"submit",variant:"primary",disabled:w.ImportProcessing,size:"sm",block:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[11]||((0,l.Vq)(-1),t[11]=w.ImportProcessing?((0,l.uX)(),(0,l.CE)("div",x,D)):(0,l.Q3)("",!0),(0,l.Vq)(1),t[11])])),_:1}),(0,l.bF)(j,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{href:"/import/exemples/import_products.csv",variant:"info",size:"sm",block:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,a.v_)(e.$t("Download_exemple")),1)])),_:1})])),_:1}),(0,l.bF)(j,{md:"12",sm:"12"},{default:(0,l.k6)((()=>[(0,l.Lk)("table",T,[(0,l.Lk)("tbody",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("Name_product")),1),(0,l.Lk)("th",null,[(0,l.Lk)("span",S,(0,a.v_)(e.$t("Field_is_required")),1)])]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("CodeProduct")),1),(0,l.Lk)("th",null,[(0,l.Lk)("span",B,(0,a.v_)(e.$t("Field_is_required")),1),(0,l.eW)(" "+(0,a.v_)(e.$t("code_must_be_not_exist_already")),1)])]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("Categorie")),1),(0,l.Lk)("th",null,[(0,l.Lk)("span",U,(0,a.v_)(e.$t("Field_is_required")),1)])]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("ProductCost")),1),(0,l.Lk)("th",null,[(0,l.Lk)("span",W,(0,a.v_)(e.$t("Field_is_required")),1)])]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("ProductPrice")),1),(0,l.Lk)("th",null,[(0,l.Lk)("span",E,(0,a.v_)(e.$t("Field_is_required")),1)])]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("UnitProduct")),1),(0,l.Lk)("th",null,[(0,l.Lk)("span",V,(0,a.v_)(e.$t("Field_is_required")),1),(0,l.eW)(" "+(0,a.v_)(e.$t("must_be_exist"))+" "+(0,a.v_)(e.$t("Please_use_short_name_of_unit")),1)])]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("Brand")),1),(0,l.Lk)("th",null,[(0,l.Lk)("span",R,(0,a.v_)(e.$t("Field_optional")),1)])]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("StockAlert")),1),(0,l.Lk)("th",null,[(0,l.Lk)("span",I,(0,a.v_)(e.$t("Field_optional")),1)])]),(0,l.Lk)("tr",null,[(0,l.Lk)("td",null,(0,a.v_)(e.$t("Note")),1),(0,l.Lk)("th",null,[(0,l.Lk)("span",X,(0,a.v_)(e.$t("Field_optional")),1)])])])])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])]))])}var q=s(95353),z=s(5947),G=s.n(z),K=s(44323);s(13246);const N={metaInfo:{title:"Products"},data(){return{serverParams:{sort:{field:"id",type:"desc"},page:1,perPage:10},selectedIds:[],ImportProcessing:!1,data:new FormData,import_products:"",search:"",totalRows:"",isLoading:!0,spinner:!1,limit:"10",Filter_brand:"",Filter_code:"",Filter_name:"",Filter_category:"",categories:[],brands:[],products:{},warehouses:[]}},computed:{...(0,q.L8)(["currentUserPermissions"]),columns(){return[{label:this.$t("image"),field:"image",type:"image",html:!0,tdClass:"text-left",thClass:"text-left"},{label:this.$t("type"),field:"type",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Name_product"),field:"name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Code"),field:"code",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Brand"),field:"brand",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Categorie"),field:"category",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Cost"),field:"cost",html:!0,tdClass:"text-left",thClass:"text-left"},{label:this.$t("Price"),field:"price",html:!0,tdClass:"text-left",thClass:"text-left"},{label:this.$t("Unit"),field:"unit",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Quantity"),field:"quantity",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{Product_PDF(){var e=this;let t=new K["default"]("p","pt"),s=[{title:"type",dataKey:"type"},{title:"name",dataKey:"name"},{title:"code",dataKey:"code"},{title:"category",dataKey:"category"},{title:"cost",dataKey:"cost"},{title:"price",dataKey:"price"},{title:"unit",dataKey:"unit"},{title:"quantity",dataKey:"quantity"}];t.autoTable(s,e.products),t.text("Product List",40,25),t.save("Product_List.pdf")},Show_import_products(){this.$bvModal.show("importProducts")},onFileSelected(e){this.import_products="";let t,s=e.target.files[0];s["size"]<1048576?t=!1:this.makeToast("danger",this.$t("file_size_must_be_less_than_1_mega"),this.$t("Failed")),!1===t&&(this.import_products=s)},Submit_import(){G().start(),G().set(.1);var e=this;e.ImportProcessing=!0,e.data.append("products",e.import_products),axios.post("products/import/csv",e.data).then((t=>{e.ImportProcessing=!1,!0===t.data.status?(this.makeToast("success",this.$t("Successfully_Imported"),this.$t("Success")),Fire.$emit("Event_import")):!1===t.data.status&&this.makeToast("danger",this.$t("field_must_be_in_csv_format"),this.$t("Failed")),G().done()})).catch((t=>{if(e.ImportProcessing=!1,G().done(),t.response&&422===t.response.status){var s=t.response.data.errors;this.makeToast("danger",s,this.$t("Failed"))}else this.makeToast("danger",this.$t("Please_follow_the_import_instructions"),this.$t("Failed"))}))},makeToast(e,t,s){this.$root.$bvToast.toast(t,{title:s,variant:e,solid:!0})},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Products(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Products(1))},selectionChanged({selectedRows:e}){this.selectedIds=[],e.forEach(((e,t)=>{this.selectedIds.push(e.id)}))},onSortChange(e){let t="";t="brand"==e[0].field?"brand_id":"category"==e[0].field?"category_id":e[0].field,this.updateParams({sort:{type:e[0].type,field:t}}),this.Get_Products(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_Products(this.serverParams.page)},Reset_Filter(){this.search="",this.Filter_brand="",this.Filter_code="",this.Filter_name="",this.Filter_category="",this.Get_Products(this.serverParams.page)},setToStrings(){null===this.Filter_category?this.Filter_category="":null===this.Filter_brand&&(this.Filter_brand="")},Get_Products(e){G().start(),G().set(.1),this.setToStrings(),axios.get("products?page="+e+"&code="+this.Filter_code+"&name="+this.Filter_name+"&category_id="+this.Filter_category+"&brand_id="+this.Filter_brand+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.products=e.data.products,this.warehouses=e.data.warehouses,this.categories=e.data.categories,this.brands=e.data.brands,this.totalRows=e.data.totalRows,G().done(),this.isLoading=!1})).catch((e=>{G().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},Remove_Product(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&(G().start(),G().set(.1),axios.delete("products/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.ProductDeleted"),"success"),Fire.$emit("Delete_Product")})).catch((()=>{setTimeout((()=>G().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.AlreadyLinked"),"warning")})))}))},delete_by_selected(){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&(G().start(),G().set(.1),axios.post("products/delete/by_selection",{selectedIds:this.selectedIds}).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.ProductDeleted"),"success"),Fire.$emit("Delete_Product")})).catch((()=>{setTimeout((()=>G().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))}},created:function(){this.Get_Products(1),Fire.$on("Delete_Product",(()=>{this.Get_Products(this.serverParams.page),setTimeout((()=>G().done()),500)})),Fire.$on("Event_import",(()=>{setTimeout((()=>{this.Get_Products(this.serverParams.page),this.$bvModal.hide("importProducts")}),500)}))}};var Q=s(66262);const A=(0,Q.A)(N,[["render",O]]),M=A}}]);
//# sourceMappingURL=index_products.d5c72744.js.map