"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[5755],{24495:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var l=a(20641),s=a(90033);const r={class:"main-content"},n={key:0,class:"loading_page spinner spinner-primary mr-3"},i={slot:"table-actions",class:"mt-2 mb-3"},o=(0,l.Lk)("i",{class:"i-Filter-2"},null,-1),d=(0,l.Lk)("i",{class:"i-File-Copy"},null,-1),u=(0,l.Lk)("i",{class:"i-File-Excel"},null,-1),h={class:"px-3 py-2"},p=(0,l.Lk)("i",{class:"i-Filter-2"},null,-1),c=(0,l.Lk)("i",{class:"i-Power-2"},null,-1);function m(e,t,a,m,_,g){const b=(0,l.g2)("breadcumb"),f=(0,l.g2)("date-range-picker"),P=(0,l.g2)("b-col"),F=(0,l.g2)("b-button"),v=(0,l.g2)("vue-excel-xlsx"),y=(0,l.g2)("vue-good-table"),R=(0,l.g2)("b-card"),k=(0,l.g2)("b-form-input"),C=(0,l.g2)("b-form-group"),D=(0,l.g2)("v-select"),S=(0,l.g2)("b-row"),w=(0,l.g2)("b-sidebar"),x=(0,l.gN)("b-toggle");return(0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(b,{page:e.$t("payments_Purchases_Return"),folder:e.$t("Reports")},null,8,["page","folder"]),_.isLoading?((0,l.uX)(),(0,l.CE)("div",n)):(0,l.Q3)("",!0),_.isLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(P,{key:1,md:"12",class:"text-center"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:_.dateRange,"onUpdate:modelValue":t[0]||(t[0]=e=>_.dateRange=e),startDate:_.startDate,endDate:_.endDate,onUpdate:g.Submit_filter_dateRange,"locale-data":_.locale},{input:(0,l.k6)((e=>[(0,l.eW)((0,s.v_)(e.startDate.toJSON().slice(0,10))+" - "+(0,s.v_)(e.endDate.toJSON().slice(0,10)),1)])),_:1},8,["modelValue","startDate","endDate","onUpdate","locale-data"])])),_:1})),_.isLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(R,{key:2,class:"wrapper"},{default:(0,l.k6)((()=>[(0,l.bF)(y,{mode:"remote",columns:g.columns,totalRows:_.totalRows,rows:_.rows,"group-options":{enabled:!0,headerPosition:"bottom"},onOnPageChange:g.onPageChange,onOnPerPageChange:g.onPerPageChange,onOnSortChange:g.onSortChange,onOnSearch:g.onSearch,"search-options":{placeholder:e.$t("Search_this_table"),enabled:!0},"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"table-hover tableOne vgt-table"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",i,[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(F,{variant:"outline-info ripple m-1",size:"sm"},{default:(0,l.k6)((()=>[o,(0,l.eW)(" "+(0,s.v_)(e.$t("Filter")),1)])),_:1})),[[x,void 0,void 0,{"sidebar-right":!0}]]),(0,l.bF)(F,{onClick:t[1]||(t[1]=e=>g.Payment_PDF()),size:"sm",variant:"outline-success ripple m-1"},{default:(0,l.k6)((()=>[d,(0,l.eW)(" PDF ")])),_:1}),(0,l.bF)(v,{class:"btn btn-sm btn-outline-danger ripple m-1",data:_.payments,columns:g.columns,"file-name":"payments","file-type":"xlsx","sheet-name":"payments"},{default:(0,l.k6)((()=>[u,(0,l.eW)(" EXCEL ")])),_:1},8,["data","columns"])])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options"])])),_:1})),(0,l.bF)(w,{id:"sidebar-right",title:e.$t("Filter"),"bg-variant":"white",right:"",shadow:""},{default:(0,l.k6)((()=>[(0,l.Lk)("div",h,[(0,l.bF)(S,null,{default:(0,l.k6)((()=>[(0,l.bF)(P,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:e.$t("Reference")},{default:(0,l.k6)((()=>[(0,l.bF)(k,{label:"Reference",placeholder:e.$t("Reference"),modelValue:_.Filter_Ref,"onUpdate:modelValue":t[2]||(t[2]=e=>_.Filter_Ref=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(P,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:e.$t("Supplier")},{default:(0,l.k6)((()=>[(0,l.bF)(D,{reduce:e=>e.value,placeholder:e.$t("Choose_Supplier"),modelValue:_.Filter_supplier,"onUpdate:modelValue":t[3]||(t[3]=e=>_.Filter_supplier=e),options:_.suppliers.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(P,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:e.$t("Return")},{default:(0,l.k6)((()=>[(0,l.bF)(D,{reduce:e=>e.value,placeholder:e.$t("PleaseSelect"),modelValue:_.Filter_return,"onUpdate:modelValue":t[4]||(t[4]=e=>_.Filter_return=e),options:_.purchase_returns.map((e=>({label:e.Ref,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(P,{md:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{label:e.$t("Paymentchoice")},{default:(0,l.k6)((()=>[(0,l.bF)(D,{modelValue:_.Filter_Reg,"onUpdate:modelValue":t[5]||(t[5]=e=>_.Filter_Reg=e),reduce:e=>e.value,placeholder:e.$t("PleaseSelect"),options:[{label:"Cash",value:"Cash"},{label:"cheque",value:"cheque"},{label:"TPE",value:"tpe"},{label:"Western Union",value:"Western Union"},{label:"bank transfer",value:"bank transfer"},{label:"credit card",value:"credit card"},{label:"other",value:"other"}]},null,8,["modelValue","reduce","placeholder"])])),_:1},8,["label"])])),_:1}),(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{onClick:t[6]||(t[6]=e=>g.Payments_Purchase_returns(_.serverParams.page)),variant:"primary ripple m-1",size:"sm",block:""},{default:(0,l.k6)((()=>[p,(0,l.eW)(" "+(0,s.v_)(e.$t("Filter")),1)])),_:1})])),_:1}),(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{onClick:t[7]||(t[7]=e=>g.Reset_Filter()),variant:"danger ripple m-1",size:"sm",block:""},{default:(0,l.k6)((()=>[c,(0,l.eW)(" "+(0,s.v_)(e.$t("Reset")),1)])),_:1})])),_:1})])),_:1})])])),_:1},8,["title"])])}var _=a(5947),g=a.n(_),b=a(44323),f=(a(13246),a(32464)),P=a.n(f),F=a(95093),v=a.n(F);const y={metaInfo:{title:"Payments Purchase returns"},components:{DateRangePicker:P()},data(){return{isLoading:!0,serverParams:{sort:{field:"id",type:"desc"},page:1,perPage:10},limit:"10",search:"",totalRows:"",Filter_supplier:"",Filter_Ref:"",Filter_return:"",Filter_Reg:"",payments:[],suppliers:[],rows:[{Reglement:"Total",children:[]}],purchase_returns:[],today_mode:!0,startDate:"",endDate:"",dateRange:{startDate:"",endDate:""},locale:{Label:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:v().weekdaysMin(),monthNames:v().monthsShort(),firstDay:1}}},computed:{columns(){return[{label:this.$t("date"),field:"date",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Reference"),field:"Ref",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Return"),field:"Ref_return",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Supplier"),field:"provider_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("ModePaiement"),field:"Reglement",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Amount"),field:"montant",type:"decimal",headerField:this.sumCount,tdClass:"text-left",thClass:"text-left"}]}},methods:{sumCount(e){let t=0;for(let a=0;a<e.children.length;a++)t+=e.children[a].montant;return t},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Payments_Purchase_returns(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Payments_Purchase_returns(1))},onSortChange(e){let t="";t="Ref_return"==e[0].field?"purchase_return_id":e[0].field,this.updateParams({sort:{type:e[0].type,field:t}}),this.Payments_Purchase_returns(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Payments_Purchase_returns(this.serverParams.page)},Reset_Filter(){this.search="",this.Filter_supplier="",this.Filter_Ref="",this.Filter_return="",this.Filter_Reg="",this.Payments_Purchase_returns(this.serverParams.page)},setToStrings(){null===this.Filter_supplier?this.Filter_supplier="":null===this.Filter_return&&(this.Filter_return="")},Payment_PDF(){var e=this;let t=new b["default"]("p","pt"),a=[{title:"Date",dataKey:"date"},{title:"Ref",dataKey:"Ref"},{title:"Return",dataKey:"Ref_return"},{title:"Supplier",dataKey:"provider_name"},{title:"Paid by",dataKey:"Reglement"},{title:"Amount",dataKey:"montant"}];t.autoTable(a,e.payments),t.text("Payments Purchase Returns",40,25),t.save("Payments_Purchase_returns.pdf")},Submit_filter_dateRange(){var e=this;e.startDate=e.dateRange.startDate.toJSON().slice(0,10),e.endDate=e.dateRange.endDate.toJSON().slice(0,10),e.Payments_Purchase_returns(1)},get_data_loaded(){var e=this;if(e.today_mode){let t=new Date;e.startDate=t.getFullYear(),e.endDate=(new Date).toJSON().slice(0,10),e.dateRange.startDate=t.getFullYear(),e.dateRange.endDate=(new Date).toJSON().slice(0,10)}},Payments_Purchase_returns(e){g().start(),g().set(.1),this.setToStrings(),this.get_data_loaded(),axios.get("payment/returns_purchase?page="+e+"&Ref="+this.Filter_Ref+"&provider_id="+this.Filter_supplier+"&purchase_return_id="+this.Filter_return+"&Reglement="+this.Filter_Reg+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit+"&to="+this.endDate+"&from="+this.startDate).then((e=>{this.payments=e.data.payments,this.suppliers=e.data.suppliers,this.purchase_returns=e.data.purchase_returns,this.totalRows=e.data.totalRows,this.rows[0].children=this.payments,g().done(),this.isLoading=!1,this.today_mode=!1})).catch((e=>{g().done(),setTimeout((()=>{this.isLoading=!1,this.today_mode=!1}),500)}))}},created:function(){this.Payments_Purchase_returns(1)}};var R=a(66262);const k=(0,R.A)(y,[["render",m]]),C=k}}]);
//# sourceMappingURL=payments_purchases_returns.eb38d760.js.map