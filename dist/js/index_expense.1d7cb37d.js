"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[6024],{60399:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a=s(20641),l=s(90033);const i={class:"main-content"},n={key:0,class:"loading_page spinner spinner-primary mr-3"},r={key:1},o={slot:"selected-row-actions"},d={slot:"table-actions",class:"mt-2 mb-3"},h=(0,a.Lk)("i",{class:"i-Filter-2"},null,-1),c=(0,a.Lk)("i",{class:"i-File-Copy"},null,-1),u=(0,a.Lk)("i",{class:"i-File-Excel"},null,-1),p=(0,a.Lk)("span",{class:"ul-btn__icon"},[(0,a.Lk)("i",{class:"i-Add"})],-1),m={class:"ul-btn__text ml-1"},g={slot:"table-row","slot-scope":"props"},_={key:0},b=(0,a.Lk)("i",{class:"i-Edit text-25 text-success"},null,-1),x=(0,a.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),f=[x],F={class:"px-3 py-2"},C=(0,a.Lk)("i",{class:"i-Filter-2"},null,-1),v=(0,a.Lk)("i",{class:"i-Power-2"},null,-1);function w(e,t,s,x,w,k){const y=(0,a.g2)("breadcumb"),$=(0,a.g2)("b-button"),P=(0,a.g2)("vue-excel-xlsx"),E=(0,a.g2)("router-link"),D=(0,a.g2)("vue-good-table"),R=(0,a.g2)("b-form-input"),L=(0,a.g2)("b-form-group"),T=(0,a.g2)("b-col"),S=(0,a.g2)("v-select"),B=(0,a.g2)("b-row"),O=(0,a.g2)("b-sidebar"),U=(0,a.gN)("b-toggle"),V=(0,a.gN)("b-tooltip");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(y,{page:e.$t("Expense_List"),folder:e.$t("Expenses")},null,8,["page","folder"]),w.isLoading?((0,a.uX)(),(0,a.CE)("div",n)):((0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(D,{mode:"remote",columns:k.columns,totalRows:w.totalRows,rows:w.expenses,onOnPageChange:k.onPageChange,onOnPerPageChange:k.onPerPageChange,onOnSortChange:k.onSortChange,onOnSearch:k.onSearch,"search-options":{enabled:!0,placeholder:e.$t("Search_this_table")},"select-options":{enabled:!0,clearSelectionText:""},onOnSelectedRowsChange:k.selectionChanged,"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"tableOne table-hover vgt-table"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",o,[(0,a.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t[0]||(t[0]=e=>k.delete_by_selected())},(0,l.v_)(e.$t("Del")),1)]),(0,a.Lk)("div",d,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)($,{variant:"outline-info ripple m-1",size:"sm"},{default:(0,a.k6)((()=>[h,(0,a.eW)(" "+(0,l.v_)(e.$t("Filter")),1)])),_:1})),[[U,void 0,void 0,{"sidebar-right":!0}]]),(0,a.bF)($,{onClick:t[1]||(t[1]=e=>k.Expense_PDF()),size:"sm",variant:"outline-success ripple m-1"},{default:(0,a.k6)((()=>[c,(0,a.eW)(" PDF ")])),_:1}),(0,a.bF)(P,{class:"btn btn-sm btn-outline-danger ripple m-1",data:w.expenses,columns:k.columns,"file-name":"Expenses","file-type":"xlsx","sheet-name":"Expenses"},{default:(0,a.k6)((()=>[u,(0,a.eW)(" EXCEL ")])),_:1},8,["data","columns"]),e.currentUserPermissions&&e.currentUserPermissions.includes("expense_add")?((0,a.uX)(),(0,a.Wv)(E,{key:0,class:"btn-sm btn btn-primary ripple btn-icon m-1",to:"/app/expenses/store"},{default:(0,a.k6)((()=>[p,(0,a.Lk)("span",m,(0,l.v_)(e.$t("Add")),1)])),_:1})):(0,a.Q3)("",!0)]),(0,a.Lk)("template",g,["actions"==e.props.column.field?((0,a.uX)(),(0,a.CE)("span",_,[e.currentUserPermissions&&e.currentUserPermissions.includes("expense_edit")?(0,a.bo)(((0,a.uX)(),(0,a.Wv)(E,{key:0,title:"Edit",to:"/app/expenses/edit/"+e.props.row.id},{default:(0,a.k6)((()=>[b])),_:1},8,["to"])),[[V,void 0,void 0,{hover:!0}]]):(0,a.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("expense_delete")?(0,a.bo)(((0,a.uX)(),(0,a.CE)("a",{key:1,title:"Delete",class:"cursor-pointer",onClick:t[2]||(t[2]=t=>k.Remove_Expense(e.props.row.id))},f)),[[V,void 0,void 0,{hover:!0}]]):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options","onOnSelectedRowsChange"])])),(0,a.bF)(O,{id:"sidebar-right",title:e.$t("Filter"),"bg-variant":"white",right:"",shadow:""},{default:(0,a.k6)((()=>[(0,a.Lk)("div",F,[(0,a.bF)(B,null,{default:(0,a.k6)((()=>[(0,a.bF)(T,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{label:e.$t("date")},{default:(0,a.k6)((()=>[(0,a.bF)(R,{type:"date",modelValue:w.Filter_date,"onUpdate:modelValue":t[3]||(t[3]=e=>w.Filter_date=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(T,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{label:e.$t("Reference")},{default:(0,a.k6)((()=>[(0,a.bF)(R,{label:"Reference",placeholder:e.$t("Reference"),modelValue:w.Filter_Ref,"onUpdate:modelValue":t[4]||(t[4]=e=>w.Filter_Ref=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(T,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{label:e.$t("warehouse")},{default:(0,a.k6)((()=>[(0,a.bF)(S,{reduce:e=>e.value,placeholder:e.$t("Choose_Warehouse"),modelValue:w.Filter_warehouse,"onUpdate:modelValue":t[5]||(t[5]=e=>w.Filter_warehouse=e),options:w.warehouses.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(T,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{label:e.$t("Expense_Category")},{default:(0,a.k6)((()=>[(0,a.bF)(S,{reduce:e=>e.value,placeholder:e.$t("Choose_Category"),modelValue:w.Filter_category,"onUpdate:modelValue":t[6]||(t[6]=e=>w.Filter_category=e),options:w.expense_Category.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(T,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)($,{onClick:t[7]||(t[7]=e=>k.Get_Expenses(w.serverParams.page)),variant:"primary m-1",size:"sm",block:""},{default:(0,a.k6)((()=>[C,(0,a.eW)(" "+(0,l.v_)(e.$t("Filter")),1)])),_:1})])),_:1}),(0,a.bF)(T,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)($,{onClick:t[8]||(t[8]=e=>k.Reset_Filter()),variant:"danger m-1",size:"sm",block:""},{default:(0,a.k6)((()=>[v,(0,a.eW)(" "+(0,l.v_)(e.$t("Reset")),1)])),_:1})])),_:1})])),_:1})])])),_:1},8,["title"])])}var k=s(95353),y=s(5947),$=s.n(y),P=s(44323);s(13246);const E={metaInfo:{title:"Expense"},data(){return{isLoading:!0,serverParams:{columnFilters:{},sort:{field:"id",type:"desc"},page:1,perPage:10},selectedIds:[],totalRows:"",search:"",limit:"10",Filter_date:"",Filter_Ref:"",Filter_warehouse:"",Filter_category:"",expenses:[],warehouses:[],expense_Category:[]}},computed:{...(0,k.L8)(["currentUserPermissions","currentUser"]),columns(){return[{label:this.$t("date"),field:"date",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Reference"),field:"Ref",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Details"),field:"details",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Amount"),field:"amount",type:"decimal",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Categorie"),field:"category_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("warehouse"),field:"warehouse_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{Expense_PDF(){var e=this;let t=new P["default"]("p","pt"),s=[{title:"Date",dataKey:"date"},{title:"Reference",dataKey:"Ref"},{title:"Amount",dataKey:"amount"},{title:"Category",dataKey:"category_name"},{title:"Warehouse",dataKey:"warehouse_name"}];t.autoTable(s,e.expenses),t.text("Expense List",40,25),t.save("Expense_List.pdf")},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Expenses(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Expenses(1))},selectionChanged({selectedRows:e}){this.selectedIds=[],e.forEach(((e,t)=>{this.selectedIds.push(e.id)}))},onSortChange(e){let t="";t="warehouse_name"==e[0].field?"warehouse_id":"category_name"==e[0].field?"expense_category_id":e[0].field,this.updateParams({sort:{type:e[0].type,field:t}}),this.Get_Expenses(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_Expenses(this.serverParams.page)},Reset_Filter(){this.search="",this.Filter_date="",this.Filter_Ref="",this.Filter_warehouse="",this.Filter_category="",this.Get_Expenses(this.serverParams.page)},setToStrings(){null===this.Filter_warehouse?this.Filter_warehouse="":null===this.Filter_category&&(this.Filter_category="")},Get_Expenses(e){$().start(),$().set(.1),this.setToStrings(),axios.get("expenses?page="+e+"&Ref="+this.Filter_Ref+"&warehouse_id="+this.Filter_warehouse+"&date="+this.Filter_date+"&expense_category_id="+this.Filter_category+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.expenses=e.data.expenses,this.expense_Category=e.data.Expenses_category,this.warehouses=e.data.warehouses,this.totalRows=e.data.totalRows,$().done(),this.isLoading=!1})).catch((e=>{$().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},Remove_Expense(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&($().start(),$().set(.1),axios.delete("expenses/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Expense_Deleted"),"success"),Fire.$emit("Delete_Expense")})).catch((()=>{setTimeout((()=>$().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))},delete_by_selected(){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&($().start(),$().set(.1),axios.post("expenses_delete_by_selection",{selectedIds:this.selectedIds}).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Expense_Deleted"),"success"),Fire.$emit("Delete_Expense")})).catch((()=>{setTimeout((()=>$().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))}},created:function(){this.Get_Expenses(1),Fire.$on("Delete_Expense",(()=>{setTimeout((()=>{$().done(),this.Get_Expenses(this.serverParams.page)}),500)}))}};var D=s(66262);const R=(0,D.A)(E,[["render",w]]),L=R}}]);
//# sourceMappingURL=index_expense.1d7cb37d.js.map