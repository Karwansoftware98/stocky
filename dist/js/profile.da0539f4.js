"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[8138],{92844:(e,a,t)=>{t.r(a),t.d(a,{default:()=>V});var l=t(20641),s=t(90033),r=t(53751);const d={class:"main-content"},i={key:0,class:"loading_page spinner spinner-primary mr-3"},n={key:1,class:"card user-profile o-hidden mb-30"},u=(0,l.Lk)("div",{class:"header-cover"},null,-1),o={class:"user-info"},m=["src"],b={class:"m-0 text-24"},f={class:"card-body"},c=["state"],p=(0,l.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1);function k(e,a,t,k,_,v){const h=(0,l.g2)("breadcumb"),F=(0,l.g2)("b-form-input"),g=(0,l.g2)("b-form-invalid-feedback"),w=(0,l.g2)("b-form-group"),V=(0,l.g2)("validation-provider"),P=(0,l.g2)("b-col"),$=(0,l.g2)("b-button"),y=(0,l.g2)("b-row"),S=(0,l.g2)("b-form"),U=(0,l.g2)("validation-observer");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.bF)(h,{page:e.$t("profil"),folder:e.$t("Settings")},null,8,["page","folder"]),_.isLoading?((0,l.uX)(),(0,l.CE)("div",i)):(0,l.Q3)("",!0),_.isLoading?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",n,[u,(0,l.Lk)("div",o,[(0,l.Lk)("img",{class:"profile-picture avatar-lg mb-2",src:"/images/avatar/"+_.avatar,alt:""},null,8,m),(0,l.Lk)("p",b,(0,s.v_)(_.username),1)]),(0,l.Lk)("div",f,[(0,l.bF)(U,{ref:"Update_Profile"},{default:(0,l.k6)((()=>[(0,l.bF)(S,{onSubmit:(0,r.D$)(v.Submit_Profile,["prevent"]),enctype:"multipart/form-data"},{default:(0,l.k6)((()=>[(0,l.bF)(y,null,{default:(0,l.k6)((()=>[(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{name:"Firstname",rules:{required:!0,min:4,max:20}},{default:(0,l.k6)((t=>[(0,l.bF)(w,{label:e.$t("Firstname")+" *"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{state:v.getValidationState(t),"aria-describedby":"Firstname-feedback",label:"Firstname",modelValue:_.user.firstname,"onUpdate:modelValue":a[0]||(a[0]=e=>_.user.firstname=e)},null,8,["state","modelValue"]),(0,l.bF)(g,{id:"Firstname-feedback"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(t.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{name:"lastname",rules:{required:!0,min:4,max:20}},{default:(0,l.k6)((t=>[(0,l.bF)(w,{label:e.$t("lastname")+" *"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{state:v.getValidationState(t),"aria-describedby":"lastname-feedback",label:"lastname",modelValue:_.user.lastname,"onUpdate:modelValue":a[1]||(a[1]=e=>_.user.lastname=e)},null,8,["state","modelValue"]),(0,l.bF)(g,{id:"lastname-feedback"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(t.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{name:"username",rules:{required:!0,min:4,max:20}},{default:(0,l.k6)((t=>[(0,l.bF)(w,{label:e.$t("username")+" *"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{state:v.getValidationState(t),"aria-describedby":"username-feedback",label:"username",modelValue:_.user.username,"onUpdate:modelValue":a[2]||(a[2]=e=>_.user.username=e)},null,8,["state","modelValue"]),(0,l.bF)(g,{id:"username-feedback"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(t.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{name:"Phone",rules:{required:!0}},{default:(0,l.k6)((t=>[(0,l.bF)(w,{label:e.$t("Phone")+" *"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{state:v.getValidationState(t),"aria-describedby":"Phone-feedback",label:"Phone",modelValue:_.user.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>_.user.phone=e)},null,8,["state","modelValue"]),(0,l.bF)(g,{id:"Phone-feedback"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(t.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{name:"Email",rules:{required:!0}},{default:(0,l.k6)((t=>[(0,l.bF)(w,{label:e.$t("Email")+" *"},{default:(0,l.k6)((()=>[(0,l.bF)(F,{state:v.getValidationState(t),"aria-describedby":"Email-feedback",label:"Email",modelValue:_.user.email,"onUpdate:modelValue":a[4]||(a[4]=e=>_.user.email=e)},null,8,["state","modelValue"]),(0,l.bF)(g,{id:"Email-feedback"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(t.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,l.bF)(P,{md:"6",sm:"12"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{name:"Avatar",ref:"Avatar",rules:"mimes:image/*|size:200"},{default:(0,l.k6)((()=>[(0,l.bF)(w,{"slot-scope":"{validate, valid, errors }",label:e.$t("UserImage")},{default:(0,l.k6)((()=>[(0,l.Lk)("input",{state:!e.errors[0]&&(!!e.valid||null),class:(0,s.C4)({"is-invalid":!!e.errors.length}),onChange:a[5]||(a[5]=(...e)=>v.onFileSelected&&v.onFileSelected(...e)),label:"Choose Avatar",type:"file"},null,42,c),(0,l.bF)(g,{id:"Avatar-feedback"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1},512)])),_:1}),(0,l.bF)(P,{md:"6"},{default:(0,l.k6)((()=>[(0,l.bF)(V,{name:"New password",rules:{min:6,max:14}},{default:(0,l.k6)((t=>[(0,l.bF)(w,{label:e.$t("Newpassword")},{default:(0,l.k6)((()=>[(0,l.bF)(F,{state:v.getValidationState(t),"aria-describedby":"Nawpassword-feedback",placeholder:e.$t("LeaveBlank"),label:"New password",modelValue:_.user.NewPassword,"onUpdate:modelValue":a[6]||(a[6]=e=>_.user.NewPassword=e)},null,8,["state","placeholder","modelValue"]),(0,l.bF)(g,{id:"Nawpassword-feedback"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(t.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,l.bF)(P,{md:"12",class:"mt-3"},{default:(0,l.k6)((()=>[(0,l.bF)($,{variant:"primary",type:"submit"},{default:(0,l.k6)((()=>[p,(0,l.eW)(" "+(0,s.v_)(e.$t("submit")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},512)])]))])}var _=t(5947),v=t.n(_),h=t(95353);const F={metaInfo:{title:"Profile"},data(){return{data:new FormData,avatar:"",username:"",isLoading:!0,user:{id:"",firstname:"",lastname:"",username:"",NewPassword:null,email:"",phone:"",avatar:""}}},computed:{...(0,h.L8)(["currentUser"])},methods:{Submit_Profile(){this.$refs.Update_Profile.validate().then((e=>{e?this.Update_Profile():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},makeToast(e,a,t){this.$root.$bvToast.toast(a,{title:t,variant:e,solid:!0})},getValidationState({dirty:e,validated:a,valid:t=null}){return e||a?t:null},Get_Profile_Info(){axios.get("Get_user_profile").then((e=>{this.user=e.data.user,this.avatar=this.currentUser.avatar,this.username=this.currentUser.username,this.isLoading=!1})).catch((e=>{this.isLoading=!1}))},async onFileSelected(e){const{valid:a}=await this.$refs.Avatar.validate(e);this.user.avatar=a?e.target.files[0]:""},Update_Profile(){v().start(),v().set(.1);var e=this;e.data.append("firstname",e.user.firstname),e.data.append("lastname",e.user.lastname),e.data.append("username",e.user.username),e.data.append("email",e.user.email),e.data.append("NewPassword",e.user.NewPassword),e.data.append("phone",e.user.phone),e.data.append("avatar",e.user.avatar),e.data.append("_method","put"),axios.post("update_user_profile/"+e.user.id,e.data).then((e=>{this.makeToast("success",this.$t("Update.TitleProfile"),this.$t("Success")),v().done(),setTimeout((()=>{this.Get_Profile_Info()}),500)})).catch((e=>{v().done()}))}},created:function(){this.Get_Profile_Info()}};var g=t(66262);const w=(0,g.A)(F,[["render",k]]),V=w}}]);
//# sourceMappingURL=profile.da0539f4.js.map