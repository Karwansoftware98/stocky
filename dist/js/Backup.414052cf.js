"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[9117],{89005:(t,e,a)=>{a.r(e),a.d(e,{default:()=>B});var s=a(20641),l=a(90033);const o={class:"main-content"},n={key:0,class:"loading_page spinner spinner-primary mr-3"},i={class:"alert alert-danger"},c=(0,s.Lk)("strong",null,"/storage/app/public/backup",-1),u={slot:"table-actions",class:"mt-2 mb-3"},r=(0,s.Lk)("i",{class:"i-Add"},null,-1),d={slot:"table-row","slot-scope":"props"},p={key:0},h=(0,s.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),k=[h];function b(t,e,a,h,b,m){const g=(0,s.g2)("breadcumb"),_=(0,s.g2)("b-button"),w=(0,s.g2)("vue-good-table"),f=(0,s.g2)("b-card"),B=(0,s.gN)("b-tooltip");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(g,{page:t.$t("BackupDatabase"),folder:t.$t("Settings")},null,8,["page","folder"]),b.isLoading?((0,s.uX)(),(0,s.CE)("div",n)):(0,s.Q3)("",!0),b.isLoading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(f,{key:1,class:"wrapper"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",i,[(0,s.eW)((0,l.v_)(t.$t("You_will_find_your_backup_on"))+" ",1),c,(0,s.eW)(" "+(0,l.v_)(t.$t("and_save_it_to_your_pc")),1)]),(0,s.bF)(w,{mode:"remote",columns:m.columns,totalRows:b.totalRows,rows:b.backups,styleClass:"table-hover tableOne vgt-table"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",u,[(0,s.bF)(_,{onClick:e[0]||(e[0]=t=>m.GenerateBackup()),size:"sm",class:"btn-rounded",variant:"btn btn-primary btn-icon m-1"},{default:(0,s.k6)((()=>[r,(0,s.eW)(" "+(0,l.v_)(t.$t("GenerateBackup")),1)])),_:1})]),(0,s.Lk)("template",d,["actions"==t.props.column.field?((0,s.uX)(),(0,s.CE)("span",p,[(0,s.bo)(((0,s.uX)(),(0,s.CE)("a",{title:"Delete",onClick:e[1]||(e[1]=e=>m.DeleteBackup(t.props.row.date))},k)),[[B,void 0,void 0,{hover:!0}]])])):(0,s.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows"])])),_:1}))])}var m=a(5947),g=a.n(m);const _={metaInfo:{title:"Backup"},data(){return{backups:[],isLoading:!0,totalRows:""}},computed:{columns(){return[{label:this.$t("date"),field:"date",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Filesize"),field:"size",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{GenerateBackup(){g().start(),g().set(.1),axios.get("generate_new_backup").then((t=>{Fire.$emit("Generate_Backup"),setTimeout((()=>g().done()),500)})).catch((t=>{setTimeout((()=>g().done()),500)}))},Get_Backups(){g().start(),g().set(.1),axios.get("get_backup").then((t=>{this.backups=t.data.backups,this.totalRows=t.data.totalRows,g().done(),this.isLoading=!1})).catch((t=>{g().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},DeleteBackup(t){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&axios.delete("delete_backup/"+t).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.BackupDeleted"),"success"),Fire.$emit("Delete_Backup")})).catch((()=>{this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")}))}))}},created:function(){this.Get_Backups(),Fire.$on("Generate_Backup",(()=>{setTimeout((()=>{this.Get_Backups()}),500)})),Fire.$on("Delete_Backup",(()=>{setTimeout((()=>{this.Get_Backups(),g().done()}),500)}))}};var w=a(66262);const f=(0,w.A)(_,[["render",b]]),B=f}}]);
//# sourceMappingURL=Backup.414052cf.js.map