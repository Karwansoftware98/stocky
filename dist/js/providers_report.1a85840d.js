"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[3532],{43736:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var s=r(20641);const a={class:"main-content"},o={key:0,class:"loading_page spinner spinner-primary mr-3"},l={slot:"table-row","slot-scope":"props"},i={key:0},n=(0,s.Lk)("i",{class:"i-File-Copy text-25 text-success"},null,-1),d=[n],h=(0,s.Lk)("i",{class:"i-Eye text-25 text-info"},null,-1);function p(e,t,r,n,p,u){const c=(0,s.g2)("breadcumb"),m=(0,s.g2)("router-link"),g=(0,s.g2)("vue-good-table"),f=(0,s.g2)("b-card"),C=(0,s.gN)("b-tooltip");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.bF)(c,{page:e.$t("SuppliersReport"),folder:e.$t("Reports")},null,8,["page","folder"]),p.isLoading?((0,s.uX)(),(0,s.CE)("div",o)):(0,s.Q3)("",!0),p.isLoading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(f,{key:1,class:"wrapper"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{mode:"remote",columns:u.columns,totalRows:p.totalRows,rows:p.rows,"group-options":{enabled:!0,headerPosition:"bottom"},onOnPageChange:u.onPageChange,onOnPerPageChange:u.onPerPageChange,onOnSortChange:u.onSortChange,onOnSearch:u.onSearch,"search-options":{placeholder:e.$t("Search_this_table"),enabled:!0},"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"tableOne table-hover vgt-table mt-4"},{default:(0,s.k6)((()=>[(0,s.Lk)("template",l,["actions"==e.props.column.field?((0,s.uX)(),(0,s.CE)("span",i,[(0,s.bo)(((0,s.uX)(),(0,s.CE)("a",{title:"PDF",class:"cursor-pointer",onClick:t[0]||(t[0]=t=>u.Download_PDF(e.props.row,e.props.row.id))},d)),[[C,void 0,void 0,{hover:!0}]]),(0,s.bF)(m,{title:"Report",to:"/app/reports/detail_supplier/"+e.props.row.id},{default:(0,s.k6)((()=>[h])),_:1},8,["to"])])):(0,s.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options"])])),_:1}))])}var u=r(5947),c=r.n(u),m=r(95353);const g={metaInfo:{title:"Report Providers"},data(){return{isLoading:!0,serverParams:{sort:{field:"id",type:"desc"},page:1,perPage:10},limit:"10",search:"",totalRows:"",providers:[],provider:{},rows:[{total_purchase:"Total",children:[]}]}},computed:{...(0,m.L8)(["currentUser"]),columns(){return[{label:this.$t("SupplierName"),field:"name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Phone"),field:"phone",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Purchases"),field:"total_purchase",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("TotalAmount"),field:"total_amount",type:"decimal",headerField:this.sumCount,tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Paid"),field:"total_paid",type:"decimal",headerField:this.sumCount2,tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Total_Purchase_Due"),field:"due",type:"decimal",headerField:this.sumCount3,tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Total_Purchase_Return_Due"),field:"return_Due",type:"decimal",headerField:this.sumCount4,tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{sumCount(e){let t=0;for(let r=0;r<e.children.length;r++)t+=e.children[r].total_amount;return t},sumCount2(e){let t=0;for(let r=0;r<e.children.length;r++)t+=e.children[r].total_paid;return t},sumCount3(e){let t=0;for(let r=0;r<e.children.length;r++)t+=e.children[r].due;return t},sumCount4(e){let t=0;for(let r=0;r<e.children.length;r++)t+=e.children[r].return_Due;return t},Download_PDF(e,t){c().start(),c().set(.1),axios.get("report/provider_pdf/"+t,{responseType:"blob",headers:{"Content-Type":"application/json"}}).then((t=>{const r=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=r,s.setAttribute("download","report-"+e.name+".pdf"),document.body.appendChild(s),s.click(),setTimeout((()=>c().done()),500)})).catch((()=>{setTimeout((()=>c().done()),500)}))},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Provider_Report(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Provider_Report(1))},onSortChange(e){this.updateParams({sort:{type:e[0].type,field:e[0].field}}),this.Get_Provider_Report(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_Provider_Report(this.serverParams.page)},formatNumber(e,t){const r=("string"===typeof e?e:e.toString()).split(".");if(t<=0)return r[0];let s=r[1]||"";if(s.length>t)return`${r[0]}.${s.substr(0,t)}`;while(s.length<t)s+="0";return`${r[0]}.${s}`},Get_Provider_Report(e){c().start(),c().set(.1),axios.get("report/provider?page="+e+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.providers=e.data.report,this.totalRows=e.data.totalRows,this.rows[0].children=this.providers,c().done(),this.isLoading=!1})).catch((e=>{c().done(),setTimeout((()=>{this.isLoading=!1}),500)}))}},created:function(){this.Get_Provider_Report(1)}};var f=r(66262);const C=(0,f.A)(g,[["render",p]]),b=C}}]);
//# sourceMappingURL=providers_report.1a85840d.js.map