{"version":3,"file":"js/product_sales_report.19d97330.js","mappings":"4JACOA,MAAM,gB,GADb,MAG0BA,MAAM,6C,GAHhC,O,GAgDaC,KAAK,gBAAgBD,MAAM,a,GAE5B,QAA0B,KAAvBA,MAAM,cAAY,S,GAIrB,QAA2B,KAAxBA,MAAM,eAAa,S,GAUpB,QAA4B,KAAzBA,MAAM,gBAAc,S,GAU1BA,MAAM,a,GAiCH,QAA0B,KAAvBA,MAAM,cAAY,S,GAMrB,QAAyB,KAAtBA,MAAM,aAAW,S,kUAhHhC,QAwHM,MAxHN,EAwHM,EAvHJ,QAAuE,GAA3DE,KAAMC,EAAAA,GAAG,wBAA0BC,OAAQD,EAAAA,GAAG,Y,0BAC/C,EAAS,Y,WAApB,QAA8E,MAA9E,KAHJ,eAK+C,EAAAE,WAL/C,iB,WAKK,QAYS,GAjBd,MAKYC,GAAG,KAAKN,MAAM,e,CAL1B,kBAMQ,IAUoB,EAVpB,QAUoB,GAhB5B,WAOmB,EAAAO,UAPnB,qCAOmB,EAAS,aACjBC,UAAW,EAAAA,UACXC,QAAS,EAAAA,QACR,SAAQ,EAAAC,wBACT,cAAa,EAAAC,Q,CAEGC,OAAK,SACyB,GADjB,EAbxC,iBAciBC,EAAOL,UAAUM,SAASC,MAAM,EAAG,KAAK,OAAG,QAAGF,EAAOJ,QAAQK,SAASC,MAAM,EAAG,KAAJ,MAd5F,K,oEAAA,OAoBgB,EAAAV,WApBhB,iB,WAoBI,QAkDM,MAtEV,IAqBM,QAgDiB,GA/CfW,KAAK,SACJC,QAAS,EAAAA,QACTC,UAAW,EAAAA,UACXC,KAAM,EAAAA,KACN,eAAgB,EAAAC,aAChB,kBAAoB,EAAAC,gBACpB,eAAgB,EAAAC,aAChB,WAAW,EAAAC,SACX,iBAAc,C,YAA0BpB,EAAAA,GAAE,qB,YAI3C,gBAAe,C,oCAKd,qBAAoB,C,6DAMpBqB,WAAY,EAAAC,aAAa,6CAA6C,6C,CA7C/E,kBAgDQ,IAmBM,EAnBN,QAmBM,MAnBN,EAmBM,E,qBAlBJ,QAGW,GAHDC,QAAQ,0BAA0BC,KAAK,M,CAjD3D,kBAkDY,IAA0B,CAA1B,GAlDZ,QAkDsC,KAC1B,QAAGxB,EAAAA,GAAG,WAAD,MAnDjB,O,mBAAA,iBAiDgE,OAItD,QAEW,GAFA,QAAK,eAAE,EAAAyB,aAAaD,KAAK,KAAKD,QAAQ,8B,CArD3D,kBAsDY,IAA2B,CAA3B,GAtDZ,QAsDuC,YAtDvC,OAwDU,QASiB,GARb1B,MAAM,2CACL6B,KAAM,EAAAC,MACNb,QAAS,EAAAA,QACT,YAAW,QACX,YAAW,OACX,aAAY,S,CA9D3B,kBAgEc,IAA4B,CAA5B,GAhEd,QAgE0C,cAhE1C,K,2BAAA,K,uIAyEI,QA8CY,GA9CDc,GAAG,gBAAiBC,MAAO7B,EAAAA,GAAG,UAAW,aAAW,QAAQ8B,MAAA,GAAMC,OAAA,I,CAzEjF,kBA0EM,IA4CM,EA5CN,QA4CM,MA5CN,EA4CM,EA3CJ,QA0CQ,QArHhB,kBA8EU,IASQ,EATR,QASQ,GATD5B,GAAG,MAAI,CA9ExB,kBA+EY,IAOe,EAPf,QAOe,GAPA6B,MAAOhC,EAAAA,GAAG,a,CA/ErC,kBAgFc,IAKE,EALF,QAKE,GAJCiC,OAAQD,GAASA,EAAME,MACvBC,YAAanC,EAAAA,GAAG,mBAlFjC,WAmFyB,EAAAoC,cAnFzB,qCAmFyB,EAAa,iBACrBC,QAAS,EAAAC,UAAUC,KAAID,IAAa,CAAEN,MAAOM,EAAUE,KAAMN,MAAOI,EAAUV,Q,2DApF/F,K,gBAAA,OA0FU,QASQ,GATDzB,GAAG,MAAI,CA1FxB,kBA2FY,IAOe,EAPf,QAOe,GAPA6B,MAAOhC,EAAAA,GAAG,c,CA3FrC,kBA4Fc,IAKE,EALF,QAKE,GAjGhB,WA6FyB,EAAAyC,iBA7FzB,qCA6FyB,EAAgB,oBACxBR,OAAQD,GAASA,EAAME,MACvBC,YAAanC,EAAAA,GAAG,oBAChBqC,QAAS,EAAAK,WAAWH,KAAIG,IAAc,CAAEV,MAAOU,EAAWF,KAAMN,MAAOQ,EAAWd,Q,2DAhGnG,K,gBAAA,OAqGU,QASQ,GATDzB,GAAG,IAAIwC,GAAG,M,CArG3B,kBAsGY,IAOW,EAPX,QAOW,GANR,QAAK,eAAE,EAAAC,UAAU,EAAAC,aAAa9C,OAC/BwB,QAAQ,+BACRC,KAAK,M,CAzGnB,kBA2Gc,IAA0B,CAA1B,GA3Gd,QA2GwC,KAC1B,QAAGxB,EAAAA,GAAG,WAAD,MA5GnB,gBA+GU,QAKQ,GALDG,GAAG,IAAIwC,GAAG,M,CA/G3B,kBAgHY,IAGW,EAHX,QAGW,GAHA,QAAK,eAAE,EAAAG,gBAAgBvB,QAAQ,8BAA8BC,KAAK,M,CAhHzF,kBAiHc,IAAyB,CAAzB,GAjHd,QAiHuC,KACzB,QAAGxB,EAAAA,GAAG,UAAD,MAlHnB,kC,+GAqIA,SAEE+C,SAAU,CACRlB,MAAO,wBAETmB,WAAY,CAAEC,gBAAe,KAC7B,IAAAvB,GACE,MAAO,CACLrB,UAAW,GACXC,QAAS,GACTF,UAAW,CACVC,UAAW,GACXC,QAAS,IAEVE,OAAO,CAEH0C,MAAO,QACPC,YAAa,SACbC,UAAW,IACXC,iBAAkB,eAClBC,WAAY,kBAEZC,WAAY,kBACZC,SAAU,GAEdtD,WAAW,EACX2C,aAAc,CACZY,KAAM,CACJC,MAAO,KACPC,KAAM,QAER5D,KAAM,EACN6D,QAAS,IAEX5C,KAAM,CAAC,CACH6C,OAAQ,QAERC,SAAU,KAIdC,OAAQ,GACRhD,UAAW,GACXO,cAAc,EACdc,cAAe,GACfK,iBAAkB,GAClBH,UAAW,GACXI,WAAY,GACZf,MAAO,GACPqC,MAAO,KACPC,YAAY,EACZC,GAAI,GACJC,KAAM,GAEV,EACC,OAAAC,GACCC,KAAKC,MAAMC,IAAI,sBAAsBC,IACnCH,KAAK/C,cAAe,CAAI,IAE1B+C,KAAKC,MAAMC,IAAI,sBAAsBC,IACnCH,KAAK/C,cAAe,CAAK,GAE7B,EACAmD,SAAU,KACL,QAAW,CAAC,yBAA0B,gBACzC,OAAA3D,GACE,MAAO,CACL,CACEkB,MAAOqC,KAAKrE,GAAG,QACf0D,MAAO,OACPgB,QAAS,YACTC,QAAS,aAEX,CACE3C,MAAOqC,KAAKrE,GAAG,aACf0D,MAAO,MACPgB,QAAS,YACTC,QAAS,aAEX,CACE3C,MAAOqC,KAAKrE,GAAG,YACf0D,MAAO,cACPgB,QAAS,YACTC,QAAS,aAEX,CACE3C,MAAOqC,KAAKrE,GAAG,aACf0D,MAAO,iBACPgB,QAAS,YACTC,QAAS,aAGX,CACE3C,MAAOqC,KAAKrE,GAAG,gBACf0D,MAAO,eACPgB,QAAS,YACTC,QAAS,YACTC,UAAU,GAEZ,CACE5C,MAAOqC,KAAKrE,GAAG,YACf0D,MAAO,WACPC,KAAM,UACNkB,YAAaR,KAAKS,SAClBJ,QAAS,YACTC,QAAS,YACTC,UAAU,GAEZ,CACE5C,MAAOqC,KAAKrE,GAAG,SACf0D,MAAO,QACPC,KAAM,UACNkB,YAAaR,KAAKU,UAClBL,QAAS,YACTC,QAAS,YACTC,UAAU,GAGhB,GAEFI,QAAS,CAEP,QAAAF,CAASG,GAER,IAAIC,EAAM,EACT,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAOnB,SAASsB,OAAQD,IAC1CD,GAAOD,EAAOnB,SAASqB,GAAGE,SAE5B,OAAOH,CACT,EACA,SAAAH,CAAUE,GAET,IAAIC,EAAM,EACT,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAOnB,SAASsB,OAAQD,IAC1CD,GAAOD,EAAOnB,SAASqB,GAAGG,MAE5B,OAAOJ,CACT,EAIA,YAAAK,CAAaC,GACXnB,KAAKxB,aAAe4C,OAAOC,OAAO,CAAC,EAAGrB,KAAKxB,aAAc2C,EAC3D,EAGA,YAAAvE,EAAa,YAAE0E,IACTtB,KAAKxB,aAAa9C,OAAS4F,IAC7BtB,KAAKkB,aAAa,CAAExF,KAAM4F,IAC1BtB,KAAKzB,UAAU+C,GAEnB,EAGA,eAAAzE,EAAgB,eAAE0E,IACZvB,KAAKL,QAAU4B,IACjBvB,KAAKL,MAAQ4B,EACbvB,KAAKkB,aAAa,CAAExF,KAAM,EAAG6D,QAASgC,IACtCvB,KAAKzB,UAAU,GAEnB,EAGA,YAAAzB,CAAa0E,GACX,IAAInC,EAAQ,GAEVA,EADqB,eAAnBmC,EAAO,GAAGnC,MACJ,YACoB,kBAAnBmC,EAAO,GAAGnC,MACX,eAEAmC,EAAO,GAAGnC,MAEpBW,KAAKkB,aAAa,CAChB9B,KAAM,CACJE,KAAMkC,EAAO,GAAGlC,KAChBD,MAAOA,KAGXW,KAAKzB,UAAUyB,KAAKxB,aAAa9C,KACnC,EAGA,QAAAqB,CAASc,GACPmC,KAAKN,OAAS7B,EAAM4D,WACpBzB,KAAKzB,UAAUyB,KAAKxB,aAAa9C,KACnC,EAGA,kBAAAgG,EAAmB,MAAEC,EAAK,UAAEC,EAAS,MAAEC,EAAQ,OAC7C,OAAOF,GAASC,EAAYC,EAAQ,IACtC,EAEA,SAAAC,CAAU5E,EAAS6E,EAAKvE,GACtBwC,KAAKC,MAAM+B,SAASC,MAAMF,EAAK,CAC7BvE,MAAOA,EACPN,QAASA,EACTgF,OAAO,GAEX,EAIA,YAAAzD,GACEuB,KAAKN,OAAS,GACdM,KAAKjC,cAAgB,GACrBiC,KAAK5B,iBAAmB,GACxB4B,KAAKzB,UAAUyB,KAAKxB,aAAa9C,KACnC,EAIA,YAAAyG,CAAaC,EAAQC,GACnB,MAAMxE,GAA2B,kBAAXuE,EAClBA,EACAA,EAAOE,YACTC,MAAM,KACR,GAAIF,GAAO,EAAG,OAAOxE,EAAM,GAC3B,IAAI2E,EAAW3E,EAAM,IAAM,GAC3B,GAAI2E,EAASzB,OAASsB,EACpB,MAAO,GAAGxE,EAAM,MAAM2E,EAASC,OAAO,EAAGJ,KAC3C,MAAOG,EAASzB,OAASsB,EAAKG,GAAY,IAC1C,MAAO,GAAG3E,EAAM,MAAM2E,GACxB,EAIA,SAAApF,GACE,IAAIsF,EAAO1C,KACX,IAAI2C,EAAM,IAAI,aAAM,IAAK,MACrBlG,EAAU,CACZ,CAAEe,MAAO,OAAQoF,QAAS,QAC1B,CAAEpF,MAAO,MAAOoF,QAAS,OACzB,CAAEpF,MAAO,SAAUoF,QAAS,eAC5B,CAAEpF,MAAO,YAAaoF,QAAS,kBAC/B,CAAEpF,MAAO,UAAWoF,QAAS,gBAC7B,CAAEpF,MAAO,MAAOoF,QAAS,YACzB,CAAEpF,MAAO,QAASoF,QAAS,UAE7BD,EAAIE,UAAUpG,EAASiG,EAAKpF,OAC5BqF,EAAIG,KAAK,uBAAwB,GAAI,IACrCH,EAAII,KAAK,2BACX,EAKA,YAAAC,GAE6B,OAAvBhD,KAAKjC,cACPiC,KAAKjC,cAAgB,GACc,OAA1BiC,KAAK5B,mBACd4B,KAAK5B,iBAAmB,GAE5B,EAIA,uBAAAlC,GACE,IAAIwG,EAAO1C,KACX0C,EAAK1G,UAAa0G,EAAK3G,UAAUC,UAAUM,SAASC,MAAM,EAAG,IAC7DmG,EAAKzG,QAAUyG,EAAK3G,UAAUE,QAAQK,SAASC,MAAM,EAAG,IACxDmG,EAAKnE,UAAU,EACjB,EAGA,eAAA0E,GACE,IAAIP,EAAO1C,KACX,GAAI0C,EAAK9C,WAAY,CACnB,IAAIsD,EAAQ,IAAIC,KAEhBT,EAAK1G,UAAYkH,EAAME,cACvBV,EAAKzG,SAAU,IAAIkH,MAAO7G,SAASC,MAAM,EAAG,IAE5CmG,EAAK3G,UAAUC,UAAYkH,EAAME,cACjCV,EAAK3G,UAAUE,SAAU,IAAIkH,MAAO7G,SAASC,MAAM,EAAG,GAExD,CACF,EAIA,SAAAgC,CAAU7C,GAER,YACA,QAAc,IACdsE,KAAKgD,eACLhD,KAAKiD,kBACLI,MACGC,IACC,oCACE5H,EACA,cACAsE,KAAKjC,cACL,iBACAiC,KAAK5B,iBACL,cACA4B,KAAKxB,aAAaY,KAAKC,MACvB,aACAW,KAAKxB,aAAaY,KAAKE,KACvB,WACAU,KAAKN,OACL,UACAM,KAAKL,MACL,OACAK,KAAK/D,QACL,SACA+D,KAAKhE,WAERuH,MAAKC,IACJxD,KAAK1C,MAAQkG,EAASnG,KAAKC,MAC3B0C,KAAK/B,UAAYuF,EAASnG,KAAKY,UAC/B+B,KAAK3B,WAAamF,EAASnG,KAAKgB,WAChC2B,KAAKtD,UAAY8G,EAASnG,KAAKX,UAC/BsD,KAAKrD,KAAK,GAAG8C,SAAWO,KAAK1C,MAE7B,WACA0C,KAAKnE,WAAY,EACjBmE,KAAKJ,YAAa,CAAK,IAExB6D,OAAMD,IAEL,WACAE,YAAW,KACT1D,KAAKnE,WAAY,EACjBmE,KAAKJ,YAAa,CAAK,GACtB,IAAI,GAEb,GAOF,OAAA+D,GACE3D,KAAKzB,UAAU,EACjB,G,eChdF,MAAMqF,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,G","sources":["webpack:///./src/views/app/pages/reports/product_sales_report.vue","webpack:///./src/views/app/pages/reports/product_sales_report.vue?3550"],"sourcesContent":["<template>\r\n  <div class=\"main-content\">\r\n    <breadcumb :page=\"$t('product_sales_report')\" :folder=\"$t('Reports')\"/>\r\n    <div v-if=\"isLoading\" class=\"loading_page spinner spinner-primary mr-3\"></div>\r\n\r\n     <b-col md=\"12\" class=\"text-center\" v-if=\"!isLoading\">\r\n        <date-range-picker \r\n          v-model=\"dateRange\" \r\n          :startDate=\"startDate\" \r\n          :endDate=\"endDate\" \r\n           @update=\"Submit_filter_dateRange\"\r\n          :locale-data=\"locale\" > \r\n\r\n          <template v-slot:input=\"picker\" style=\"min-width: 350px;\">\r\n              {{ picker.startDate.toJSON().slice(0, 10)}} - {{ picker.endDate.toJSON().slice(0, 10)}}\r\n          </template>        \r\n        </date-range-picker>\r\n      </b-col>\r\n\r\n\r\n    <div v-if=\"!isLoading\">\r\n      <vue-good-table\r\n        mode=\"remote\"\r\n        :columns=\"columns\"\r\n        :totalRows=\"totalRows\"\r\n        :rows=\"rows\"\r\n        @on-page-change=\"onPageChange\"\r\n        @on-per-page-change=\"onPerPageChange\"\r\n        @on-sort-change=\"onSortChange\"\r\n        @on-search=\"onSearch\"\r\n        :search-options=\"{\r\n        placeholder: $t('Search_this_table'),\r\n        enabled: true,\r\n      }\"\r\n       :group-options=\"{\r\n          enabled: true,\r\n          headerPosition: 'bottom',\r\n        }\"\r\n       \r\n        :pagination-options=\"{\r\n        enabled: true,\r\n        mode: 'records',\r\n        nextLabel: 'next',\r\n        prevLabel: 'prev',\r\n      }\"\r\n        :styleClass=\"showDropdown?'tableOne table-hover vgt-table full-height':'tableOne table-hover vgt-table non-height'\"\r\n      >\r\n       \r\n        <div slot=\"table-actions\" class=\"mt-2 mb-3\">\r\n          <b-button variant=\"outline-info ripple m-1\" size=\"sm\" v-b-toggle.sidebar-right>\r\n            <i class=\"i-Filter-2\"></i>\r\n            {{ $t(\"Filter\") }}\r\n          </b-button>\r\n          <b-button @click=\"Sales_PDF()\" size=\"sm\" variant=\"outline-success ripple m-1\">\r\n            <i class=\"i-File-Copy\"></i> PDF\r\n          </b-button>\r\n          <vue-excel-xlsx\r\n              class=\"btn btn-sm btn-outline-danger ripple m-1\"\r\n              :data=\"sales\"\r\n              :columns=\"columns\"\r\n              :file-name=\"'sales'\"\r\n              :file-type=\"'xlsx'\"\r\n              :sheet-name=\"'sales'\"\r\n              >\r\n              <i class=\"i-File-Excel\"></i> EXCEL\r\n          </vue-excel-xlsx>\r\n         \r\n        </div>\r\n\r\n      </vue-good-table>\r\n    </div>\r\n\r\n    <!-- Sidebar Filter -->\r\n    <b-sidebar id=\"sidebar-right\" :title=\"$t('Filter')\" bg-variant=\"white\" right shadow>\r\n      <div class=\"px-3 py-2\">\r\n        <b-row>\r\n\r\n          <!-- Customer  -->\r\n          <b-col md=\"12\">\r\n            <b-form-group :label=\"$t('Customer')\">\r\n              <v-select\r\n                :reduce=\"label => label.value\"\r\n                :placeholder=\"$t('Choose_Customer')\"\r\n                v-model=\"Filter_Client\"\r\n                :options=\"customers.map(customers => ({label: customers.name, value: customers.id}))\"\r\n              />\r\n            </b-form-group>\r\n          </b-col>\r\n\r\n          <!-- warehouse -->\r\n          <b-col md=\"12\">\r\n            <b-form-group :label=\"$t('warehouse')\">\r\n              <v-select\r\n                v-model=\"Filter_warehouse\"\r\n                :reduce=\"label => label.value\"\r\n                :placeholder=\"$t('Choose_Warehouse')\"\r\n                :options=\"warehouses.map(warehouses => ({label: warehouses.name, value: warehouses.id}))\"\r\n              />\r\n            </b-form-group>\r\n          </b-col>\r\n\r\n          <b-col md=\"6\" sm=\"12\">\r\n            <b-button\r\n              @click=\"Get_Sales(serverParams.page)\"\r\n              variant=\"primary btn-block ripple m-1\"\r\n              size=\"sm\"\r\n            >\r\n              <i class=\"i-Filter-2\"></i>\r\n              {{ $t(\"Filter\") }}\r\n            </b-button>\r\n          </b-col>\r\n          <b-col md=\"6\" sm=\"12\">\r\n            <b-button @click=\"Reset_Filter()\" variant=\"danger ripple btn-block m-1\" size=\"sm\">\r\n              <i class=\"i-Power-2\"></i>\r\n              {{ $t(\"Reset\") }}\r\n            </b-button>\r\n          </b-col>\r\n        </b-row>\r\n      </div>\r\n    </b-sidebar>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport NProgress from \"nprogress\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\nimport DateRangePicker from 'vue2-daterange-picker'\r\nimport 'vue2-daterange-picker/dist/vue2-daterange-picker.css'\r\nimport moment from 'moment'\r\n\r\nexport default {\r\n\r\n  metaInfo: {\r\n    title: \"Product Sales Report\"\r\n  },\r\n  components: { DateRangePicker },\r\n  data() {\r\n    return {\r\n      startDate: \"\", \r\n      endDate: \"\", \r\n      dateRange: { \r\n       startDate: \"\", \r\n       endDate: \"\" \r\n      }, \r\n      locale:{ \r\n          //separator between the two ranges apply\r\n          Label: \"Apply\", \r\n          cancelLabel: \"Cancel\", \r\n          weekLabel: \"W\", \r\n          customRangeLabel: \"Custom Range\", \r\n          daysOfWeek: moment.weekdaysMin(), \r\n          //array of days - see moment documenations for details \r\n          monthNames: moment.monthsShort(), //array of month names - see moment documenations for details \r\n          firstDay: 1 //ISO first day of week - see moment documenations for details\r\n        },\r\n      isLoading: true,\r\n      serverParams: {\r\n        sort: {\r\n          field: \"id\",\r\n          type: \"desc\"\r\n        },\r\n        page: 1,\r\n        perPage: 10\r\n      },\r\n      rows: [{\r\n          statut: 'Total',\r\n         \r\n          children: [\r\n             \r\n          ],\r\n      },],\r\n      search: \"\",\r\n      totalRows: \"\",\r\n      showDropdown: false,\r\n      Filter_Client: \"\",\r\n      Filter_warehouse: \"\",\r\n      customers: [],\r\n      warehouses: [],\r\n      sales: [],\r\n      limit: \"10\",\r\n      today_mode: true,\r\n      to: \"\",\r\n      from: \"\",\r\n    };\r\n  },\r\n   mounted() {\r\n    this.$root.$on(\"bv::dropdown::show\", bvEvent => {\r\n      this.showDropdown = true;\r\n    });\r\n    this.$root.$on(\"bv::dropdown::hide\", bvEvent => {\r\n      this.showDropdown = false;\r\n    });\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"currentUserPermissions\", \"currentUser\"]),\r\n    columns() {\r\n      return [\r\n        {\r\n          label: this.$t(\"date\"),\r\n          field: \"date\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\"\r\n        },\r\n        {\r\n          label: this.$t(\"Reference\"),\r\n          field: \"Ref\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\"\r\n        },\r\n        {\r\n          label: this.$t(\"Customer\"),\r\n          field: \"client_name\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\"\r\n        },\r\n        {\r\n          label: this.$t(\"warehouse\"),\r\n          field: \"warehouse_name\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\"\r\n        },\r\n      \r\n        {\r\n          label: this.$t(\"Name_product\"),\r\n          field: \"product_name\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n        {\r\n          label: this.$t(\"Qty_sold\"),\r\n          field: \"quantity\",\r\n          type: \"decimal\",\r\n          headerField: this.sumCount,\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n        {\r\n          label: this.$t(\"Total\"),\r\n          field: \"total\",\r\n          type: \"decimal\",\r\n          headerField: this.sumCount2,\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n      ];\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    sumCount(rowObj) {\r\n     \r\n    \tlet sum = 0;\r\n      for (let i = 0; i < rowObj.children.length; i++) {\r\n        sum += rowObj.children[i].quantity;\r\n      }\r\n      return sum;\r\n    },\r\n    sumCount2(rowObj) {\r\n     \r\n    \tlet sum = 0;\r\n      for (let i = 0; i < rowObj.children.length; i++) {\r\n        sum += rowObj.children[i].total;\r\n      }\r\n      return sum;\r\n    },\r\n\r\n\r\n    //---- update Params Table\r\n    updateParams(newProps) {\r\n      this.serverParams = Object.assign({}, this.serverParams, newProps);\r\n    },\r\n\r\n    //---- Event Page Change\r\n    onPageChange({ currentPage }) {\r\n      if (this.serverParams.page !== currentPage) {\r\n        this.updateParams({ page: currentPage });\r\n        this.Get_Sales(currentPage);\r\n      }\r\n    },\r\n\r\n    //---- Event Per Page Change\r\n    onPerPageChange({ currentPerPage }) {\r\n      if (this.limit !== currentPerPage) {\r\n        this.limit = currentPerPage;\r\n        this.updateParams({ page: 1, perPage: currentPerPage });\r\n        this.Get_Sales(1);\r\n      }\r\n    },\r\n\r\n    //---- Event Sort change\r\n    onSortChange(params) {\r\n      let field = \"\";\r\n      if (params[0].field == \"client_name\") {\r\n        field = \"client_id\";\r\n      } else if (params[0].field == \"warehouse_name\") {\r\n        field = \"warehouse_id\";\r\n      } else {\r\n        field = params[0].field;\r\n      }\r\n      this.updateParams({\r\n        sort: {\r\n          type: params[0].type,\r\n          field: field\r\n        }\r\n      });\r\n      this.Get_Sales(this.serverParams.page);\r\n    },\r\n\r\n    \r\n    onSearch(value) {\r\n      this.search = value.searchTerm;\r\n      this.Get_Sales(this.serverParams.page);\r\n    },\r\n\r\n    //---Validate State Fields\r\n    getValidationState({ dirty, validated, valid = null }) {\r\n      return dirty || validated ? valid : null;\r\n    },\r\n    //------ Toast\r\n    makeToast(variant, msg, title) {\r\n      this.$root.$bvToast.toast(msg, {\r\n        title: title,\r\n        variant: variant,\r\n        solid: true\r\n      });\r\n    },\r\n\r\n\r\n    //------ Reset Filter\r\n    Reset_Filter() {\r\n      this.search = \"\";\r\n      this.Filter_Client = \"\";\r\n      this.Filter_warehouse = \"\";\r\n      this.Get_Sales(this.serverParams.page);\r\n    },\r\n\r\n\r\n    //------------------------------Formetted Numbers -------------------------\\\\\r\n    formatNumber(number, dec) {\r\n      const value = (typeof number === \"string\"\r\n        ? number\r\n        : number.toString()\r\n      ).split(\".\");\r\n      if (dec <= 0) return value[0];\r\n      let formated = value[1] || \"\";\r\n      if (formated.length > dec)\r\n        return `${value[0]}.${formated.substr(0, dec)}`;\r\n      while (formated.length < dec) formated += \"0\";\r\n      return `${value[0]}.${formated}`;\r\n    },\r\n\r\n\r\n    //----------------------------------- Sales PDF ------------------------------\\\\\r\n    Sales_PDF() {\r\n      var self = this;\r\n      let pdf = new jsPDF(\"p\", \"pt\");\r\n      let columns = [\r\n        { title: \"date\", dataKey: \"date\" },\r\n        { title: \"Ref\", dataKey: \"Ref\" },\r\n        { title: \"Client\", dataKey: \"client_name\" },\r\n        { title: \"Warehouse\", dataKey: \"warehouse_name\" },\r\n        { title: \"Product\", dataKey: \"product_name\" },\r\n        { title: \"Qty\", dataKey: \"quantity\" },\r\n        { title: \"Total\", dataKey: \"total\" },\r\n      ];\r\n      pdf.autoTable(columns, self.sales);\r\n      pdf.text(\"Product Sales Report\", 40, 25);\r\n      pdf.save(\"Product_sales_report.pdf\");\r\n    },\r\n\r\n\r\n  \r\n    //---------------------------------------- Set To Strings-------------------------\\\\\r\n    setToStrings() {\r\n      // Simply replaces null values with strings=''\r\n      if (this.Filter_Client === null) {\r\n        this.Filter_Client = \"\";\r\n      } else if (this.Filter_warehouse === null) {\r\n        this.Filter_warehouse = \"\";\r\n      } \r\n    },\r\n\r\n    \r\n     //----------------------------- Submit Date Picker -------------------\\\\\r\n    Submit_filter_dateRange() {\r\n      var self = this;\r\n      self.startDate =  self.dateRange.startDate.toJSON().slice(0, 10);\r\n      self.endDate = self.dateRange.endDate.toJSON().slice(0, 10);\r\n      self.Get_Sales(1);\r\n    },\r\n\r\n\r\n    get_data_loaded() {\r\n      var self = this;\r\n      if (self.today_mode) {\r\n        let today = new Date()\r\n\r\n        self.startDate = today.getFullYear();\r\n        self.endDate = new Date().toJSON().slice(0, 10);\r\n\r\n        self.dateRange.startDate = today.getFullYear();\r\n        self.dateRange.endDate = new Date().toJSON().slice(0, 10);\r\n        \r\n      }\r\n    },\r\n\r\n\r\n    //----------------------------------------- Get all Sales ------------------------------\\\\\r\n    Get_Sales(page) {\r\n      // Start the progress bar.\r\n      NProgress.start();\r\n      NProgress.set(0.1);\r\n      this.setToStrings();\r\n      this.get_data_loaded();\r\n      axios\r\n        .get(\r\n          \"report/product_sales_report?page=\" +\r\n            page +\r\n            \"&client_id=\" +\r\n            this.Filter_Client +\r\n            \"&warehouse_id=\" +\r\n            this.Filter_warehouse +\r\n            \"&SortField=\" +\r\n            this.serverParams.sort.field +\r\n            \"&SortType=\" +\r\n            this.serverParams.sort.type +\r\n            \"&search=\" +\r\n            this.search +\r\n            \"&limit=\" +\r\n            this.limit +\r\n            \"&to=\" +\r\n            this.endDate +\r\n            \"&from=\" +\r\n            this.startDate\r\n        )\r\n        .then(response => {\r\n          this.sales = response.data.sales;\r\n          this.customers = response.data.customers;\r\n          this.warehouses = response.data.warehouses;\r\n          this.totalRows = response.data.totalRows;\r\n          this.rows[0].children = this.sales;\r\n          // Complete the animation of theprogress bar.\r\n          NProgress.done();\r\n          this.isLoading = false;\r\n          this.today_mode = false;\r\n        })\r\n        .catch(response => {\r\n          // Complete the animation of theprogress bar.\r\n          NProgress.done();\r\n          setTimeout(() => {\r\n            this.isLoading = false;\r\n            this.today_mode = false;\r\n          }, 500);\r\n        });\r\n    },\r\n\r\n  \r\n  \r\n  \r\n  },\r\n  //----------------------------- Created function-------------------\\\\\r\n  created() {\r\n    this.Get_Sales(1);\r\n  }\r\n};\r\n</script>\r\n\r\n","import { render } from \"./product_sales_report.vue?vue&type=template&id=150b03d1\"\nimport script from \"./product_sales_report.vue?vue&type=script&lang=js\"\nexport * from \"./product_sales_report.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","slot","page","$t","folder","isLoading","md","dateRange","startDate","endDate","Submit_filter_dateRange","locale","input","picker","toJSON","slice","mode","columns","totalRows","rows","onPageChange","onPerPageChange","onSortChange","onSearch","styleClass","showDropdown","variant","size","Sales_PDF","data","sales","id","title","right","shadow","label","reduce","value","placeholder","Filter_Client","options","customers","map","name","Filter_warehouse","warehouses","sm","Get_Sales","serverParams","Reset_Filter","metaInfo","components","DateRangePicker","Label","cancelLabel","weekLabel","customRangeLabel","daysOfWeek","monthNames","firstDay","sort","field","type","perPage","statut","children","search","limit","today_mode","to","from","mounted","this","$root","$on","bvEvent","computed","tdClass","thClass","sortable","headerField","sumCount","sumCount2","methods","rowObj","sum","i","length","quantity","total","updateParams","newProps","Object","assign","currentPage","currentPerPage","params","searchTerm","getValidationState","dirty","validated","valid","makeToast","msg","$bvToast","toast","solid","formatNumber","number","dec","toString","split","formated","substr","self","pdf","dataKey","autoTable","text","save","setToStrings","get_data_loaded","today","Date","getFullYear","axios","get","then","response","catch","setTimeout","created","__exports__","render"],"sourceRoot":""}