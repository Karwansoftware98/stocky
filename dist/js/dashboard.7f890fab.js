"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[945],{87128:(t,e,a)=>{a.r(e),a.d(e,{default:()=>gt});var s=a(20641),l=a(90033);const r={class:"main-content"},o={key:0,class:"loading_page spinner spinner-primary mr-3"},d={key:1},i=(0,s.Lk)("i",{class:"i-Full-Cart"},null,-1),n={class:"content"},c={class:"text-muted mt-2 mb-0"},u={class:"text-primary text-24 line-height-1 mb-2"},p=(0,s.Lk)("i",{class:"i-Add-Cart"},null,-1),b={class:"content"},h={class:"text-muted mt-2 mb-0"},m={class:"text-primary text-24 line-height-1 mb-2"},_=(0,s.Lk)("i",{class:"i-Right-4"},null,-1),g={class:"content"},f={class:"text-muted mt-2 mb-0"},y={class:"text-primary text-24 line-height-1 mb-2"},k=(0,s.Lk)("i",{class:"i-Left-4"},null,-1),v={class:"content"},C={class:"text-muted mt-2 mb-0"},x={class:"text-primary text-24 line-height-1 mb-2"},w={class:"card-title m-0"},L={class:"chart-wrapper"},F={key:0,class:"typo__p text-right"},$=(0,s.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),P=[$],S={class:"card-title m-0"},X={class:"chart-wrapper"},A={key:0,class:"typo__p text-right"},E=(0,s.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),D=[E],B={class:"col-md-8"},T={class:"card mb-30"},U={class:"card-body p-2"},Q={class:"card-title border-bottom p-3 mb-2"},M={slot:"table-row","slot-scope":"props"},W={key:0},O={class:"badge badge-outline-danger"},R={class:"col-md-4"},V={class:"card mb-30"},q={class:"card-body p-3"},z={class:"card-title border-bottom p-3 mb-2"},G={slot:"table-row","slot-scope":"props"},N={key:0},I={class:"card-title m-0"},J={class:"chart-wrapper"},Y={class:"card-title m-0"},j={class:"chart-wrapper"},H={class:"col-md-12"},K={class:"card mb-30"},Z={class:"card-body p-0"},tt={class:"card-title border-bottom p-3 mb-2"},et={slot:"table-row","slot-scope":"props"},at={key:0},st={key:0,class:"badge badge-outline-success"},lt={key:1,class:"badge badge-outline-info"},rt={key:2,class:"badge badge-outline-warning"},ot={key:1},dt={key:0,class:"badge badge-outline-success"},it={key:1,class:"badge badge-outline-primary"},nt={key:2,class:"badge badge-outline-warning"},ct={key:2};function ut(t,e,a,$,E,ut){const pt=(0,s.g2)("v-select"),bt=(0,s.g2)("b-form-group"),ht=(0,s.g2)("b-col"),mt=(0,s.g2)("b-row"),_t=(0,s.g2)("b-card"),gt=(0,s.g2)("router-link"),ft=(0,s.g2)("v-chart"),yt=(0,s.g2)("vue-good-table");return(0,s.uX)(),(0,s.CE)("div",r,[E.loading?((0,s.uX)(),(0,s.CE)("div",o)):!E.loading&&t.currentUserPermissions&&t.currentUserPermissions.includes("dashboard")?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(mt,null,{default:(0,s.k6)((()=>[(0,s.bF)(ht,{lg:"4",md:"4",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(bt,{label:t.$t("Filter_by_warehouse")},{default:(0,s.k6)((()=>[(0,s.bF)(pt,{onInput:ut.Selected_Warehouse,modelValue:E.warehouse_id,"onUpdate:modelValue":e[0]||(e[0]=t=>E.warehouse_id=t),reduce:t=>t.value,placeholder:t.$t("Choose_Warehouse"),options:E.warehouses.map((t=>({label:t.name,value:t.id})))},null,8,["onInput","modelValue","reduce","placeholder","options"])])),_:1},8,["label"])])),_:1})])),_:1}),(0,s.bF)(mt,null,{default:(0,s.k6)((()=>[(0,s.bF)(ht,{lg:"3",md:"6",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(gt,{tag:"a",class:"",to:"/app/sales/list"},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{class:"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center"},{default:(0,s.k6)((()=>[i,(0,s.Lk)("div",n,[(0,s.Lk)("p",c,(0,l.v_)(t.$t("Sales")),1),(0,s.Lk)("p",u,(0,l.v_)(t.currentUser.currency)+" "+(0,l.v_)(E.report_today.today_sales?E.report_today.today_sales:0),1)])])),_:1})])),_:1})])),_:1}),(0,s.bF)(ht,{lg:"3",md:"6",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(gt,{tag:"a",class:"",to:"/app/purchases/list"},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{class:"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center"},{default:(0,s.k6)((()=>[p,(0,s.Lk)("div",b,[(0,s.Lk)("p",h,(0,l.v_)(t.$t("Purchases")),1),(0,s.Lk)("p",m,(0,l.v_)(t.currentUser.currency)+" "+(0,l.v_)(E.report_today.today_purchases?E.report_today.today_purchases:0),1)])])),_:1})])),_:1})])),_:1}),(0,s.bF)(ht,{lg:"3",md:"6",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(gt,{tag:"a",class:"",to:"/app/sale_return/list"},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{class:"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center"},{default:(0,s.k6)((()=>[_,(0,s.Lk)("div",g,[(0,s.Lk)("p",f,(0,l.v_)(t.$t("SalesReturn")),1),(0,s.Lk)("p",y,(0,l.v_)(t.currentUser.currency)+" "+(0,l.v_)(E.report_today.return_sales?E.report_today.return_sales:0),1)])])),_:1})])),_:1})])),_:1}),(0,s.bF)(ht,{lg:"3",md:"6",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(gt,{tag:"a",class:"",to:"/app/purchase_return/list"},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{class:"card-icon-bg card-icon-bg-primary o-hidden mb-30 text-center"},{default:(0,s.k6)((()=>[k,(0,s.Lk)("div",v,[(0,s.Lk)("p",C,(0,l.v_)(t.$t("PurchasesReturn")),1),(0,s.Lk)("p",x,(0,l.v_)(t.currentUser.currency)+" "+(0,l.v_)(E.report_today.return_purchases?E.report_today.return_purchases:0),1)])])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.bF)(mt,null,{default:(0,s.k6)((()=>[(0,s.bF)(ht,{lg:"8",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{class:"mb-30"},{default:(0,s.k6)((()=>[(0,s.Lk)("h4",w,(0,l.v_)(t.$t("This_Week_Sales_Purchases")),1),(0,s.Lk)("div",L,[e[1]||((0,s.Vq)(-1),e[1]=E.loading?((0,s.uX)(),(0,s.CE)("div",F,P)):(0,s.Q3)("",!0),(0,s.Vq)(1),e[1]),E.loading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(ft,{key:1,options:E.echartSales,autoresize:!0},null,8,["options"]))])])),_:1})])),_:1}),(0,s.bF)(ht,{col:"",lg:"4",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{class:"mb-30"},{default:(0,s.k6)((()=>[(0,s.Lk)("h4",S,(0,l.v_)(t.$t("Top_Selling_Products"))+" ("+(0,l.v_)((new Date).getFullYear())+")",1),(0,s.Lk)("div",X,[e[2]||((0,s.Vq)(-1),e[2]=E.loading?((0,s.uX)(),(0,s.CE)("div",A,D)):(0,s.Q3)("",!0),(0,s.Vq)(1),e[2]),E.loading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(ft,{key:1,options:E.echartProduct,autoresize:!0},null,8,["options"]))])])),_:1})])),_:1})])),_:1}),(0,s.bF)(mt,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",B,[(0,s.Lk)("div",T,[(0,s.Lk)("div",U,[(0,s.Lk)("h5",Q,(0,l.v_)(t.$t("StockAlert")),1),(0,s.bF)(yt,{columns:ut.columns_stock,styleClass:"order-table vgt-table mb-3","row-style-class":"text-left",rows:E.stock_alerts},{default:(0,s.k6)((()=>[(0,s.Lk)("template",M,["stock_alert"==t.props.column.field?((0,s.uX)(),(0,s.CE)("div",W,[(0,s.Lk)("span",O,(0,l.v_)(t.props.row.stock_alert),1)])):(0,s.Q3)("",!0)])])),_:1},8,["columns","rows"])])])]),(0,s.Lk)("div",R,[(0,s.Lk)("div",V,[(0,s.Lk)("div",q,[(0,s.Lk)("h5",z,(0,l.v_)(t.$t("Top_Selling_Products"))+" ("+(0,l.v_)(E.CurrentMonth)+")",1),(0,s.bF)(yt,{columns:ut.columns_products,styleClass:"order-table vgt-table","row-style-class":"text-left",rows:E.products},{default:(0,s.k6)((()=>[(0,s.Lk)("template",G,["total"==t.props.column.field?((0,s.uX)(),(0,s.CE)("div",N,[(0,s.Lk)("span",null,(0,l.v_)(t.currentUser.currency)+" "+(0,l.v_)(ut.formatNumber(t.props.row.total,2)),1)])):(0,s.Q3)("",!0)])])),_:1},8,["columns","rows"])])])])])),_:1}),(0,s.bF)(mt,null,{default:(0,s.k6)((()=>[(0,s.bF)(ht,{lg:"8",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{class:"mb-30"},{default:(0,s.k6)((()=>[(0,s.Lk)("h4",I,(0,l.v_)(t.$t("Payment_Sent_Received")),1),(0,s.Lk)("div",J,[(0,s.bF)(ft,{options:E.echartPayment,autoresize:!0},null,8,["options"])])])),_:1})])),_:1}),(0,s.bF)(ht,{col:"",lg:"4",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(_t,{class:"mb-30"},{default:(0,s.k6)((()=>[(0,s.Lk)("h4",Y,(0,l.v_)(t.$t("TopCustomers"))+" ("+(0,l.v_)(E.CurrentMonth)+")",1),(0,s.Lk)("div",j,[(0,s.bF)(ft,{options:E.echartCustomer,autoresize:!0},null,8,["options"])])])),_:1})])),_:1})])),_:1}),(0,s.bF)(mt,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",H,[(0,s.Lk)("div",K,[(0,s.Lk)("div",Z,[(0,s.Lk)("h5",tt,(0,l.v_)(t.$t("Recent_Sales")),1),E.loading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(yt,{key:0,columns:ut.columns_sales,styleClass:"order-table vgt-table","row-style-class":"text-left",rows:E.sales},{default:(0,s.k6)((()=>[(0,s.Lk)("template",et,["statut"==t.props.column.field?((0,s.uX)(),(0,s.CE)("div",at,["completed"==t.props.row.statut?((0,s.uX)(),(0,s.CE)("span",st,(0,l.v_)(t.$t("complete")),1)):"pending"==t.props.row.statut?((0,s.uX)(),(0,s.CE)("span",lt,(0,l.v_)(t.$t("Pending")),1)):((0,s.uX)(),(0,s.CE)("span",rt,(0,l.v_)(t.$t("Ordered")),1))])):"payment_status"==t.props.column.field?((0,s.uX)(),(0,s.CE)("div",ot,["paid"==t.props.row.payment_status?((0,s.uX)(),(0,s.CE)("span",dt,(0,l.v_)(t.$t("Paid")),1)):"partial"==t.props.row.payment_status?((0,s.uX)(),(0,s.CE)("span",it,(0,l.v_)(t.$t("partial")),1)):((0,s.uX)(),(0,s.CE)("span",nt,(0,l.v_)(t.$t("Unpaid")),1))])):(0,s.Q3)("",!0)])])),_:1},8,["columns","rows"]))])])])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",ct,[(0,s.Lk)("h4",null,(0,l.v_)(t.$t("Welcome_to_your_Dashboard")),1)]))])}var pt=a(95353),bt=a(99807);a(26804),a(53571),a(1906),a(67770),a(59608);const ht={components:{"v-chart":bt.A},metaInfo:{title:"Dashboard"},data(){return{sales:[],warehouses:[],warehouse_id:"",stock_alerts:[],report_today:{revenue:0,today_purchases:0,today_sales:0,return_sales:0,return_purchases:0},products:[],CurrentMonth:"",loading:!0,echartSales:{},echartProduct:{},echartCustomer:{},echartPayment:{}}},computed:{...(0,pt.L8)(["currentUserPermissions","currentUser"]),columns_sales(){return[{label:this.$t("Reference"),field:"Ref",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("Customer"),field:"client_name",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("warehouse"),field:"warehouse_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Status"),field:"statut",html:!0,tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("Total"),field:"GrandTotal",type:"decimal",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("Paid"),field:"paid_amount",type:"decimal",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("Due"),field:"due",type:"decimal",tdClass:"gull-border-none text-left",thClass:"text-left",sortable:!1},{label:this.$t("PaymentStatus"),field:"payment_status",html:!0,sortable:!1,tdClass:"text-left gull-border-none",thClass:"text-left"}]},columns_stock(){return[{label:this.$t("ProductCode"),field:"code",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("ProductName"),field:"name",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("warehouse"),field:"warehouse",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Quantity"),field:"quantity",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("AlertQuantity"),field:"stock_alert",tdClass:"text-left",thClass:"text-left",sortable:!1}]},columns_products(){return[{label:this.$t("ProductName"),field:"name",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("TotalSales"),field:"total_sales",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("TotalAmount"),field:"total",tdClass:"text-left",thClass:"text-left",sortable:!1}]}},methods:{Selected_Warehouse(t){null===t&&(this.warehouse_id=""),this.all_dashboard_data()},all_dashboard_data(){axios.get("/dashboard_data?warehouse_id="+this.warehouse_id).then((t=>{const e=t.data;this.report_today=t.data.report_dashboard.original.report,this.warehouses=t.data.warehouses,this.stock_alerts=t.data.report_dashboard.original.stock_alert,this.products=t.data.report_dashboard.original.products,this.sales=t.data.report_dashboard.original.last_sales;var a="#c2c6dc";this.echartCustomer={color:["#6D28D9","#8B5CF6","#A78BFA","#C4B5FD","#7C3AED"],tooltip:{show:!0,backgroundColor:"rgba(0, 0, 0, .8)"},formatter:function(t){return`${t.name}: (${t.data.value} sales) (${t.percent}%)`},series:[{name:"Top Customers",type:"pie",radius:"50%",center:"50%",data:e.customers.original,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},this.echartPayment={tooltip:{trigger:"axis"},legend:{data:["Payment sent","Payment received"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:e.payments.original.days},yAxis:{type:"value"},series:[{name:"Payment sent",type:"line",data:e.payments.original.payment_sent},{name:"Payment received",type:"line",data:e.payments.original.payment_received}]},this.echartProduct={color:["#6D28D9","#8B5CF6","#A78BFA","#C4B5FD","#7C3AED"],tooltip:{show:!0,backgroundColor:"rgba(0, 0, 0, .8)"},formatter:function(t){return`${t.name}: (${t.value}sales)`},series:[{name:"Top Selling Products",type:"pie",radius:"50%",center:"50%",data:e.product_report.original,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},this.echartSales={legend:{borderRadius:0,orient:"horizontal",x:"right",data:["Sales","Purchases"]},grid:{left:"8px",right:"8px",bottom:"0",containLabel:!0},tooltip:{show:!0,backgroundColor:"rgba(0, 0, 0, .8)"},xAxis:[{type:"category",data:e.sales.original.days,axisTick:{alignWithLabel:!0},splitLine:{show:!1},axisLabel:{color:a,interval:0,rotate:30},axisLine:{show:!0,color:a,lineStyle:{color:a}}}],yAxis:[{type:"value",axisLabel:{color:a},axisLine:{show:!1,color:a,lineStyle:{color:a}},min:0,splitLine:{show:!0,interval:"auto"}}],series:[{name:"Sales",data:e.sales.original.data,label:{show:!1,color:"#8B5CF6"},type:"bar",color:"#A78BFA",smooth:!0,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowOffsetY:-2,shadowColor:"rgba(0, 0, 0, 0.3)"}}},{name:"Purchases",data:e.purchases.original.data,label:{show:!1,color:"#0168c1"},type:"bar",barGap:0,color:"#DDD6FE",smooth:!0,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowOffsetY:-2,shadowColor:"rgba(0, 0, 0, 0.3)"}}}]},this.loading=!1})).catch((t=>{}))},GetMonth(){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date;this.CurrentMonth=t[e.getMonth()]},formatNumber(t,e){const a=("string"===typeof t?t:t.toString()).split(".");if(e<=0)return a[0];let s=a[1]||"";if(s.length>e)return`${a[0]}.${s.substr(0,e)}`;while(s.length<e)s+="0";return`${a[0]}.${s}`}},async mounted(){await this.all_dashboard_data(),this.GetMonth()}};var mt=a(66262);const _t=(0,mt.A)(ht,[["render",ut]]),gt=_t}}]);
//# sourceMappingURL=dashboard.7f890fab.js.map