{"version":3,"file":"js/product_purchases_report.00515716.js","mappings":"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","sources":["webpack:///./src/views/app/pages/reports/product_purchases_report.vue","webpack:///./src/views/app/pages/reports/product_purchases_report.vue?d648"],"sourcesContent":["<template>\r\n  <div class=\"main-content\">\r\n    <breadcumb :page=\"$t('Product_purchases_report')\" :folder=\"$t('Reports')\"/>\r\n    <div v-if=\"isLoading\" class=\"loading_page spinner spinner-primary mr-3\"></div>\r\n\r\n     <b-col md=\"12\" class=\"text-center\" v-if=\"!isLoading\">\r\n        <date-range-picker \r\n          v-model=\"dateRange\" \r\n          :startDate=\"startDate\" \r\n          :endDate=\"endDate\" \r\n           @update=\"Submit_filter_dateRange\"\r\n          :locale-data=\"locale\" > \r\n\r\n          <template v-slot:input=\"picker\" style=\"min-width: 350px;\">\r\n              {{ picker.startDate.toJSON().slice(0, 10)}} - {{ picker.endDate.toJSON().slice(0, 10)}}\r\n          </template>        \r\n        </date-range-picker>\r\n      </b-col>\r\n\r\n\r\n    <div v-if=\"!isLoading\">\r\n      <vue-good-table\r\n        mode=\"remote\"\r\n        :columns=\"columns\"\r\n        :totalRows=\"totalRows\"\r\n        :rows=\"rows\"\r\n        @on-page-change=\"onPageChange\"\r\n        @on-per-page-change=\"onPerPageChange\"\r\n        @on-sort-change=\"onSortChange\"\r\n        @on-search=\"onSearch\"\r\n        :search-options=\"{\r\n        placeholder: $t('Search_this_table'),\r\n        enabled: true,\r\n      }\"\r\n       :group-options=\"{\r\n          enabled: true,\r\n          headerPosition: 'bottom',\r\n        }\"\r\n        :pagination-options=\"{\r\n        enabled: true,\r\n        mode: 'records',\r\n        nextLabel: 'next',\r\n        prevLabel: 'prev',\r\n      }\"\r\n        :styleClass=\"showDropdown?'tableOne table-hover vgt-table full-height':'tableOne table-hover vgt-table non-height'\"\r\n      >\r\n       \r\n        <div slot=\"table-actions\" class=\"mt-2 mb-3\">\r\n          <b-button variant=\"outline-info ripple m-1\" size=\"sm\" v-b-toggle.sidebar-right>\r\n            <i class=\"i-Filter-2\"></i>\r\n            {{ $t(\"Filter\") }}\r\n          </b-button>\r\n          <b-button @click=\"Purchases_PDF()\" size=\"sm\" variant=\"outline-success ripple m-1\">\r\n            <i class=\"i-File-Copy\"></i> PDF\r\n          </b-button>\r\n          <vue-excel-xlsx\r\n              class=\"btn btn-sm btn-outline-danger ripple m-1\"\r\n              :data=\"purchases\"\r\n              :columns=\"columns\"\r\n              :file-name=\"'purchases'\"\r\n              :file-type=\"'xlsx'\"\r\n              :sheet-name=\"'purchases'\"\r\n              >\r\n              <i class=\"i-File-Excel\"></i> EXCEL\r\n          </vue-excel-xlsx>\r\n         \r\n        </div>\r\n\r\n      </vue-good-table>\r\n    </div>\r\n\r\n    <!-- Sidebar Filter -->\r\n    <b-sidebar id=\"sidebar-right\" :title=\"$t('Filter')\" bg-variant=\"white\" right shadow>\r\n      <div class=\"px-3 py-2\">\r\n        <b-row>\r\n         \r\n          <!-- Supplier  -->\r\n          <b-col md=\"12\">\r\n            <b-form-group :label=\"$t('Supplier')\">\r\n              <v-select\r\n                :reduce=\"label => label.value\"\r\n                :placeholder=\"$t('Choose_Supplier')\"\r\n                v-model=\"Filter_Supplier\"\r\n                :options=\"suppliers.map(suppliers => ({label: suppliers.name, value: suppliers.id}))\"\r\n              />\r\n            </b-form-group>\r\n          </b-col>\r\n\r\n           <!-- warehouse -->\r\n          <b-col md=\"12\">\r\n            <b-form-group :label=\"$t('warehouse')\">\r\n              <v-select\r\n                v-model=\"Filter_warehouse\"\r\n                :reduce=\"label => label.value\"\r\n                :placeholder=\"$t('Choose_Warehouse')\"\r\n                :options=\"warehouses.map(warehouses => ({label: warehouses.name, value: warehouses.id}))\"\r\n              />\r\n            </b-form-group>\r\n          </b-col>\r\n\r\n\r\n          <b-col md=\"6\" sm=\"12\">\r\n            <b-button\r\n              @click=\"Get_Purchases(serverParams.page)\"\r\n              variant=\"primary ripple m-1\"\r\n              size=\"sm\"\r\n              block\r\n            >\r\n              <i class=\"i-Filter-2\"></i>\r\n              {{ $t(\"Filter\") }}\r\n            </b-button>\r\n          </b-col>\r\n          <b-col md=\"6\" sm=\"12\">\r\n            <b-button @click=\"Reset_Filter()\" variant=\"danger ripple m-1\" size=\"sm\" block>\r\n              <i class=\"i-Power-2\"></i>\r\n              {{ $t(\"Reset\") }}\r\n            </b-button>\r\n          </b-col>\r\n        </b-row>\r\n      </div>\r\n    </b-sidebar>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nimport NProgress from \"nprogress\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\nimport DateRangePicker from 'vue2-daterange-picker'\r\nimport 'vue2-daterange-picker/dist/vue2-daterange-picker.css'\r\nimport moment from 'moment'\r\n\r\nexport default {\r\n\r\n  metaInfo: {\r\n    title: \"Product Purchases report\"\r\n  },\r\n  components: { DateRangePicker },\r\n  data() {\r\n    return {\r\n      startDate: \"\", \r\n      endDate: \"\", \r\n      dateRange: { \r\n       startDate: \"\", \r\n       endDate: \"\" \r\n      }, \r\n      locale:{ \r\n          //separator between the two ranges apply\r\n          Label: \"Apply\", \r\n          cancelLabel: \"Cancel\", \r\n          weekLabel: \"W\", \r\n          customRangeLabel: \"Custom Range\", \r\n          daysOfWeek: moment.weekdaysMin(), \r\n          //array of days - see moment documenations for details \r\n          monthNames: moment.monthsShort(), //array of month names - see moment documenations for details \r\n          firstDay: 1 //ISO first day of week - see moment documenations for details\r\n        },\r\n      isLoading: true,\r\n      serverParams: {\r\n        sort: {\r\n          field: \"id\",\r\n          type: \"desc\"\r\n        },\r\n        page: 1,\r\n        perPage: 10\r\n      },\r\n       rows: [{\r\n          statut: 'Total',\r\n         \r\n          children: [\r\n             \r\n          ],\r\n      },],\r\n      search: \"\",\r\n      totalRows: \"\",\r\n      showDropdown: false,\r\n      Filter_Supplier: \"\",\r\n      Filter_warehouse: \"\",\r\n      suppliers: [],\r\n      warehouses: [],\r\n      purchases: [],\r\n      limit: \"10\",\r\n      today_mode: true,\r\n      to: \"\",\r\n      from: \"\",\r\n    };\r\n  },\r\n   mounted() {\r\n    this.$root.$on(\"bv::dropdown::show\", bvEvent => {\r\n      this.showDropdown = true;\r\n    });\r\n    this.$root.$on(\"bv::dropdown::hide\", bvEvent => {\r\n      this.showDropdown = false;\r\n    });\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"currentUserPermissions\", \"currentUser\"]),\r\n    columns() {\r\n      return [\r\n        {\r\n          label: this.$t(\"date\"),\r\n          field: \"date\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\"\r\n        },\r\n        {\r\n          label: this.$t(\"Reference\"),\r\n          field: \"Ref\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\"\r\n        },\r\n        {\r\n          label: this.$t(\"Supplier\"),\r\n          field: \"provider_name\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\"\r\n        },\r\n        {\r\n          label: this.$t(\"warehouse\"),\r\n          field: \"warehouse_name\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\"\r\n        },\r\n      \r\n        {\r\n          label: this.$t(\"Name_product\"),\r\n          field: \"product_name\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n        {\r\n          label: this.$t(\"Qty_purchased\"),\r\n          field: \"quantity\",\r\n          type: \"decimal\",\r\n          headerField: this.sumCount,\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n        {\r\n          label: this.$t(\"Total\"),\r\n          field: \"total\",\r\n          type: \"decimal\",\r\n          headerField: this.sumCount2,\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n      ];\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    sumCount(rowObj) {\r\n     \r\n    \tlet sum = 0;\r\n      for (let i = 0; i < rowObj.children.length; i++) {\r\n        sum += rowObj.children[i].quantity;\r\n      }\r\n      return sum;\r\n    },\r\n\r\n    \r\n    sumCount2(rowObj) {\r\n     \r\n    \tlet sum = 0;\r\n      for (let i = 0; i < rowObj.children.length; i++) {\r\n        sum += rowObj.children[i].total;\r\n      }\r\n      return sum;\r\n    },\r\n\r\n\r\n\r\n    //---- update Params Table\r\n    updateParams(newProps) {\r\n      this.serverParams = Object.assign({}, this.serverParams, newProps);\r\n    },\r\n\r\n    //---- Event Page Change\r\n    onPageChange({ currentPage }) {\r\n      if (this.serverParams.page !== currentPage) {\r\n        this.updateParams({ page: currentPage });\r\n        this.Get_Purchases(currentPage);\r\n      }\r\n    },\r\n\r\n    //---- Event Per Page Change\r\n    onPerPageChange({ currentPerPage }) {\r\n      if (this.limit !== currentPerPage) {\r\n        this.limit = currentPerPage;\r\n        this.updateParams({ page: 1, perPage: currentPerPage });\r\n        this.Get_Purchases(1);\r\n      }\r\n    },\r\n\r\n    //---- Event Sort change\r\n    onSortChange(params) {\r\n      let field = \"\";\r\n      if (params[0].field == \"provider_name\") {\r\n        field = \"provider_id\";\r\n      } else if (params[0].field == \"warehouse_name\") {\r\n        field = \"warehouse_id\";\r\n      } else {\r\n        field = params[0].field;\r\n      }\r\n      this.updateParams({\r\n        sort: {\r\n          type: params[0].type,\r\n          field: field\r\n        }\r\n      });\r\n      this.Get_Purchases(this.serverParams.page);\r\n    },\r\n\r\n    \r\n    onSearch(value) {\r\n      this.search = value.searchTerm;\r\n      this.Get_Purchases(this.serverParams.page);\r\n    },\r\n\r\n    //---Validate State Fields\r\n    getValidationState({ dirty, validated, valid = null }) {\r\n      return dirty || validated ? valid : null;\r\n    },\r\n    //------ Toast\r\n    makeToast(variant, msg, title) {\r\n      this.$root.$bvToast.toast(msg, {\r\n        title: title,\r\n        variant: variant,\r\n        solid: true\r\n      });\r\n    },\r\n\r\n\r\n    //------ Reset Filter\r\n    Reset_Filter() {\r\n      this.search = \"\";\r\n      this.Filter_Supplier = \"\";\r\n      this.Filter_warehouse = \"\";\r\n      this.Get_Purchases(this.serverParams.page);\r\n    },\r\n\r\n\r\n    //------------------------------Formetted Numbers -------------------------\\\\\r\n    formatNumber(number, dec) {\r\n      const value = (typeof number === \"string\"\r\n        ? number\r\n        : number.toString()\r\n      ).split(\".\");\r\n      if (dec <= 0) return value[0];\r\n      let formated = value[1] || \"\";\r\n      if (formated.length > dec)\r\n        return `${value[0]}.${formated.substr(0, dec)}`;\r\n      while (formated.length < dec) formated += \"0\";\r\n      return `${value[0]}.${formated}`;\r\n    },\r\n\r\n\r\n    //----------------------------------- purchases PDF ------------------------------\\\\\r\n    Purchases_PDF() {\r\n      var self = this;\r\n      let pdf = new jsPDF(\"p\", \"pt\");\r\n      let columns = [\r\n        { title: \"date\", dataKey: \"date\" },\r\n        { title: \"Ref\", dataKey: \"Ref\" },\r\n        { title: \"Provider\", dataKey: \"provider_name\" },\r\n        { title: \"Warehouse\", dataKey: \"warehouse_name\" },\r\n        { title: \"Product\", dataKey: \"product_name\" },\r\n        { title: \"Qty\", dataKey: \"quantity\" },\r\n        { title: \"Total\", dataKey: \"total\" },\r\n      ];\r\n      pdf.autoTable(columns, self.purchases);\r\n      pdf.text(\"Product Purchases report\", 40, 25);\r\n      pdf.save(\"Product_purchases_report.pdf\");\r\n    },\r\n\r\n\r\n  \r\n    //---------------------------------------- Set To Strings-------------------------\\\\\r\n    setToStrings() {\r\n      // Simply replaces null values with strings=''\r\n      if (this.Filter_Supplier === null) {\r\n        this.Filter_Supplier = \"\";\r\n      } else if (this.Filter_warehouse === null) {\r\n        this.Filter_warehouse = \"\";\r\n      } \r\n    },\r\n\r\n    \r\n     //----------------------------- Submit Date Picker -------------------\\\\\r\n    Submit_filter_dateRange() {\r\n      var self = this;\r\n      self.startDate =  self.dateRange.startDate.toJSON().slice(0, 10);\r\n      self.endDate = self.dateRange.endDate.toJSON().slice(0, 10);\r\n      self.Get_Purchases(1);\r\n    },\r\n\r\n\r\n    get_data_loaded() {\r\n      var self = this;\r\n      if (self.today_mode) {\r\n        let today = new Date()\r\n\r\n        self.startDate = today.getFullYear();\r\n        self.endDate = new Date().toJSON().slice(0, 10);\r\n\r\n        self.dateRange.startDate = today.getFullYear();\r\n        self.dateRange.endDate = new Date().toJSON().slice(0, 10);\r\n        \r\n      }\r\n    },\r\n\r\n\r\n    //----------------------------------------- Get all purchases ------------------------------\\\\\r\n    Get_Purchases(page) {\r\n      // Start the progress bar.\r\n      NProgress.start();\r\n      NProgress.set(0.1);\r\n      this.setToStrings();\r\n      this.get_data_loaded();\r\n      axios\r\n        .get(\r\n          \"report/product_purchases_report?page=\" +\r\n            page +\r\n            \"&provider_id=\" +\r\n            this.Filter_Supplier +\r\n            \"&warehouse_id=\" +\r\n            this.Filter_warehouse +\r\n            \"&SortField=\" +\r\n            this.serverParams.sort.field +\r\n            \"&SortType=\" +\r\n            this.serverParams.sort.type +\r\n            \"&search=\" +\r\n            this.search +\r\n            \"&limit=\" +\r\n            this.limit +\r\n            \"&to=\" +\r\n            this.endDate +\r\n            \"&from=\" +\r\n            this.startDate\r\n        )\r\n        .then(response => {\r\n          this.purchases = response.data.purchases;\r\n          this.suppliers = response.data.suppliers;\r\n          this.warehouses = response.data.warehouses;\r\n          this.totalRows = response.data.totalRows;\r\n           this.rows[0].children = this.purchases;\r\n          // Complete the animation of theprogress bar.\r\n          NProgress.done();\r\n          this.isLoading = false;\r\n          this.today_mode = false;\r\n        })\r\n        .catch(response => {\r\n          // Complete the animation of theprogress bar.\r\n          NProgress.done();\r\n          setTimeout(() => {\r\n            this.isLoading = false;\r\n            this.today_mode = false;\r\n          }, 500);\r\n        });\r\n    },\r\n\r\n  \r\n  \r\n  \r\n  },\r\n  //----------------------------- Created function-------------------\\\\\r\n  created() {\r\n    this.Get_Purchases(1);\r\n  }\r\n};\r\n</script>\r\n\r\n","import { render } from \"./product_purchases_report.vue?vue&type=template&id=4cd7195e\"\nimport script from \"./product_purchases_report.vue?vue&type=script&lang=js\"\nexport * from \"./product_purchases_report.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","slot","page","$t","folder","isLoading","md","dateRange","startDate","endDate","Submit_filter_dateRange","locale","input","picker","toJSON","slice","mode","columns","totalRows","rows","onPageChange","onPerPageChange","onSortChange","onSearch","styleClass","showDropdown","variant","size","Purchases_PDF","data","purchases","id","title","right","shadow","label","reduce","value","placeholder","Filter_Supplier","options","suppliers","map","name","Filter_warehouse","warehouses","sm","Get_Purchases","serverParams","block","Reset_Filter","metaInfo","components","DateRangePicker","Label","cancelLabel","weekLabel","customRangeLabel","daysOfWeek","monthNames","firstDay","sort","field","type","perPage","statut","children","search","limit","today_mode","to","from","mounted","this","$root","$on","bvEvent","computed","tdClass","thClass","sortable","headerField","sumCount","sumCount2","methods","rowObj","sum","i","length","quantity","total","updateParams","newProps","Object","assign","currentPage","currentPerPage","params","searchTerm","getValidationState","dirty","validated","valid","makeToast","msg","$bvToast","toast","solid","formatNumber","number","dec","toString","split","formated","substr","self","pdf","dataKey","autoTable","text","save","setToStrings","get_data_loaded","today","Date","getFullYear","axios","get","then","response","catch","setTimeout","created","__exports__","render"],"sourceRoot":""}