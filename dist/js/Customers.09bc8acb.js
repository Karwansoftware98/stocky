"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[90],{23104:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ge});var a=l(20641),s=l(90033),n=l(53751);const i={class:"main-content"},r={key:0,class:"loading_page spinner spinner-primary mr-3"},o={key:1},d={slot:"selected-row-actions"},u={slot:"table-actions",class:"mt-2 mb-3"},m=(0,a.Lk)("i",{class:"i-Filter-2"},null,-1),_=(0,a.Lk)("i",{class:"i-File-Copy"},null,-1),c=(0,a.Lk)("i",{class:"i-File-Excel"},null,-1),h=(0,a.Lk)("i",{class:"i-Download"},null,-1),p=(0,a.Lk)("i",{class:"i-Add"},null,-1),b={slot:"table-row","slot-scope":"props"},k={key:0},y=(0,a.Lk)("span",{class:"_dot _r_block-dot bg-dark"},null,-1),v=(0,a.Lk)("span",{class:"_dot _r_block-dot bg-dark"},null,-1),g=(0,a.Lk)("span",{class:"_dot _r_block-dot bg-dark"},null,-1),f=(0,a.Lk)("i",{class:"nav-icon i-Dollar font-weight-bold mr-2"},null,-1),$=(0,a.Lk)("i",{class:"nav-icon i-Dollar font-weight-bold mr-2"},null,-1),C=(0,a.Lk)("i",{class:"nav-icon i-Eye font-weight-bold mr-2"},null,-1),F=(0,a.Lk)("i",{class:"nav-icon i-Credit-Card2 font-weight-bold mr-2"},null,-1),L=(0,a.Lk)("i",{class:"nav-icon i-Edit font-weight-bold mr-2"},null,-1),P=(0,a.Lk)("i",{class:"nav-icon i-Close-Window font-weight-bold mr-2"},null,-1),w={class:"px-3 py-2"},x=(0,a.Lk)("i",{class:"i-Filter-2"},null,-1),S=(0,a.Lk)("i",{class:"i-Power-2"},null,-1),D={class:"badge badge-danger"},T=(0,a.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1),V={key:0,class:"typo__p"},W=(0,a.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),E=[W],U={class:"badge badge-danger"},N=(0,a.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1),A={key:0,class:"typo__p"},R=(0,a.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),I=[R],M={id:"invoice-POS"},B={style:{"max-width":"400px",margin:"0px auto"}},z={class:"info"},X={class:"text-center"},O=(0,a.Lk)("br",null,null,-1),q=(0,a.Lk)("br",null,null,-1),G=(0,a.Lk)("br",null,null,-1),Q=(0,a.Lk)("br",null,null,-1),K={class:"change mt-3",style:{"font-size":"10px"}},Y={style:{background:"#eee"}},H={style:{"text-align":"left"},colspan:"1"},j={style:{"text-align":"center"},colspan:"2"},J={style:{"text-align":"right"},colspan:"1"},Z={style:{"text-align":"left"},colspan:"1"},ee={style:{"text-align":"center"},colspan:"2"},te={style:{"text-align":"right"},colspan:"1"},le=(0,a.Lk)("i",{class:"i-Billing"},null,-1),ae={id:"invoice-POS-return"},se={style:{"max-width":"400px",margin:"0px auto"}},ne={class:"info"},ie={class:"text-center"},re=(0,a.Lk)("br",null,null,-1),oe=(0,a.Lk)("br",null,null,-1),de=(0,a.Lk)("br",null,null,-1),ue=(0,a.Lk)("br",null,null,-1),me={class:"change mt-3",style:{"font-size":"10px"}},_e={style:{background:"#eee"}},ce={style:{"text-align":"left"},colspan:"1"},he={style:{"text-align":"center"},colspan:"2"},pe={style:{"text-align":"right"},colspan:"1"},be={style:{"text-align":"left"},colspan:"1"},ke={style:{"text-align":"center"},colspan:"2"},ye={style:{"text-align":"right"},colspan:"1"},ve=(0,a.Lk)("i",{class:"i-Billing"},null,-1),ge=["placeholder"],fe={key:0,class:"typo__p"},$e=(0,a.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),Ce=[$e],Fe=(0,a.Lk)("div",{class:"mt-3"},[(0,a.Lk)("span",null,"Saved Credit Card Info For This Client ")],-1),Le={class:"table table-hover mt-3"},Pe=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Last 4 digits"),(0,a.Lk)("th",null,"Type"),(0,a.Lk)("th",null,"Exp"),(0,a.Lk)("th",null,"Action")])],-1),we=(0,a.Lk)("span",null,[(0,a.Lk)("i",{class:"i-Drag-Up"}),(0,a.eW)(" Set as default ")],-1),xe={key:1},Se=(0,a.Lk)("i",{class:"i-Yes",style:{"font-size":"20px"}},null,-1),De=(0,a.Lk)("div",{class:"mt-3"},[(0,a.Lk)("span",null,"Customer don't have credit card saved ")],-1),Te={class:"table table-striped table-md"},Ve={key:0,class:"typo__p"},We=(0,a.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),Ee=[We],Ue={class:"table table-bordered table-sm mt-4"},Ne={class:"badge badge-outline-success"},Ae=(0,a.Lk)("th",null,[(0,a.Lk)("span",{class:"badge badge-outline-success"})],-1);function Re(e,t,l,W,R,$e){const We=(0,a.g2)("breadcumb"),Re=(0,a.g2)("b-button"),Ie=(0,a.g2)("vue-excel-xlsx"),Me=(0,a.g2)("b-dropdown-item"),Be=(0,a.g2)("b-dropdown"),ze=(0,a.g2)("vue-good-table"),Xe=(0,a.g2)("b-form-input"),Oe=(0,a.g2)("b-form-group"),qe=(0,a.g2)("b-col"),Ge=(0,a.g2)("b-row"),Qe=(0,a.g2)("b-sidebar"),Ke=(0,a.g2)("b-form-invalid-feedback"),Ye=(0,a.g2)("validation-provider"),He=(0,a.g2)("v-select"),je=(0,a.g2)("b-form-textarea"),Je=(0,a.g2)("b-form"),Ze=(0,a.g2)("b-modal"),et=(0,a.g2)("validation-observer"),tt=(0,a.gN)("b-toggle");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(We,{page:e.$t("CustomerManagement"),folder:e.$t("Customers")},null,8,["page","folder"]),R.isLoading?((0,a.uX)(),(0,a.CE)("div",r)):((0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(ze,{mode:"remote",columns:$e.columns,totalRows:R.totalRows,rows:R.clients,onOnPageChange:$e.onPageChange,onOnPerPageChange:$e.onPerPageChange,onOnSortChange:$e.onSortChange,onOnSearch:$e.onSearch,"search-options":{enabled:!0,placeholder:e.$t("Search_this_table")},"select-options":{enabled:!0,clearSelectionText:""},onOnSelectedRowsChange:$e.selectionChanged,"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:R.showDropdown?"tableOne table-hover vgt-table full-height":"tableOne table-hover vgt-table non-height"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t[0]||(t[0]=e=>$e.delete_by_selected())},(0,s.v_)(e.$t("Del")),1)]),(0,a.Lk)("div",u,[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(Re,{variant:"outline-info m-1",size:"sm"},{default:(0,a.k6)((()=>[m,(0,a.eW)(" "+(0,s.v_)(e.$t("Filter")),1)])),_:1})),[[tt,void 0,void 0,{"sidebar-right":!0}]]),(0,a.bF)(Re,{onClick:t[1]||(t[1]=e=>$e.clients_PDF()),size:"sm",variant:"outline-success m-1"},{default:(0,a.k6)((()=>[_,(0,a.eW)(" PDF ")])),_:1}),(0,a.bF)(Ie,{class:"btn btn-sm btn-outline-danger ripple m-1",data:R.clients,columns:$e.columns,"file-name":"clients","file-type":"xlsx","sheet-name":"clients"},{default:(0,a.k6)((()=>[c,(0,a.eW)(" EXCEL ")])),_:1},8,["data","columns"]),e.currentUserPermissions&&e.currentUserPermissions.includes("customers_import")?((0,a.uX)(),(0,a.Wv)(Re,{key:0,onClick:t[2]||(t[2]=e=>$e.Show_import_clients()),size:"sm",variant:"info m-1"},{default:(0,a.k6)((()=>[h,(0,a.eW)(" "+(0,s.v_)(e.$t("Import_Customers")),1)])),_:1})):(0,a.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("Customers_add")?((0,a.uX)(),(0,a.Wv)(Re,{key:1,onClick:t[3]||(t[3]=e=>$e.New_Client()),size:"sm",variant:"btn btn-primary btn-icon m-1"},{default:(0,a.k6)((()=>[p,(0,a.eW)(" "+(0,s.v_)(e.$t("Add")),1)])),_:1})):(0,a.Q3)("",!0)]),(0,a.Lk)("template",b,["actions"==e.props.column.field?((0,a.uX)(),(0,a.CE)("span",k,[(0,a.Lk)("div",null,[(0,a.bF)(Be,{id:"dropdown-right",variant:"link",text:"right align","toggle-class":"text-decoration-none",size:"lg",right:"","no-caret":""},{"button-content":(0,a.k6)((()=>[y,v,g])),default:(0,a.k6)((()=>[e.props.row.due>0&&e.currentUserPermissions&&e.currentUserPermissions.includes("pay_due")?((0,a.uX)(),(0,a.Wv)(Me,{key:0,onClick:t[4]||(t[4]=t=>$e.Pay_due(e.props.row))},{default:(0,a.k6)((()=>[f,(0,a.eW)(" "+(0,s.v_)(e.$t("pay_all_sell_due_at_a_time")),1)])),_:1})):(0,a.Q3)("",!0),e.props.row.return_Due>0&&e.currentUserPermissions&&e.currentUserPermissions.includes("pay_sale_return_due")?((0,a.uX)(),(0,a.Wv)(Me,{key:1,onClick:t[5]||(t[5]=t=>$e.Pay_return_due(e.props.row))},{default:(0,a.k6)((()=>[$,(0,a.eW)(" "+(0,s.v_)(e.$t("pay_all_sell_return_due_at_a_time")),1)])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(Me,{onClick:t[6]||(t[6]=t=>$e.showDetails(e.props.row))},{default:(0,a.k6)((()=>[C,(0,a.eW)(" "+(0,s.v_)(e.$t("Customer_details")),1)])),_:1}),(0,a.bF)(Me,{onClick:t[7]||(t[7]=t=>$e.show_credit_card_details(e.props.row.id))},{default:(0,a.k6)((()=>[F,(0,a.eW)(" "+(0,s.v_)(e.$t("credit_card_info")),1)])),_:1}),e.currentUserPermissions&&e.currentUserPermissions.includes("Customers_edit")?((0,a.uX)(),(0,a.Wv)(Me,{key:2,onClick:t[8]||(t[8]=t=>$e.Edit_Client(e.props.row))},{default:(0,a.k6)((()=>[L,(0,a.eW)(" "+(0,s.v_)(e.$t("Edit_Customer")),1)])),_:1})):(0,a.Q3)("",!0),e.currentUserPermissions.includes("Customers_delete")?((0,a.uX)(),(0,a.Wv)(Me,{key:3,title:"Delete",onClick:t[9]||(t[9]=t=>$e.Remove_Client(e.props.row.id))},{default:(0,a.k6)((()=>[P,(0,a.eW)(" "+(0,s.v_)(e.$t("Delete_Customer")),1)])),_:1})):(0,a.Q3)("",!0)])),_:1})])])):(0,a.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options","onOnSelectedRowsChange","styleClass"])])),(0,a.bF)(Qe,{id:"sidebar-right",title:e.$t("Filter"),"bg-variant":"white",right:"",shadow:""},{default:(0,a.k6)((()=>[(0,a.Lk)("div",w,[(0,a.bF)(Ge,null,{default:(0,a.k6)((()=>[(0,a.bF)(qe,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("CustomerCode")},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{label:"Code",placeholder:e.$t("SearchByCode"),modelValue:R.Filter_Code,"onUpdate:modelValue":t[10]||(t[10]=e=>R.Filter_Code=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("CustomerName")},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{label:"Name",placeholder:e.$t("SearchByName"),modelValue:R.Filter_Name,"onUpdate:modelValue":t[11]||(t[11]=e=>R.Filter_Name=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("Phone")},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{label:"Phone",placeholder:e.$t("SearchByPhone"),modelValue:R.Filter_Phone,"onUpdate:modelValue":t[12]||(t[12]=e=>R.Filter_Phone=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("Email")},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{label:"Email",placeholder:e.$t("SearchByEmail"),modelValue:R.Filter_Email,"onUpdate:modelValue":t[13]||(t[13]=e=>R.Filter_Email=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Re,{onClick:t[14]||(t[14]=e=>$e.Get_Clients(R.serverParams.page)),variant:"primary m-1",size:"sm",block:""},{default:(0,a.k6)((()=>[x,(0,a.eW)(" "+(0,s.v_)(e.$t("Filter")),1)])),_:1})])),_:1}),(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Re,{onClick:t[15]||(t[15]=e=>$e.Reset_Filter()),variant:"danger m-1",size:"sm",block:""},{default:(0,a.k6)((()=>[S,(0,a.eW)(" "+(0,s.v_)(e.$t("Reset")),1)])),_:1})])),_:1})])),_:1})])])),_:1},8,["title"]),(0,a.bF)(et,{ref:"ref_pay_due"},{default:(0,a.k6)((()=>[(0,a.bF)(Ze,{"hide-footer":"",size:"md",id:"modal_Pay_due",title:"Pay Due"},{default:(0,a.k6)((()=>[(0,a.bF)(Je,{onSubmit:(0,n.D$)($e.Submit_Payment_sell_due,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(Ge,null,{default:(0,a.k6)((()=>[(0,a.bF)(qe,{lg:"6",md:"12",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Ye,{name:"Amount",rules:{required:!0,regex:/^\d*\.?\d*$/}},{default:(0,a.k6)((l=>[(0,a.bF)(Oe,{label:e.$t("Paying_Amount")+" *"},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{onKeyup:t[16]||(t[16]=e=>$e.Verified_paidAmount(R.payment.amount)),label:"Amount",placeholder:e.$t("Paying_Amount"),modelValue:R.payment.amount,"onUpdate:modelValue":t[17]||(t[17]=e=>R.payment.amount=e),modelModifiers:{number:!0},state:$e.getValidationState(l),"aria-describedby":"Amount-feedback"},null,8,["placeholder","modelValue","state"]),(0,a.bF)(Ke,{id:"Amount-feedback"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.errors[0]),1)])),_:2},1024),(0,a.Lk)("span",D,(0,s.v_)(e.$t("Due"))+" : "+(0,s.v_)(e.currentUser.currency)+" "+(0,s.v_)(R.payment.due),1)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,a.bF)(qe,{lg:"6",md:"12",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Ye,{name:"Payment choice",rules:{required:!0}},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{"slot-scope":"{ valid, errors }",label:e.$t("Paymentchoice")+" *"},{default:(0,a.k6)((()=>[(0,a.bF)(He,{class:(0,s.C4)({"is-invalid":!!e.errors.length}),state:!e.errors[0]&&(!!e.valid||null),modelValue:R.payment.Reglement,"onUpdate:modelValue":t[18]||(t[18]=e=>R.payment.Reglement=e),reduce:e=>e.value,placeholder:e.$t("PleaseSelect"),options:[{label:"Cash",value:"Cash"},{label:"credit card",value:"credit card"},{label:"TPE",value:"tpe"},{label:"cheque",value:"cheque"},{label:"Western Union",value:"Western Union"},{label:"bank transfer",value:"bank transfer"},{label:"other",value:"other"}]},null,8,["class","state","modelValue","reduce","placeholder"]),(0,a.bF)(Ke,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,a.bF)(qe,{lg:"12",md:"12",sm:"12",class:"mt-3"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("Please_provide_any_details")},{default:(0,a.k6)((()=>[(0,a.bF)(je,{id:"textarea",modelValue:R.payment.notes,"onUpdate:modelValue":t[19]||(t[19]=e=>R.payment.notes=e),rows:"3","max-rows":"6"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"12",class:"mt-3"},{default:(0,a.k6)((()=>[(0,a.bF)(Re,{variant:"primary",type:"submit",disabled:R.paymentProcessing},{default:(0,a.k6)((()=>[T,(0,a.eW)(" "+(0,s.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[20]||((0,a.Vq)(-1),t[20]=R.paymentProcessing?((0,a.uX)(),(0,a.CE)("div",V,E)):(0,a.Q3)("",!0),(0,a.Vq)(1),t[20])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},512),(0,a.bF)(et,{ref:"ref_pay_return_due"},{default:(0,a.k6)((()=>[(0,a.bF)(Ze,{"hide-footer":"",size:"md",id:"modal_Pay_return_due",title:"Pay Sell Return Due"},{default:(0,a.k6)((()=>[(0,a.bF)(Je,{onSubmit:(0,n.D$)($e.Submit_Payment_sell_return_due,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(Ge,null,{default:(0,a.k6)((()=>[(0,a.bF)(qe,{lg:"6",md:"12",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Ye,{name:"Amount",rules:{required:!0,regex:/^\d*\.?\d*$/}},{default:(0,a.k6)((l=>[(0,a.bF)(Oe,{label:e.$t("Paying_Amount")+" *"},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{onKeyup:t[21]||(t[21]=e=>$e.Verified_return_paidAmount(R.payment_return.amount)),label:"Amount",placeholder:e.$t("Paying_Amount"),modelValue:R.payment_return.amount,"onUpdate:modelValue":t[22]||(t[22]=e=>R.payment_return.amount=e),modelModifiers:{number:!0},state:$e.getValidationState(l),"aria-describedby":"Amount-feedback"},null,8,["placeholder","modelValue","state"]),(0,a.bF)(Ke,{id:"Amount-feedback"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.errors[0]),1)])),_:2},1024),(0,a.Lk)("span",U,(0,s.v_)(e.$t("Due"))+" : "+(0,s.v_)(e.currentUser.currency)+" "+(0,s.v_)(R.payment_return.return_Due),1)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,a.bF)(qe,{lg:"6",md:"12",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Ye,{name:"Payment choice",rules:{required:!0}},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{"slot-scope":"{ valid, errors }",label:e.$t("Paymentchoice")+" *"},{default:(0,a.k6)((()=>[(0,a.bF)(He,{class:(0,s.C4)({"is-invalid":!!e.errors.length}),state:!e.errors[0]&&(!!e.valid||null),modelValue:R.payment_return.Reglement,"onUpdate:modelValue":t[23]||(t[23]=e=>R.payment_return.Reglement=e),reduce:e=>e.value,placeholder:e.$t("PleaseSelect"),options:[{label:"Cash",value:"Cash"},{label:"credit card",value:"credit card"},{label:"TPE",value:"tpe"},{label:"cheque",value:"cheque"},{label:"Western Union",value:"Western Union"},{label:"bank transfer",value:"bank transfer"},{label:"other",value:"other"}]},null,8,["class","state","modelValue","reduce","placeholder"]),(0,a.bF)(Ke,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,a.bF)(qe,{lg:"12",md:"12",sm:"12",class:"mt-3"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("Please_provide_any_details")},{default:(0,a.k6)((()=>[(0,a.bF)(je,{id:"textarea",modelValue:R.payment_return.notes,"onUpdate:modelValue":t[24]||(t[24]=e=>R.payment_return.notes=e),rows:"3","max-rows":"6"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"12",class:"mt-3"},{default:(0,a.k6)((()=>[(0,a.bF)(Re,{variant:"primary",type:"submit",disabled:R.payment_return_Processing},{default:(0,a.k6)((()=>[N,(0,a.eW)(" "+(0,s.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[25]||((0,a.Vq)(-1),t[25]=R.payment_return_Processing?((0,a.uX)(),(0,a.CE)("div",A,I)):(0,a.Q3)("",!0),(0,a.Vq)(1),t[25])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},512),(0,a.bF)(Ze,{"hide-footer":"",size:"sm",scrollable:"",id:"Show_invoice",title:e.$t("Customer_Credit_Note")},{default:(0,a.k6)((()=>[(0,a.Lk)("div",M,[(0,a.Lk)("div",B,[(0,a.Lk)("div",z,[(0,a.Lk)("h2",X,(0,s.v_)(R.company_info.CompanyName),1),(0,a.Lk)("p",null,[(0,a.Lk)("span",null,[(0,a.eW)((0,s.v_)(e.$t("date"))+" : "+(0,s.v_)(R.payment.date)+" ",1),O]),(0,a.Lk)("span",null,[(0,a.eW)((0,s.v_)(e.$t("Adress"))+" : "+(0,s.v_)(R.company_info.CompanyAdress)+" ",1),q]),(0,a.Lk)("span",null,[(0,a.eW)((0,s.v_)(e.$t("Phone"))+" : "+(0,s.v_)(R.company_info.CompanyPhone)+" ",1),G]),(0,a.Lk)("span",null,[(0,a.eW)((0,s.v_)(e.$t("Customer"))+" : "+(0,s.v_)(R.payment.client_name)+" ",1),Q])])]),(0,a.Lk)("table",K,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Y,[(0,a.Lk)("th",H,(0,s.v_)(e.$t("PayeBy"))+":",1),(0,a.Lk)("th",j,(0,s.v_)(e.$t("Amount"))+":",1),(0,a.Lk)("th",J,(0,s.v_)(e.$t("Due"))+":",1)])]),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",Z,(0,s.v_)(R.payment.Reglement),1),(0,a.Lk)("td",ee,(0,s.v_)($e.formatNumber(R.payment.amount,2)),1),(0,a.Lk)("td",te,(0,s.v_)($e.formatNumber(R.payment.due-R.payment.amount,2)),1)])])])])]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>$e.print_it()),class:"btn btn-outline-primary"},[le,(0,a.eW)(" "+(0,s.v_)(e.$t("print")),1)])])),_:1},8,["title"]),(0,a.bF)(Ze,{"hide-footer":"",size:"sm",scrollable:"",id:"Show_invoice_return",title:e.$t("Sell_return_due")},{default:(0,a.k6)((()=>[(0,a.Lk)("div",ae,[(0,a.Lk)("div",se,[(0,a.Lk)("div",ne,[(0,a.Lk)("h2",ie,(0,s.v_)(R.company_info.CompanyName),1),(0,a.Lk)("p",null,[(0,a.Lk)("span",null,[(0,a.eW)((0,s.v_)(e.$t("date"))+" : "+(0,s.v_)(R.payment_return.date)+" ",1),re]),(0,a.Lk)("span",null,[(0,a.eW)((0,s.v_)(e.$t("Adress"))+" : "+(0,s.v_)(R.company_info.CompanyAdress)+" ",1),oe]),(0,a.Lk)("span",null,[(0,a.eW)((0,s.v_)(e.$t("Phone"))+" : "+(0,s.v_)(R.company_info.CompanyPhone)+" ",1),de]),(0,a.Lk)("span",null,[(0,a.eW)((0,s.v_)(e.$t("Customer"))+" : "+(0,s.v_)(R.payment_return.client_name)+" ",1),ue])])]),(0,a.Lk)("table",me,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",_e,[(0,a.Lk)("th",ce,(0,s.v_)(e.$t("PayeBy"))+":",1),(0,a.Lk)("th",he,(0,s.v_)(e.$t("Amount"))+":",1),(0,a.Lk)("th",pe,(0,s.v_)(e.$t("Due"))+":",1)])]),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",be,(0,s.v_)(R.payment_return.Reglement),1),(0,a.Lk)("td",ke,(0,s.v_)($e.formatNumber(R.payment_return.amount,2)),1),(0,a.Lk)("td",ye,(0,s.v_)($e.formatNumber(R.payment_return.return_Due-R.payment_return.amount,2)),1)])])])])]),(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>$e.print_return_due()),class:"btn btn-outline-primary"},[ve,(0,a.eW)(" "+(0,s.v_)(e.$t("print")),1)])])),_:1},8,["title"]),(0,a.bF)(et,{ref:"Create_Customer"},{default:(0,a.k6)((()=>[(0,a.bF)(Ze,{"hide-footer":"",size:"lg",id:"New_Customer",title:R.editmode?e.$t("Edit"):e.$t("Add")},{default:(0,a.k6)((()=>[(0,a.bF)(Je,{onSubmit:(0,n.D$)($e.Submit_Customer,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(Ge,null,{default:(0,a.k6)((()=>[(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Ye,{name:"Name Customer",rules:{required:!0}},{default:(0,a.k6)((l=>[(0,a.bF)(Oe,{label:e.$t("CustomerName")+" *"},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{state:$e.getValidationState(l),"aria-describedby":"name-feedback",label:"name",placeholder:e.$t("CustomerName"),modelValue:R.client.name,"onUpdate:modelValue":t[28]||(t[28]=e=>R.client.name=e)},null,8,["state","placeholder","modelValue"]),(0,a.bF)(Ke,{id:"name-feedback"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(l.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("Email")},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{label:"email",modelValue:R.client.email,"onUpdate:modelValue":t[29]||(t[29]=e=>R.client.email=e),placeholder:e.$t("Email")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("Phone")},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{label:"Phone",modelValue:R.client.phone,"onUpdate:modelValue":t[30]||(t[30]=e=>R.client.phone=e),placeholder:e.$t("Phone")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("Country")},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{label:"Country",modelValue:R.client.country,"onUpdate:modelValue":t[31]||(t[31]=e=>R.client.country=e),placeholder:e.$t("Country")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("City")},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{label:"City",modelValue:R.client.city,"onUpdate:modelValue":t[32]||(t[32]=e=>R.client.city=e),placeholder:e.$t("City")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("Tax_Number")},{default:(0,a.k6)((()=>[(0,a.bF)(Xe,{label:"Tax Number",modelValue:R.client.tax_number,"onUpdate:modelValue":t[33]||(t[33]=e=>R.client.tax_number=e),placeholder:e.$t("Tax_Number")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"12",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,{label:e.$t("Adress")},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("textarea",{label:"Adress",class:"form-control",rows:"4","onUpdate:modelValue":t[34]||(t[34]=e=>R.client.adresse=e),placeholder:e.$t("Adress")},null,8,ge),[[n.Jo,R.client.adresse]])])),_:1},8,["label"])])),_:1}),(0,a.bF)(qe,{md:"12",class:"mt-3"},{default:(0,a.k6)((()=>[(0,a.bF)(Re,{variant:"primary",type:"submit",disabled:R.SubmitProcessing},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[35]||((0,a.Vq)(-1),t[35]=R.SubmitProcessing?((0,a.uX)(),(0,a.CE)("div",fe,Ce)):(0,a.Q3)("",!0),(0,a.Vq)(1),t[35])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])])),_:1},512),(0,a.bF)(Ze,{"ok-only":"",size:"lg",id:"show_credit_card_details",title:e.$t("Saved_Credit_Card_Info")},{default:(0,a.k6)((()=>[(0,a.bF)(Ge,null,{default:(0,a.k6)((()=>[R.savedPaymentMethods&&R.savedPaymentMethods.length>0?((0,a.uX)(),(0,a.Wv)(qe,{key:0,md:"12"},{default:(0,a.k6)((()=>[Fe,(0,a.Lk)("table",Le,[Pe,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(R.savedPaymentMethods,(e=>((0,a.uX)(),(0,a.CE)("tr",{class:(0,s.C4)({"bg-selected-card":$e.isSelectedCard(e)})},[(0,a.Lk)("td",null,"**** "+(0,s.v_)(e.last4),1),(0,a.Lk)("td",null,(0,s.v_)(e.type),1),(0,a.Lk)("td",null,(0,s.v_)(e.exp),1),(0,a.Lk)("td",null,[$e.isSelectedCard(e)||R.card_id==e.card_id?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(Re,{key:0,variant:"outline-primary",onClick:t=>$e.selectCard(e)},{default:(0,a.k6)((()=>[we])),_:2},1032,["onClick"])),$e.isSelectedCard(e)||R.card_id==e.card_id?((0,a.uX)(),(0,a.CE)("span",xe,[Se,(0,a.eW)(" Default credit card ")])):(0,a.Q3)("",!0)])],2)))),256))])])])),_:1})):((0,a.uX)(),(0,a.Wv)(qe,{key:1,md:"12"},{default:(0,a.k6)((()=>[De])),_:1}))])),_:1})])),_:1},8,["title"]),(0,a.bF)(Ze,{"ok-only":"",size:"md",id:"showDetails",title:e.$t("CustomerDetails")},{default:(0,a.k6)((()=>[(0,a.bF)(Ge,null,{default:(0,a.k6)((()=>[(0,a.bF)(qe,{lg:"12",md:"12",sm:"12",class:"mt-3"},{default:(0,a.k6)((()=>[(0,a.Lk)("table",Te,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("CustomerCode")),1),(0,a.Lk)("th",null,(0,s.v_)(R.client.code),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("CustomerName")),1),(0,a.Lk)("th",null,(0,s.v_)(R.client.name),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Phone")),1),(0,a.Lk)("th",null,(0,s.v_)(R.client.phone),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Email")),1),(0,a.Lk)("th",null,(0,s.v_)(R.client.email),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Country")),1),(0,a.Lk)("th",null,(0,s.v_)(R.client.country),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("City")),1),(0,a.Lk)("th",null,(0,s.v_)(R.client.city),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Adress")),1),(0,a.Lk)("th",null,(0,s.v_)(R.client.adresse),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Tax_Number")),1),(0,a.Lk)("th",null,(0,s.v_)(R.client.tax_number),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Total_Sale_Due")),1),(0,a.Lk)("th",null,(0,s.v_)(e.currentUser.currency)+" "+(0,s.v_)(R.client.due),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Total_Sell_Return_Due")),1),(0,a.Lk)("th",null,(0,s.v_)(e.currentUser.currency)+" "+(0,s.v_)(R.client.return_Due),1)])])])])),_:1})])),_:1})])),_:1},8,["title"]),(0,a.bF)(Ze,{"ok-only":"","ok-title":"Cancel",size:"md",id:"importClients",title:e.$t("Import_Customers")},{default:(0,a.k6)((()=>[(0,a.bF)(Je,{onSubmit:(0,n.D$)($e.Submit_import,["prevent"]),enctype:"multipart/form-data"},{default:(0,a.k6)((()=>[(0,a.bF)(Ge,null,{default:(0,a.k6)((()=>[(0,a.bF)(qe,{md:"12",sm:"12",class:"mb-3"},{default:(0,a.k6)((()=>[(0,a.bF)(Oe,null,{default:(0,a.k6)((()=>[(0,a.Lk)("input",{type:"file",onChange:t[36]||(t[36]=(...e)=>$e.onFileSelected&&$e.onFileSelected(...e)),label:"Choose File"},null,32),(0,a.bF)(Ke,{id:"File-feedback",class:"d-block"},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("field_must_be_in_csv_format")),1)])),_:1})])),_:1})])),_:1}),(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Re,{type:"submit",variant:"primary",disabled:R.ImportProcessing,size:"sm",block:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[37]||((0,a.Vq)(-1),t[37]=R.ImportProcessing?((0,a.uX)(),(0,a.CE)("div",Ve,Ee)):(0,a.Q3)("",!0),(0,a.Vq)(1),t[37])])),_:1}),(0,a.bF)(qe,{md:"6",sm:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(Re,{href:"/import/exemples/import_clients.csv",variant:"info",size:"sm",block:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,s.v_)(e.$t("Download_exemple")),1)])),_:1})])),_:1}),(0,a.bF)(qe,{md:"12",sm:"12"},{default:(0,a.k6)((()=>[(0,a.Lk)("table",Ue,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Name")),1),(0,a.Lk)("th",null,[(0,a.Lk)("span",Ne,(0,s.v_)(e.$t("Field_is_required")),1)])]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Phone")),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Email")),1),Ae]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Country")),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("City")),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Adress")),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,(0,s.v_)(e.$t("Tax_Number")),1)])])])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])])}var Ie=l(95353),Me=l(5947),Be=l.n(Me),ze=l(44323);l(13246);const Xe={metaInfo:{title:"Customer"},data(){return{savedPaymentMethods:[],selectedCard:null,card_id:"",customer_id:"",isLoading:!0,SubmitProcessing:!1,ImportProcessing:!1,paymentProcessing:!1,payment_return_Processing:!1,serverParams:{columnFilters:{},sort:{field:"id",type:"desc"},page:1,perPage:10},showDropdown:!1,payment:{client_id:"",client_name:"",date:"",due:"",amount:"",notes:"",Reglement:""},payment_return:{client_id:"",client_name:"",date:"",return_Due:"",amount:"",notes:"",Reglement:""},company_info:{},selectedIds:[],totalRows:"",search:"",limit:"10",Filter_Name:"",Filter_Code:"",Filter_Phone:"",Filter_Email:"",clients:[],editmode:!1,import_clients:"",data:new FormData,client:{id:"",name:"",code:"",email:"",phone:"",country:"",city:"",adresse:"",tax_number:""}}},mounted(){this.$root.$on("bv::dropdown::show",(e=>{this.showDropdown=!0})),this.$root.$on("bv::dropdown::hide",(e=>{this.showDropdown=!1}))},computed:{...(0,Ie.L8)(["currentUserPermissions","currentUser"]),isSelectedCard(){return e=>this.selectedCard===e},columns(){return[{label:this.$t("Code"),field:"code",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Name"),field:"name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Phone"),field:"phone",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Email"),field:"email",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Tax_Number"),field:"tax_number",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Total_Sale_Due"),field:"due",type:"decimal",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Total_Sell_Return_Due"),field:"return_Due",type:"decimal",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{Submit_Customer(){this.$refs.Create_Customer.validate().then((e=>{e?this.editmode?this.Update_Client():this.Create_Client():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Clients(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Clients(1))},selectionChanged({selectedRows:e}){this.selectedIds=[],e.forEach(((e,t)=>{this.selectedIds.push(e.id)}))},onSortChange(e){this.updateParams({sort:{type:e[0].type,field:e[0].field}}),this.Get_Clients(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_Clients(this.serverParams.page)},getValidationState({dirty:e,validated:t,valid:l=null}){return e||t?l:null},Reset_Filter(){this.search="",this.Filter_Name="",this.Filter_Code="",this.Filter_Phone="",this.Filter_Email="",this.Get_Clients(this.serverParams.page)},makeToast(e,t,l){this.$root.$bvToast.toast(t,{title:l,variant:e,solid:!0})},clients_PDF(){var e=this;let t=new ze["default"]("p","pt"),l=[{title:"Code",dataKey:"code"},{title:"Name",dataKey:"name"},{title:"Sale Due",dataKey:"due"},{title:"Sell Return Due",dataKey:"return_Due"},{title:"Tax Number",dataKey:"tax_number"},{title:"Phone",dataKey:"phone"},{title:"Email",dataKey:"email"},{title:"Country",dataKey:"country"},{title:"City",dataKey:"city"}];t.autoTable(l,e.clients),t.text("Customer List",40,25),t.save("Customer_List.pdf")},Get_Clients(e){Be().start(),Be().set(.1),axios.get("clients?page="+e+"&name="+this.Filter_Name+"&code="+this.Filter_Code+"&phone="+this.Filter_Phone+"&email="+this.Filter_Email+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.clients=e.data.clients,this.company_info=e.data.company_info,this.totalRows=e.data.totalRows,Be().done(),this.isLoading=!1})).catch((e=>{Be().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},Show_import_clients(){this.$bvModal.show("importClients")},onFileSelected(e){this.import_clients="";let t,l=e.target.files[0];l["size"]<1048576?t=!1:this.makeToast("danger",this.$t("file_size_must_be_less_than_1_mega"),this.$t("Failed")),!1===t&&(this.import_clients=l)},Submit_import(){Be().start(),Be().set(.1);var e=this;e.ImportProcessing=!0,e.data.append("clients",e.import_clients),axios.post("clients/import/csv",e.data).then((t=>{e.ImportProcessing=!1,!0===t.data.status?(this.makeToast("success",this.$t("Successfully_Imported"),this.$t("Success")),Fire.$emit("Event_import")):!1===t.data.status&&this.makeToast("danger",this.$t("field_must_be_in_csv_format"),this.$t("Failed")),Be().done()})).catch((t=>{e.ImportProcessing=!1,Be().done(),this.makeToast("danger",this.$t("Please_follow_the_import_instructions"),this.$t("Failed"))}))},show_credit_card_details(e){Be().start(),Be().set(.1),this.customer_id=e,this.savedPaymentMethods=[],this.selectedCard=null,this.card_id="",axios.get(`/retrieve-customer?customerId=${e}`).then((e=>{this.savedPaymentMethods=e.data.data,this.card_id=e.data.customer_default_source,setTimeout((()=>{Fire.$emit("get_credit_card_details")}),500)})).catch((e=>{this.savedPaymentMethods=[],this.card_id="",setTimeout((()=>{Fire.$emit("get_credit_card_details")}),500)}))},selectCard(e){this.selectedCard=e,this.card_id=e.card_id,axios.post("update-customer-stripe",{customer_id:this.customer_id,card_id:this.card_id}).then((e=>{this.makeToast("success",this.$t("Credit_card_changed_successfully"),this.$t("Success"))})).catch((e=>{this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed"))}))},showDetails(e){Be().start(),Be().set(.1),this.client=e,Fire.$emit("Get_Details_customers")},New_Client(){this.reset_Form(),this.editmode=!1,this.$bvModal.show("New_Customer")},Edit_Client(e){this.Get_Clients(this.serverParams.page),this.reset_Form(),this.client=e,this.editmode=!0,this.$bvModal.show("New_Customer")},Create_Client(){this.SubmitProcessing=!0,axios.post("clients",{name:this.client.name,email:this.client.email,phone:this.client.phone,tax_number:this.client.tax_number,country:this.client.country,city:this.client.city,adresse:this.client.adresse}).then((e=>{Fire.$emit("Event_Customer"),this.makeToast("success",this.$t("Create.TitleCustomer"),this.$t("Success")),this.SubmitProcessing=!1})).catch((e=>{this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed")),this.SubmitProcessing=!1}))},Update_Client(){this.SubmitProcessing=!0,axios.put("clients/"+this.client.id,{name:this.client.name,email:this.client.email,phone:this.client.phone,tax_number:this.client.tax_number,country:this.client.country,city:this.client.city,adresse:this.client.adresse}).then((e=>{Fire.$emit("Event_Customer"),this.makeToast("success",this.$t("Update.TitleCustomer"),this.$t("Success")),this.SubmitProcessing=!1})).catch((e=>{this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed")),this.SubmitProcessing=!1}))},reset_Form(){this.client={id:"",name:"",email:"",phone:"",country:"",tax_number:"",city:"",adresse:""}},Remove_Client(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&axios.delete("clients/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.CustomerDeleted"),"success"),Fire.$emit("Delete_Customer")})).catch((()=>{this.$swal(this.$t("Delete.Failed"),this.$t("Delete.ClientError"),"warning")}))}))},delete_by_selected(){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&(Be().start(),Be().set(.1),axios.post("clients/delete/by_selection",{selectedIds:this.selectedIds}).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.CustomerDeleted"),"success"),Fire.$emit("Delete_Customer")})).catch((()=>{setTimeout((()=>Be().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))},Submit_Payment_sell_due(){this.$refs.ref_pay_due.validate().then((e=>{e?this.payment.amount>this.payment.due?(this.makeToast("warning",this.$t("Paying_amount_is_greater_than_Total_Due"),this.$t("Warning")),this.payment.amount=0):this.Submit_Pay_due():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},Verified_paidAmount(){isNaN(this.payment.amount)?this.payment.amount=0:this.payment.amount>this.payment.due&&(this.makeToast("warning",this.$t("Paying_amount_is_greater_than_Total_Due"),this.$t("Warning")),this.payment.amount=0)},reset_Form_payment(){this.payment={client_id:"",client_name:"",date:"",due:"",amount:"",notes:"",Reglement:""}},Pay_due(e){this.reset_Form_payment(),this.payment.client_id=e.id,this.payment.client_name=e.name,this.payment.due=e.due,this.payment.date=(new Date).toISOString().slice(0,10),setTimeout((()=>{this.$bvModal.show("modal_Pay_due")}),500)},print_it(){var e=document.getElementById("invoice-POS").innerHTML,t=window.open("","","height=500, width=500");t.document.write('<link rel="stylesheet" href="/css/pos_print.css"><html>'),t.document.write("<body >"),t.document.write(e),t.document.write("</body></html>"),t.document.close(),setTimeout((()=>{t.print()}),1e3)},Submit_Pay_due(){this.paymentProcessing=!0,axios.post("clients_pay_due",{client_id:this.payment.client_id,amount:this.payment.amount,notes:this.payment.notes,Reglement:this.payment.Reglement}).then((e=>{Fire.$emit("Event_pay_due"),this.makeToast("success",this.$t("Create.TitlePayment"),this.$t("Success")),this.paymentProcessing=!1})).catch((e=>{this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed")),this.paymentProcessing=!1}))},Submit_Payment_sell_return_due(){this.$refs.ref_pay_return_due.validate().then((e=>{e?this.payment_return.amount>this.payment_return.return_Due?(this.makeToast("warning",this.$t("Paying_amount_is_greater_than_Total_Due"),this.$t("Warning")),this.payment_return.amount=0):this.Submit_Pay_return_due():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},Verified_return_paidAmount(){isNaN(this.payment_return.amount)?this.payment_return.amount=0:this.payment_return.amount>this.payment_return.return_Due&&(this.makeToast("warning",this.$t("Paying_amount_is_greater_than_Total_Due"),this.$t("Warning")),this.payment_return.amount=0)},reset_Form_payment_return_due(){this.payment_return={client_id:"",client_name:"",date:"",return_Due:"",amount:"",notes:"",Reglement:""}},Pay_return_due(e){this.reset_Form_payment_return_due(),this.payment_return.client_id=e.id,this.payment_return.client_name=e.name,this.payment_return.return_Due=e.return_Due,this.payment_return.date=(new Date).toISOString().slice(0,10),setTimeout((()=>{this.$bvModal.show("modal_Pay_return_due")}),500)},print_return_due(){var e=document.getElementById("invoice-POS-return").innerHTML,t=window.open("","","height=500, width=500");t.document.write('<link rel="stylesheet" href="/css/pos_print.css"><html>'),t.document.write("<body >"),t.document.write(e),t.document.write("</body></html>"),t.document.close(),setTimeout((()=>{t.print()}),1e3)},Submit_Pay_return_due(){this.payment_return_Processing=!0,axios.post("clients_pay_return_due",{client_id:this.payment_return.client_id,amount:this.payment_return.amount,notes:this.payment_return.notes,Reglement:this.payment_return.Reglement}).then((e=>{Fire.$emit("Event_pay_return_due"),this.makeToast("success",this.$t("Create.TitlePayment"),this.$t("Success")),this.payment_return_Processing=!1})).catch((e=>{this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed")),this.payment_return_Processing=!1}))},formatNumber(e,t){const l=("string"===typeof e?e:e.toString()).split(".");if(t<=0)return l[0];let a=l[1]||"";if(a.length>t)return`${l[0]}.${a.substr(0,t)}`;while(a.length<t)a+="0";return`${l[0]}.${a}`}},created:function(){this.Get_Clients(1),Fire.$on("get_credit_card_details",(()=>{setTimeout((()=>Be().done()),500),this.$bvModal.show("show_credit_card_details")})),Fire.$on("Get_Details_customers",(()=>{setTimeout((()=>Be().done()),500),this.$bvModal.show("showDetails")})),Fire.$on("Event_pay_due",(()=>{setTimeout((()=>{this.Get_Clients(this.serverParams.page),this.$bvModal.hide("modal_Pay_due")}),500),this.$bvModal.show("Show_invoice")})),Fire.$on("Event_pay_return_due",(()=>{setTimeout((()=>{this.Get_Clients(this.serverParams.page),this.$bvModal.hide("modal_Pay_return_due")}),500),this.$bvModal.show("Show_invoice_return")})),Fire.$on("Event_Customer",(()=>{setTimeout((()=>{this.Get_Clients(this.serverParams.page),this.$bvModal.hide("New_Customer")}),500)})),Fire.$on("Delete_Customer",(()=>{setTimeout((()=>{this.Get_Clients(this.serverParams.page)}),500)})),Fire.$on("Event_import",(()=>{setTimeout((()=>{this.Get_Clients(this.serverParams.page),this.$bvModal.hide("importClients")}),500)}))}};var Oe=l(66262);const qe=(0,Oe.A)(Xe,[["render",Re]]),Ge=qe}}]);
//# sourceMappingURL=Customers.09bc8acb.js.map