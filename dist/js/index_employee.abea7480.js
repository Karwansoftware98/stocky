"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[5684],{45179:(e,t,l)=>{l.r(t),l.d(t,{default:()=>S});var s=l(20641),a=l(90033);const i={class:"main-content"},n={key:0,class:"loading_page spinner spinner-primary mr-3"},o={key:1},r={slot:"selected-row-actions"},m={slot:"table-actions",class:"mt-2 mb-3"},d=(0,s.Lk)("i",{class:"i-Filter-2"},null,-1),p=(0,s.Lk)("i",{class:"i-File-Copy"},null,-1),c=(0,s.Lk)("i",{class:"i-File-Excel"},null,-1),h=(0,s.Lk)("span",{class:"ul-btn__icon"},[(0,s.Lk)("i",{class:"i-Add"})],-1),u={class:"ul-btn__text ml-1"},_={slot:"table-row","slot-scope":"props"},y={key:0},b=(0,s.Lk)("i",{class:"i-Eye text-25 text-info"},null,-1),g=(0,s.Lk)("i",{class:"i-Edit text-25 text-success"},null,-1),f=(0,s.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),v=[f],F={class:"px-3 py-2"},C=(0,s.Lk)("i",{class:"i-Filter-2"},null,-1),k=(0,s.Lk)("i",{class:"i-Power-2"},null,-1);function P(e,t,l,f,P,x){const $=(0,s.g2)("breadcumb"),w=(0,s.g2)("b-button"),E=(0,s.g2)("vue-excel-xlsx"),D=(0,s.g2)("router-link"),L=(0,s.g2)("vue-good-table"),T=(0,s.g2)("b-form-input"),S=(0,s.g2)("b-form-group"),U=(0,s.g2)("b-col"),B=(0,s.g2)("v-select"),O=(0,s.g2)("b-row"),R=(0,s.g2)("b-sidebar"),X=(0,s.gN)("b-toggle"),W=(0,s.gN)("b-tooltip");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)($,{page:e.$t("Employees"),folder:e.$t("hrm")},null,8,["page","folder"]),P.isLoading?((0,s.uX)(),(0,s.CE)("div",n)):((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(L,{mode:"remote",columns:x.columns,totalRows:P.totalRows,rows:P.employees,onOnPageChange:x.onPageChange,onOnPerPageChange:x.onPerPageChange,onOnSortChange:x.onSortChange,onOnSearch:x.onSearch,"search-options":{enabled:!0,placeholder:e.$t("Search_this_table")},"select-options":{enabled:!0,clearSelectionText:""},onOnSelectedRowsChange:x.selectionChanged,"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"tableOne table-hover vgt-table"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",r,[e.currentUserPermissions&&e.currentUserPermissions.includes("delete_employee")?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-danger btn-sm",onClick:t[0]||(t[0]=e=>x.delete_by_selected())},(0,a.v_)(e.$t("Del")),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",m,[(0,s.bo)(((0,s.uX)(),(0,s.Wv)(w,{variant:"outline-info ripple m-1",size:"sm"},{default:(0,s.k6)((()=>[d,(0,s.eW)(" "+(0,a.v_)(e.$t("Filter")),1)])),_:1})),[[X,void 0,void 0,{"sidebar-right":!0}]]),(0,s.bF)(w,{onClick:t[1]||(t[1]=e=>x.Employee_PDF()),size:"sm",variant:"outline-success ripple m-1"},{default:(0,s.k6)((()=>[p,(0,s.eW)(" PDF ")])),_:1}),(0,s.bF)(E,{class:"btn btn-sm btn-outline-danger ripple m-1",data:P.employees,columns:x.columns,"file-name":"employees","file-type":"xlsx","sheet-name":"employees"},{default:(0,s.k6)((()=>[c,(0,s.eW)(" EXCEL ")])),_:1},8,["data","columns"]),e.currentUserPermissions&&e.currentUserPermissions.includes("add_employee")?((0,s.uX)(),(0,s.Wv)(D,{key:0,class:"btn-sm btn btn-primary ripple btn-icon m-1",to:"/app/hrm/employees/store"},{default:(0,s.k6)((()=>[h,(0,s.Lk)("span",u,(0,a.v_)(e.$t("Add")),1)])),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("template",_,["actions"==e.props.column.field?((0,s.uX)(),(0,s.CE)("span",y,[e.currentUserPermissions&&e.currentUserPermissions.includes("view_employee")?((0,s.uX)(),(0,s.Wv)(D,{key:0,title:"detail",to:"/app/hrm/employees/detail/"+e.props.row.id},{default:(0,s.k6)((()=>[b])),_:1},8,["to"])):(0,s.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("edit_employee")?(0,s.bo)(((0,s.uX)(),(0,s.Wv)(D,{key:1,title:"Edit",to:"/app/hrm/employees/edit/"+e.props.row.id},{default:(0,s.k6)((()=>[g])),_:1},8,["to"])),[[W,void 0,void 0,{hover:!0}]]):(0,s.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("delete_employee")?(0,s.bo)(((0,s.uX)(),(0,s.CE)("a",{key:2,title:"Delete",onClick:t[2]||(t[2]=t=>x.Remove_Employee(e.props.row.id))},v)),[[W,void 0,void 0,{hover:!0}]]):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options","onOnSelectedRowsChange"])])),(0,s.bF)(R,{id:"sidebar-right",title:e.$t("Filter"),"bg-variant":"white",right:"",shadow:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",F,[(0,s.bF)(O,null,{default:(0,s.k6)((()=>[(0,s.bF)(U,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("username")},{default:(0,s.k6)((()=>[(0,s.bF)(T,{label:"Username",placeholder:e.$t("username"),modelValue:P.Filter_username,"onUpdate:modelValue":t[3]||(t[3]=e=>P.Filter_username=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(U,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("Employment_type")},{default:(0,s.k6)((()=>[(0,s.bF)(B,{modelValue:P.Filter_employment_type,"onUpdate:modelValue":t[4]||(t[4]=e=>P.Filter_employment_type=e),reduce:e=>e.value,placeholder:e.$t("Employment_type"),options:[{label:"Full-time",value:"full_time"},{label:"Part-time",value:"part_time"},{label:"Self-employed",value:"self_employed"},{label:"Freelance",value:"freelance"},{label:"Contract",value:"contract"},{label:"Internship",value:"internship"},{label:"Apprenticeship",value:"apprenticeship"},{label:"Seasonal",value:"seasonal"}]},null,8,["modelValue","reduce","placeholder"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(U,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(S,{label:e.$t("Company")},{default:(0,s.k6)((()=>[(0,s.bF)(B,{reduce:e=>e.value,placeholder:e.$t("Company"),modelValue:P.Filter_company,"onUpdate:modelValue":t[5]||(t[5]=e=>P.Filter_company=e),options:P.companies.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(U,{md:"6",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(w,{onClick:t[6]||(t[6]=e=>x.Get_Employees(P.serverParams.page)),variant:"primary m-1",size:"sm",block:""},{default:(0,s.k6)((()=>[C,(0,s.eW)(" "+(0,a.v_)(e.$t("Filter")),1)])),_:1})])),_:1}),(0,s.bF)(U,{md:"6",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(w,{onClick:t[7]||(t[7]=e=>x.Reset_Filter()),variant:"danger m-1",size:"sm",block:""},{default:(0,s.k6)((()=>[k,(0,s.eW)(" "+(0,a.v_)(e.$t("Reset")),1)])),_:1})])),_:1})])),_:1})])])),_:1},8,["title"])])}var x=l(95353),$=l(5947),w=l.n($),E=l(44323);l(13246);const D={metaInfo:{title:"Employee"},data(){return{isLoading:!0,serverParams:{columnFilters:{},sort:{field:"id",type:"desc"},page:1,perPage:10},selectedIds:[],totalRows:"",search:"",limit:"10",Filter_username:"",Filter_employment_type:"",Filter_company:"",employees:[],companies:[]}},computed:{...(0,x.L8)(["currentUserPermissions","currentUser"]),columns(){return[{label:this.$t("FirstName"),field:"firstname",tdClass:"text-left",thClass:"text-left"},{label:this.$t("LastName"),field:"lastname",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Phone"),field:"phone",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Company"),field:"company_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Department"),field:"department_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Designation"),field:"designation_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Office_Shift"),field:"office_shift_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{Employee_PDF(){var e=this;let t=new E["default"]("p","pt"),l=[{title:"First Name",dataKey:"firstname"},{title:"Last Name",dataKey:"lastname"},{title:"Phone",dataKey:"phone"},{title:"Company",dataKey:"company_name"},{title:"Department",dataKey:"department_name"},{title:"Designation",dataKey:"designation_name"},{title:"Office shift",dataKey:"office_shift_name"}];t.autoTable(l,e.employees),t.text("Employee List",40,25),t.save("Employee_List.pdf")},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Employees(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Employees(1))},selectionChanged({selectedRows:e}){this.selectedIds=[],e.forEach(((e,t)=>{this.selectedIds.push(e.id)}))},onSortChange(e){let t="";t="company_name"==e[0].field?"company_id":"department_name"==e[0].field?"department_id":"designation_name"==e[0].field?"designation_id":e[0].field,this.updateParams({sort:{type:e[0].type,field:t}}),this.Get_Employees(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_Employees(this.serverParams.page)},Reset_Filter(){this.search="",this.Filter_username="",this.Filter_employment_type="",this.Filter_company="",this.Get_Employees(this.serverParams.page)},setToStrings(){null===this.Filter_employment_type?this.Filter_employment_type="":null===this.Filter_company&&(this.Filter_company="")},Get_Employees(e){w().start(),w().set(.1),this.setToStrings(),axios.get("employees?page="+e+"&username="+this.Filter_username+"&employment_type="+this.Filter_employment_type+"&company_id="+this.Filter_company+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.employees=e.data.employees,this.companies=e.data.companies,this.totalRows=e.data.totalRows,w().done(),this.isLoading=!1})).catch((e=>{w().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},Remove_Employee(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&(w().start(),w().set(.1),axios.delete("employees/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Deleted_in_successfully"),"success"),Fire.$emit("Delete_Employee")})).catch((()=>{setTimeout((()=>w().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))},delete_by_selected(){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&(w().start(),w().set(.1),axios.post("employees/delete/by_selection",{selectedIds:this.selectedIds}).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Deleted_in_successfully"),"success"),Fire.$emit("Delete_Employee")})).catch((()=>{setTimeout((()=>w().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))}},created:function(){this.Get_Employees(1),Fire.$on("Delete_Employee",(()=>{setTimeout((()=>{w().done(),this.Get_Employees(this.serverParams.page)}),500)}))}};var L=l(66262);const T=(0,L.A)(D,[["render",P]]),S=T}}]);
//# sourceMappingURL=index_employee.abea7480.js.map