"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[9540],{37427:(e,t,a)=>{a.d(t,{c:()=>p});var s="https://js.stripe.com/v3",l=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,i="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(s,'"]')),t=0;t<e.length;t++){var a=e[t];if(l.test(a.src))return a}return null},o=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",a=document.createElement("script");a.src="".concat(s).concat(t);var l=document.head||document.body;if(!l)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return l.appendChild(a),a},d=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:t})},r=null,u=function(e){return null!==r||(r=new Promise((function(t,a){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(i),window.Stripe)t(window.Stripe);else try{var s=n();s&&e?console.warn(i):s||(s=o(e)),s.addEventListener("load",(function(){window.Stripe?t(window.Stripe):a(new Error("Stripe.js not available"))})),s.addEventListener("error",(function(){a(new Error("Failed to load Stripe.js"))}))}catch(l){return void a(l)}else t(null)}))),r},m=function(e,t,a){if(null===e)return null;var s=e.apply(void 0,t);return d(s,a),s},c=Promise.resolve().then((function(){return u(null)})),h=!1;c["catch"]((function(e){h||console.warn(e)}));var p=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];h=!0;var s=Date.now();return c.then((function(e){return m(e,t,s)}))}},62414:(e,t,a)=>{a.d(t,{A:()=>_});var s=a(20641),l=a(53751),i=a(90033);const n={ref:"template"},o=(0,s.Lk)("span",null,"编写你自己的打印区域组件，然后slot插入到vue-easy-print",-1),d=(0,s.Lk)("span",null,"开始打印",-1),r=[d];function u(e,t,a,d,u,m){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.bo)((0,s.Lk)("div",n,[(0,s.RG)(e.$slots,"default",{getChineseNumber:m.getChineseNumber},(()=>[o]))],512),[[l.aG,a.tableShow]]),a.buttonShow?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>m.print&&m.print(...e)),type:"button",class:(0,i.C4)(a.buttonClass)},r,2)):(0,s.Q3)("",!0)])}const m={name:"vue-easy-print",components:{},props:{spaceRow:{type:Boolean,default:!1},tableData:{type:Object,default(){}},tableShow:{type:Boolean,default:!1},buttonShow:{type:Boolean,default:!1},buttonClass:{type:String,default:"el-button el-button--default"},onePageRow:{type:Number,default:5},beforeCopy:Function,beforePrint:Function},data(){return{}},mounted(){this.init()},methods:{init(){let e=document.getElementById("easyPrintIframe");e?this.getStyle():(e=document.createElement("iframe"),e.id="easyPrintIframe",e.style.position="fixed",e.style.width="0",e.style.height="0",e.style.top="-100px",window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)&&(e.src='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script></head><body></body>")'),e.onload=()=>{this.getStyle()},document.body.appendChild(e))},print(){"function"===typeof this.beforeCopy&&this.beforeCopy();let e=document.getElementById("easyPrintIframe");e.contentDocument.body.innerHTML=this.$refs.template.innerHTML,"function"===typeof this.beforePrint&&this.beforePrint(),this.$nextTick((()=>{setTimeout((()=>{e.contentWindow.print()}),100)}))},getStyle(){let e=document.getElementById("easyPrintIframe");for(var t="",a=document.querySelectorAll("style"),s=0;s<a.length;s++)t+=a[s].outerHTML;e.contentDocument.head.innerHTML=t;let l=document.querySelectorAll("link");for(let i=0;i<l.length;i++){let t=document.createElement("link");t.setAttribute("rel","stylesheet"),l[i].type?t.setAttribute("type",l[i].type):t.setAttribute("type","text/css"),t.setAttribute("href",l[i].href),t.setAttribute("media","all"),e.contentDocument.head.appendChild(t)}},getChineseNumber(e){var t,a,s,l,i,n,o,d,r,u,m,c,h,p,_=99999999999.99,b="零",y="壹",v="贰",g="叁",k="肆",f="伍",w="陆",F="柒",$="捌",S="玖",P="拾",C="佰",L="仟",x="万",T="亿",E="",R="元",D="角",W="分",M="整";if(void 0===e)return"";if(e=e.toString(),""==e)return"";if(null!=e.match(/[^,.\d]/))return"";if(null==e.match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/))return"";if(e=e.replace(/,/g,""),e=e.replace(/^0+/,""),Number(e)>_)return alert("您输入的金额太大，请重新输入!"),"";if(l=e.split("."),l.length>1?(t=l[0],a=l[1],a=a.substr(0,2)):(t=l[0],a=""),i=new Array(b,y,v,g,k,f,w,F,$,S),n=new Array("",P,C,L),o=new Array("",x,T),d=new Array(D,W),s="",Number(t)>0){for(r=0,u=0;u<t.length;u++)m=t.length-u-1,c=t.substr(u,1),h=m/4,p=m%4,"0"==c?r++:(r>0&&(s+=i[0]),r=0,s+=i[Number(c)]+n[p]),0==p&&r<4&&(s+=o[h]);s+=R}if(""!=a)for(u=0;u<a.length;u++)c=a.substr(u,1),"0"!=c&&(s+=i[Number(c)]+d[u]);return""==s&&(s=b+R),""==a&&(s+=M),s=E+s,s}}};var c=a(66262);const h=(0,c.A)(m,[["render",u]]),p=h;const _=p},67230:(e,t,a)=>{a.r(t),a.d(t,{default:()=>aa});var s=a(20641),l=a(90033),i=a(53751);const n={class:"main-content"},o={key:0,class:"loading_page spinner spinner-primary mr-3"},d={key:1},r={slot:"selected-row-actions"},u={slot:"table-actions",class:"mt-2 mb-3"},m=(0,s.Lk)("i",{class:"i-Filter-2"},null,-1),c=(0,s.Lk)("i",{class:"i-File-Copy"},null,-1),h=(0,s.Lk)("i",{class:"i-File-Excel"},null,-1),p=(0,s.Lk)("span",{class:"ul-btn__icon"},[(0,s.Lk)("i",{class:"i-Add"})],-1),_={class:"ul-btn__text ml-1"},b={slot:"table-row","slot-scope":"props"},y={key:0},v=(0,s.Lk)("span",{class:"_dot _r_block-dot bg-dark"},null,-1),g=(0,s.Lk)("span",{class:"_dot _r_block-dot bg-dark"},null,-1),k=(0,s.Lk)("span",{class:"_dot _r_block-dot bg-dark"},null,-1),f=(0,s.Lk)("i",{class:"nav-icon i-Eye font-weight-bold mr-2"},null,-1),w=(0,s.Lk)("i",{class:"nav-icon i-Pen-2 font-weight-bold mr-2"},null,-1),F=(0,s.Lk)("i",{class:"nav-icon i-Back font-weight-bold mr-2"},null,-1),$=(0,s.Lk)("i",{class:"nav-icon i-Back font-weight-bold mr-2"},null,-1),S=(0,s.Lk)("i",{class:"nav-icon i-Money-Bag font-weight-bold mr-2"},null,-1),P=(0,s.Lk)("i",{class:"nav-icon i-Add font-weight-bold mr-2"},null,-1),C=(0,s.Lk)("i",{class:"nav-icon i-Pen-2 font-weight-bold mr-2"},null,-1),L=(0,s.Lk)("i",{class:"nav-icon i-File-TXT font-weight-bold mr-2"},null,-1),x=(0,s.Lk)("i",{class:"nav-icon i-File-TXT font-weight-bold mr-2"},null,-1),T=(0,s.Lk)("i",{class:"nav-icon i-Envelope-2 font-weight-bold mr-2"},null,-1),E=(0,s.Lk)("i",{class:"nav-icon i-Speach-Bubble font-weight-bold mr-2"},null,-1),R=(0,s.Lk)("i",{class:"nav-icon i-Close-Window font-weight-bold mr-2"},null,-1),D={key:1},W={key:0,class:"badge badge-outline-success"},M={key:1,class:"badge badge-outline-info"},V={key:2,class:"badge badge-outline-warning"},A={key:2},X={key:0,class:"badge badge-outline-success"},U={key:1,class:"badge badge-outline-primary"},G={key:2,class:"badge badge-outline-warning"},B={key:3},I={key:0,class:"badge badge-outline-warning"},N={key:1,class:"badge badge-outline-info"},O={key:2,class:"badge badge-outline-secondary"},Q={key:3,class:"badge badge-outline-success"},q={key:4,class:"badge badge-outline-danger"},j={key:4},K={class:"ul-btn__text ml-1"},z=(0,s.Lk)("br",null,null,-1),H={key:0},Y=(0,s.Lk)("i",{class:"text-15 text-danger i-Back"},null,-1),J=[Y],Z={class:"px-3 py-2"},ee=(0,s.Lk)("i",{class:"i-Filter-2"},null,-1),te=(0,s.Lk)("i",{class:"i-Power-2"},null,-1),ae={class:"table-responsive"},se={class:"table table-hover table-bordered table-md"},le={scope:"col"},ie={scope:"col"},ne={scope:"col"},oe={scope:"col"},de={scope:"col"},re={key:0},ue={colspan:"5"},me={role:"group","aria-label":"Basic example",class:"btn-group"},ce=["onClick"],he=(0,s.Lk)("i",{class:"i-Billing"},null,-1),pe=[he],_e=["onClick"],be=(0,s.Lk)("i",{class:"i-Pen-2"},null,-1),ye=[be],ve=["onClick"],ge=(0,s.Lk)("i",{class:"i-Envelope"},null,-1),ke=[ge],fe=["onClick"],we=(0,s.Lk)("i",{class:"i-Speach-Bubble"},null,-1),Fe=[we],$e=["onClick"],Se=(0,s.Lk)("i",{class:"i-Close"},null,-1),Pe=[Se],Ce={class:"text-center mt-3 mb-3"},Le={class:"change_amount"},xe={key:0,class:"typo__p"},Te=(0,s.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),Ee=[Te],Re={key:1},De={class:"mt-3"},We=(0,s.Lk)("span",{class:"mr-3"},"Saved Credit Card Info For This Client ",-1),Me=(0,s.Lk)("span",null,[(0,s.Lk)("i",{class:"i-Two-Windows"}),(0,s.eW)(" New Credit Card ")],-1),Ve={class:"table table-hover mt-3"},Ae=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Last 4 digits"),(0,s.Lk)("th",null,"Type"),(0,s.Lk)("th",null,"Exp"),(0,s.Lk)("th",null,"Action")])],-1),Xe=(0,s.Lk)("span",null,[(0,s.Lk)("i",{class:"i-Drag-Up"}),(0,s.eW)(" Use This ")],-1),Ue={key:1,class:"i-Yes",style:{"font-size":"20px"}},Ge={key:2},Be={id:"payment-form"},Ie={for:"card-element",class:"leading-7 text-sm text-gray-600"},Ne=(0,s.Lk)("span",null,[(0,s.Lk)("i",{class:"i-Two-Windows"}),(0,s.eW)(" Use Saved Credit Card ")],-1),Oe=(0,s.Lk)("div",{id:"card-element"},null,-1),Qe=(0,s.Lk)("div",{id:"card-errors",class:"is-invalid",role:"alert"},null,-1),qe=(0,s.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1),je={key:0,class:"typo__p"},Ke=(0,s.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),ze=[Ke],He=["placeholder"],Ye=["placeholder"],Je=(0,s.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1),Ze={key:0,class:"typo__p"},et=(0,s.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),tt=[et],at={id:"invoice-POS"},st={style:{"max-width":"400px",margin:"0px auto"}},lt={class:"info"},it={class:"invoice_logo text-center mb-2"},nt=["src"],ot=(0,s.Lk)("br",null,null,-1),dt=(0,s.Lk)("br",null,null,-1),rt=(0,s.Lk)("br",null,null,-1),ut=(0,s.Lk)("br",null,null,-1),mt=(0,s.Lk)("br",null,null,-1),ct=(0,s.Lk)("br",null,null,-1),ht={colspan:"3"},pt=(0,s.Lk)("br",null,null,-1),_t={style:{"text-align":"right","vertical-align":"bottom"}},bt={style:{"margin-top":"10px"}},yt={colspan:"3",class:"total"},vt={style:{"text-align":"right"},class:"total"},gt={style:{"margin-top":"10px"}},kt={colspan:"3",class:"total"},ft={style:{"text-align":"right"},class:"total"},wt={style:{"margin-top":"10px"}},Ft={colspan:"3",class:"total"},$t={style:{"text-align":"right"},class:"total"},St={style:{"margin-top":"10px"}},Pt={colspan:"3",class:"total"},Ct={style:{"text-align":"right"},class:"total"},Lt={colspan:"3",class:"total"},xt={style:{"text-align":"right"},class:"total"},Tt={colspan:"3",class:"total"},Et={style:{"text-align":"right"},class:"total"},Rt={class:"change mt-3",style:{"font-size":"10px"}},Dt={style:{background:"#eee"}},Wt={style:{"text-align":"left"},colspan:"1"},Mt={style:{"text-align":"center"},colspan:"2"},Vt={style:{"text-align":"right"},colspan:"1"},At={style:{"text-align":"left"},colspan:"1"},Xt={style:{"text-align":"center"},colspan:"2"},Ut={style:{"text-align":"right"},colspan:"1"},Gt={id:"legalcopy",class:"ml-2"},Bt={class:"legal"},It={id:"bar"},Nt=(0,s.Lk)("i",{class:"i-Billing"},null,-1);function Ot(e,t,a,Y,he,be){const ge=(0,s.g2)("breadcumb"),we=(0,s.g2)("b-button"),Se=(0,s.g2)("vue-excel-xlsx"),Te=(0,s.g2)("router-link"),Ke=(0,s.g2)("b-dropdown-item"),et=(0,s.g2)("b-navbar-nav"),Ot=(0,s.g2)("b-dropdown"),Qt=(0,s.g2)("vue-good-table"),qt=(0,s.g2)("b-form-input"),jt=(0,s.g2)("b-form-group"),Kt=(0,s.g2)("b-col"),zt=(0,s.g2)("v-select"),Ht=(0,s.g2)("b-row"),Yt=(0,s.g2)("b-sidebar"),Jt=(0,s.g2)("b-modal"),Zt=(0,s.g2)("b-form-invalid-feedback"),ea=(0,s.g2)("validation-provider"),ta=(0,s.g2)("b-card"),aa=(0,s.g2)("b-form-textarea"),sa=(0,s.g2)("b-form"),la=(0,s.g2)("validation-observer"),ia=(0,s.g2)("barcode"),na=(0,s.gN)("b-toggle");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.bF)(ge,{page:e.$t("ListSales"),folder:e.$t("Sales")},null,8,["page","folder"]),he.isLoading?((0,s.uX)(),(0,s.CE)("div",o)):((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(Qt,{mode:"remote",columns:be.columns,totalRows:he.totalRows,rows:he.sales,onOnPageChange:be.onPageChange,onOnPerPageChange:be.onPerPageChange,onOnSortChange:be.onSortChange,onOnSearch:be.onSearch,"search-options":{placeholder:e.$t("Search_this_table"),enabled:!0},"select-options":{enabled:!0,clearSelectionText:""},onOnSelectedRowsChange:be.selectionChanged,"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:he.showDropdown?"tableOne table-hover vgt-table full-height":"tableOne table-hover vgt-table non-height"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",r,[(0,s.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t[0]||(t[0]=e=>be.delete_by_selected())},(0,l.v_)(e.$t("Del")),1)]),(0,s.Lk)("div",u,[(0,s.bo)(((0,s.uX)(),(0,s.Wv)(we,{variant:"outline-info ripple m-1",size:"sm"},{default:(0,s.k6)((()=>[m,(0,s.eW)(" "+(0,l.v_)(e.$t("Filter")),1)])),_:1})),[[na,void 0,void 0,{"sidebar-right":!0}]]),(0,s.bF)(we,{onClick:t[1]||(t[1]=e=>be.Sales_PDF()),size:"sm",variant:"outline-success ripple m-1"},{default:(0,s.k6)((()=>[c,(0,s.eW)(" PDF ")])),_:1}),(0,s.bF)(Se,{class:"btn btn-sm btn-outline-danger ripple m-1",data:he.sales,columns:be.columns,"file-name":"sales","file-type":"xlsx","sheet-name":"sales"},{default:(0,s.k6)((()=>[h,(0,s.eW)(" EXCEL ")])),_:1},8,["data","columns"]),e.currentUserPermissions&&e.currentUserPermissions.includes("Sales_add")?((0,s.uX)(),(0,s.Wv)(Te,{key:0,class:"btn-sm btn btn-primary ripple btn-icon m-1",to:"/app/sales/store"},{default:(0,s.k6)((()=>[p,(0,s.Lk)("span",_,(0,l.v_)(e.$t("Add")),1)])),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("template",b,["actions"==e.props.column.field?((0,s.uX)(),(0,s.CE)("span",y,[(0,s.Lk)("div",null,[(0,s.bF)(Ot,{id:"dropdown-right",variant:"link",text:"right align","toggle-class":"text-decoration-none",size:"lg",right:"","no-caret":""},{"button-content":(0,s.k6)((()=>[v,g,k])),default:(0,s.k6)((()=>[(0,s.bF)(et,null,{default:(0,s.k6)((()=>[(0,s.bF)(Ke,{title:"Show",to:"/app/sales/detail/"+e.props.row.id},{default:(0,s.k6)((()=>[f,(0,s.eW)(" "+(0,l.v_)(e.$t("SaleDetail")),1)])),_:1},8,["to"])])),_:1}),e.currentUserPermissions.includes("Sales_edit")&&"no"==e.props.row.sale_has_return?((0,s.uX)(),(0,s.Wv)(Ke,{key:0,title:"Edit",to:"/app/sales/edit/"+e.props.row.id},{default:(0,s.k6)((()=>[w,(0,s.eW)(" "+(0,l.v_)(e.$t("EditSale")),1)])),_:1},8,["to"])):(0,s.Q3)("",!0),e.currentUserPermissions.includes("Sale_Returns_add")&&"no"==e.props.row.sale_has_return?((0,s.uX)(),(0,s.Wv)(Ke,{key:1,title:"Sell Return",to:"/app/sales/sale_return/"+e.props.row.id},{default:(0,s.k6)((()=>[F,(0,s.eW)(" "+(0,l.v_)(e.$t("Sell_Return")),1)])),_:1},8,["to"])):(0,s.Q3)("",!0),e.currentUserPermissions.includes("Sale_Returns_add")&&"yes"==e.props.row.sale_has_return?((0,s.uX)(),(0,s.Wv)(Ke,{key:2,title:"Sell Return",to:"/app/sale_return/edit/"+e.props.row.salereturn_id+"/"+e.props.row.id},{default:(0,s.k6)((()=>[$,(0,s.eW)(" "+(0,l.v_)(e.$t("Sell_Return")),1)])),_:1},8,["to"])):(0,s.Q3)("",!0),e.currentUserPermissions.includes("payment_sales_view")?((0,s.uX)(),(0,s.Wv)(Ke,{key:3,onClick:t[2]||(t[2]=t=>be.Show_Payments(e.props.row.id,e.props.row))},{default:(0,s.k6)((()=>[S,(0,s.eW)(" "+(0,l.v_)(e.$t("ShowPayment")),1)])),_:1})):(0,s.Q3)("",!0),e.currentUserPermissions.includes("payment_sales_add")?((0,s.uX)(),(0,s.Wv)(Ke,{key:4,onClick:t[3]||(t[3]=t=>be.New_Payment(e.props.row))},{default:(0,s.k6)((()=>[P,(0,s.eW)(" "+(0,l.v_)(e.$t("AddPayment")),1)])),_:1})):(0,s.Q3)("",!0),e.currentUserPermissions.includes("shipment")?((0,s.uX)(),(0,s.Wv)(Ke,{key:5,onClick:t[4]||(t[4]=t=>be.Edit_Shipment(e.props.row.id))},{default:(0,s.k6)((()=>[C,(0,s.eW)(" "+(0,l.v_)(e.$t("Edit_Shipping")),1)])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(Ke,{title:"Invoice",onClick:t[5]||(t[5]=t=>be.Invoice_POS(e.props.row.id))},{default:(0,s.k6)((()=>[L,(0,s.eW)(" "+(0,l.v_)(e.$t("Invoice_POS")),1)])),_:1}),(0,s.bF)(Ke,{title:"PDF",onClick:t[6]||(t[6]=t=>be.Invoice_PDF(e.props.row,e.props.row.id))},{default:(0,s.k6)((()=>[x,(0,s.eW)(" "+(0,l.v_)(e.$t("DownloadPdf")),1)])),_:1}),(0,s.bF)(Ke,{title:"Email",onClick:t[7]||(t[7]=t=>be.Send_Email(e.props.row.id))},{default:(0,s.k6)((()=>[T,(0,s.eW)(" "+(0,l.v_)(e.$t("email_notification")),1)])),_:1}),(0,s.bF)(Ke,{title:"SMS",onClick:t[8]||(t[8]=t=>be.Sale_SMS(e.props.row.id))},{default:(0,s.k6)((()=>[E,(0,s.eW)(" "+(0,l.v_)(e.$t("sms_notification")),1)])),_:1}),e.currentUserPermissions.includes("Sales_delete")?((0,s.uX)(),(0,s.Wv)(Ke,{key:6,title:"Delete",onClick:t[9]||(t[9]=t=>be.Remove_Sale(e.props.row.id,e.props.row.sale_has_return))},{default:(0,s.k6)((()=>[R,(0,s.eW)(" "+(0,l.v_)(e.$t("DeleteSale")),1)])),_:1})):(0,s.Q3)("",!0)])),_:1})])])):"statut"==e.props.column.field?((0,s.uX)(),(0,s.CE)("div",D,["completed"==e.props.row.statut?((0,s.uX)(),(0,s.CE)("span",W,(0,l.v_)(e.$t("complete")),1)):"pending"==e.props.row.statut?((0,s.uX)(),(0,s.CE)("span",M,(0,l.v_)(e.$t("Pending")),1)):((0,s.uX)(),(0,s.CE)("span",V,(0,l.v_)(e.$t("Ordered")),1))])):"payment_status"==e.props.column.field?((0,s.uX)(),(0,s.CE)("div",A,["paid"==e.props.row.payment_status?((0,s.uX)(),(0,s.CE)("span",X,(0,l.v_)(e.$t("Paid")),1)):"partial"==e.props.row.payment_status?((0,s.uX)(),(0,s.CE)("span",U,(0,l.v_)(e.$t("partial")),1)):((0,s.uX)(),(0,s.CE)("span",G,(0,l.v_)(e.$t("Unpaid")),1))])):"shipping_status"==e.props.column.field?((0,s.uX)(),(0,s.CE)("div",B,["ordered"==e.props.row.shipping_status?((0,s.uX)(),(0,s.CE)("span",I,(0,l.v_)(e.$t("Ordered")),1)):"packed"==e.props.row.shipping_status?((0,s.uX)(),(0,s.CE)("span",N,(0,l.v_)(e.$t("Packed")),1)):"shipped"==e.props.row.shipping_status?((0,s.uX)(),(0,s.CE)("span",O,(0,l.v_)(e.$t("Shipped")),1)):"delivered"==e.props.row.shipping_status?((0,s.uX)(),(0,s.CE)("span",Q,(0,l.v_)(e.$t("Delivered")),1)):"cancelled"==e.props.row.shipping_status?((0,s.uX)(),(0,s.CE)("span",q,(0,l.v_)(e.$t("Cancelled")),1)):(0,s.Q3)("",!0)])):"Ref"==e.props.column.field?((0,s.uX)(),(0,s.CE)("div",j,[(0,s.bF)(Te,{to:"/app/sales/detail/"+e.props.row.id},{default:(0,s.k6)((()=>[(0,s.Lk)("span",K,(0,l.v_)(e.props.row.Ref),1)])),_:1},8,["to"]),(0,s.eW)(),z,"yes"==e.props.row.sale_has_return?((0,s.uX)(),(0,s.CE)("small",H,J)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options","onOnSelectedRowsChange","styleClass"])])),(0,s.bF)(Yt,{id:"sidebar-right",title:e.$t("Filter"),"bg-variant":"white",right:"",shadow:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Z,[(0,s.bF)(Ht,null,{default:(0,s.k6)((()=>[(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("date")},{default:(0,s.k6)((()=>[(0,s.bF)(qt,{type:"date",modelValue:he.Filter_date,"onUpdate:modelValue":t[10]||(t[10]=e=>he.Filter_date=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("Reference")},{default:(0,s.k6)((()=>[(0,s.bF)(qt,{label:"Reference",placeholder:e.$t("Reference"),modelValue:he.Filter_Ref,"onUpdate:modelValue":t[11]||(t[11]=e=>he.Filter_Ref=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("Customer")},{default:(0,s.k6)((()=>[(0,s.bF)(zt,{reduce:e=>e.value,placeholder:e.$t("Choose_Customer"),modelValue:he.Filter_Client,"onUpdate:modelValue":t[12]||(t[12]=e=>he.Filter_Client=e),options:he.customers.map((e=>({label:e.name,value:e.id})))},null,8,["reduce","placeholder","modelValue","options"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("warehouse")},{default:(0,s.k6)((()=>[(0,s.bF)(zt,{modelValue:he.Filter_warehouse,"onUpdate:modelValue":t[13]||(t[13]=e=>he.Filter_warehouse=e),reduce:e=>e.value,placeholder:e.$t("Choose_Warehouse"),options:he.warehouses.map((e=>({label:e.name,value:e.id})))},null,8,["modelValue","reduce","placeholder","options"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("Status")},{default:(0,s.k6)((()=>[(0,s.bF)(zt,{modelValue:he.Filter_status,"onUpdate:modelValue":t[14]||(t[14]=e=>he.Filter_status=e),reduce:e=>e.value,placeholder:e.$t("Choose_Status"),options:[{label:"completed",value:"completed"},{label:"Pending",value:"pending"},{label:"Ordered",value:"ordered"}]},null,8,["modelValue","reduce","placeholder"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("PaymentStatus")},{default:(0,s.k6)((()=>[(0,s.bF)(zt,{modelValue:he.Filter_Payment,"onUpdate:modelValue":t[15]||(t[15]=e=>he.Filter_Payment=e),reduce:e=>e.value,placeholder:e.$t("Choose_Status"),options:[{label:"Paid",value:"paid"},{label:"partial",value:"partial"},{label:"UnPaid",value:"unpaid"}]},null,8,["modelValue","reduce","placeholder"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("Shipping_status")},{default:(0,s.k6)((()=>[(0,s.bF)(zt,{modelValue:he.Filter_shipping,"onUpdate:modelValue":t[16]||(t[16]=e=>he.Filter_shipping=e),reduce:e=>e.value,placeholder:e.$t("Choose_Status"),options:[{label:"Ordered",value:"ordered"},{label:"Packed",value:"packed"},{label:"Shipped",value:"shipped"},{label:"Delivered",value:"delivered"},{label:"Cancelled",value:"cancelled"}]},null,8,["modelValue","reduce","placeholder"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"6",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(we,{onClick:t[17]||(t[17]=e=>be.Get_Sales(he.serverParams.page)),variant:"primary btn-block ripple m-1",size:"sm"},{default:(0,s.k6)((()=>[ee,(0,s.eW)(" "+(0,l.v_)(e.$t("Filter")),1)])),_:1})])),_:1}),(0,s.bF)(Kt,{md:"6",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(we,{onClick:t[18]||(t[18]=e=>be.Reset_Filter()),variant:"danger ripple btn-block m-1",size:"sm"},{default:(0,s.k6)((()=>[te,(0,s.eW)(" "+(0,l.v_)(e.$t("Reset")),1)])),_:1})])),_:1})])),_:1})])])),_:1},8,["title"]),(0,s.bF)(Jt,{"hide-footer":"",size:"lg",id:"Show_payment",title:e.$t("ShowPayment")},{default:(0,s.k6)((()=>[(0,s.bF)(Ht,null,{default:(0,s.k6)((()=>[(0,s.bF)(Kt,{lg:"12",md:"12",sm:"12",class:"mt-3"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ae,[(0,s.Lk)("table",se,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",le,(0,l.v_)(e.$t("date")),1),(0,s.Lk)("th",ie,(0,l.v_)(e.$t("Reference")),1),(0,s.Lk)("th",ne,(0,l.v_)(e.$t("Amount")),1),(0,s.Lk)("th",oe,(0,l.v_)(e.$t("PayeBy")),1),(0,s.Lk)("th",de,(0,l.v_)(e.$t("Action")),1)])]),(0,s.Lk)("tbody",null,[he.payments.length<=0?((0,s.uX)(),(0,s.CE)("tr",re,[(0,s.Lk)("td",ue,(0,l.v_)(e.$t("NodataAvailable")),1)])):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(he.payments,(t=>((0,s.uX)(),(0,s.CE)("tr",null,[(0,s.Lk)("td",null,(0,l.v_)(t.date),1),(0,s.Lk)("td",null,(0,l.v_)(t.Ref),1),(0,s.Lk)("td",null,(0,l.v_)(e.currentUser.currency)+" "+(0,l.v_)(be.formatNumber(t.montant,2)),1),(0,s.Lk)("td",null,(0,l.v_)(t.Reglement),1),(0,s.Lk)("td",null,[(0,s.Lk)("div",me,[(0,s.Lk)("span",{title:"Print",class:"btn btn-icon btn-info btn-sm",onClick:e=>be.Payment_Sale_PDF(t,t.id)},pe,8,ce),e.currentUserPermissions.includes("payment_sales_edit")?((0,s.uX)(),(0,s.CE)("span",{key:0,title:"Edit",class:"btn btn-icon btn-success btn-sm",onClick:e=>be.Edit_Payment(t)},ye,8,_e)):(0,s.Q3)("",!0),(0,s.Lk)("span",{title:"Email",class:"btn btn-icon btn-primary btn-sm",onClick:e=>be.Send_Email_Payment(t.id)},ke,8,ve),(0,s.Lk)("span",{title:"SMS",class:"btn btn-icon btn-secondary btn-sm",onClick:e=>be.Payment_Sale_SMS(t.id)},Fe,8,fe),e.currentUserPermissions.includes("payment_sales_delete")?((0,s.uX)(),(0,s.CE)("span",{key:1,title:"Delete",class:"btn btn-icon btn-danger btn-sm",onClick:e=>be.Remove_Payment(t.id)},Pe,8,$e)):(0,s.Q3)("",!0)])])])))),256))])])])])),_:1})])),_:1})])),_:1},8,["title"]),(0,s.bF)(la,{ref:"Add_payment"},{default:(0,s.k6)((()=>[(0,s.bF)(Jt,{"hide-footer":"",size:"lg",id:"Add_Payment",title:he.EditPaiementMode?e.$t("EditPayment"):e.$t("AddPayment")},{default:(0,s.k6)((()=>[(0,s.bF)(sa,{onSubmit:(0,i.D$)(be.Submit_Payment,["prevent"])},{default:(0,s.k6)((()=>[(0,s.Lk)("h1",Ce,(0,l.v_)(he.client_name),1),(0,s.bF)(Ht,null,{default:(0,s.k6)((()=>[(0,s.bF)(Kt,{lg:"4",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(ea,{name:"date",rules:{required:!0}},{default:(0,s.k6)((a=>[(0,s.bF)(jt,{label:e.$t("date")},{default:(0,s.k6)((()=>[(0,s.bF)(qt,{label:"date",state:be.getValidationState(a),"aria-describedby":"date-feedback",modelValue:he.payment.date,"onUpdate:modelValue":t[19]||(t[19]=e=>he.payment.date=e),type:"date"},null,8,["state","modelValue"]),(0,s.bF)(Zt,{id:"date-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(Kt,{lg:"4",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("Reference")},{default:(0,s.k6)((()=>[(0,s.bF)(qt,{disabled:"disabled",label:"Reference",placeholder:e.$t("Reference"),modelValue:he.payment.Ref,"onUpdate:modelValue":t[20]||(t[20]=e=>he.payment.Ref=e)},null,8,["placeholder","modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{lg:"4",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(ea,{name:"Payment choice",rules:{required:!0}},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{"slot-scope":"{ valid, errors }",label:e.$t("Paymentchoice")},{default:(0,s.k6)((()=>[(0,s.bF)(zt,{class:(0,l.C4)({"is-invalid":!!e.errors.length}),state:!e.errors[0]&&(!!e.valid||null),modelValue:he.payment.Reglement,"onUpdate:modelValue":t[21]||(t[21]=e=>he.payment.Reglement=e),onInput:be.Selected_PaymentMethod,disabled:he.EditPaiementMode,reduce:e=>e.value,placeholder:e.$t("PleaseSelect"),options:[{label:"Cash",value:"Cash"},{label:"credit card",value:"credit card"},{label:"TPE",value:"tpe"},{label:"cheque",value:"cheque"},{label:"Western Union",value:"Western Union"},{label:"bank transfer",value:"bank transfer"},{label:"other",value:"other"}]},null,8,["class","state","modelValue","onInput","disabled","reduce","placeholder"]),(0,s.bF)(Zt,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,s.bF)(Kt,{lg:"4",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(ea,{name:"Received Amount",rules:{required:!0,regex:/^\d*\.?\d*$/}},{default:(0,s.k6)((a=>[(0,s.bF)(jt,{label:e.$t("Received_Amount")},{default:(0,s.k6)((()=>[(0,s.bF)(qt,{onKeyup:t[22]||(t[22]=e=>be.Verified_Received_Amount(he.payment.received_amount)),label:"Received_Amount",placeholder:e.$t("Received_Amount"),modelValue:he.payment.received_amount,"onUpdate:modelValue":t[23]||(t[23]=e=>he.payment.received_amount=e),modelModifiers:{number:!0},state:be.getValidationState(a),"aria-describedby":"Received_Amount-feedback",disabled:he.EditPaiementMode&&"credit card"==he.payment.Reglement},null,8,["placeholder","modelValue","state","disabled"]),(0,s.bF)(Zt,{id:"Received_Amount-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(Kt,{lg:"4",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(ea,{name:"Amount",rules:{required:!0,regex:/^\d*\.?\d*$/}},{default:(0,s.k6)((a=>[(0,s.bF)(jt,{label:e.$t("Paying_Amount")},{default:(0,s.k6)((()=>[(0,s.bF)(qt,{onKeyup:t[24]||(t[24]=e=>be.Verified_paidAmount(he.payment.montant)),label:"Amount",placeholder:e.$t("Paying_Amount"),modelValue:he.payment.montant,"onUpdate:modelValue":t[25]||(t[25]=e=>he.payment.montant=e),modelModifiers:{number:!0},state:be.getValidationState(a),"aria-describedby":"Amount-feedback",disabled:he.EditPaiementMode&&"credit card"==he.payment.Reglement},null,8,["placeholder","modelValue","state","disabled"]),(0,s.bF)(Zt,{id:"Amount-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(Kt,{lg:"4",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("label",null,(0,l.v_)(e.$t("Change"))+" :",1),(0,s.Lk)("p",Le,(0,l.v_)(parseFloat(he.payment.received_amount-he.payment.montant).toFixed(2)),1)])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(ta,null,{default:(0,s.k6)((()=>[t[26]||((0,s.Vq)(-1),t[26]=he.submit_showing_credit_card?((0,s.uX)(),(0,s.CE)("div",xe,Ee)):(0,s.Q3)("",!0),(0,s.Vq)(1),t[26]),be.displaySavedPaymentMethods&&!he.submit_showing_credit_card?((0,s.uX)(),(0,s.CE)("div",Re,[(0,s.Lk)("div",De,[We,(0,s.bF)(we,{variant:"outline-info",onClick:t[27]||(t[27]=e=>be.show_new_credit_card())},{default:(0,s.k6)((()=>[Me])),_:1})]),(0,s.Lk)("table",Ve,[Ae,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(he.savedPaymentMethods,(e=>((0,s.uX)(),(0,s.CE)("tr",{class:(0,l.C4)({"bg-selected-card":be.isSelectedCard(e)})},[(0,s.Lk)("td",null,"**** "+(0,l.v_)(e.last4),1),(0,s.Lk)("td",null,(0,l.v_)(e.type),1),(0,s.Lk)("td",null,(0,l.v_)(e.exp),1),(0,s.Lk)("td",null,[be.isSelectedCard(e)||he.card_id==e.card_id?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(we,{key:0,variant:"outline-primary",onClick:t=>be.selectCard(e)},{default:(0,s.k6)((()=>[Xe])),_:2},1032,["onClick"])),be.isSelectedCard(e)||he.card_id==e.card_id?((0,s.uX)(),(0,s.CE)("i",Ue)):(0,s.Q3)("",!0)])],2)))),256))])])])):(0,s.Q3)("",!0),be.displayFormNewCard&&!he.submit_showing_credit_card?((0,s.uX)(),(0,s.CE)("div",Ge,[(0,s.Lk)("form",Be,[(0,s.Lk)("label",Ie,[(0,s.eW)((0,l.v_)(e.$t("Credit_Card_Info"))+" ",1),he.savedPaymentMethods.length>0?((0,s.uX)(),(0,s.Wv)(we,{key:0,variant:"outline-info",onClick:t[28]||(t[28]=e=>be.show_saved_credit_card())},{default:(0,s.k6)((()=>[Ne])),_:1})):(0,s.Q3)("",!0)]),Oe,Qe])])):(0,s.Q3)("",!0)])),_:1},512),[[i.aG,"credit card"==he.payment.Reglement&&!he.EditPaiementMode]])])),_:1}),(0,s.bF)(Kt,{lg:"12",md:"12",sm:"12",class:"mt-3"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("Note")},{default:(0,s.k6)((()=>[(0,s.bF)(aa,{id:"textarea",modelValue:he.payment.notes,"onUpdate:modelValue":t[29]||(t[29]=e=>he.payment.notes=e),rows:"3","max-rows":"6"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12",class:"mt-3"},{default:(0,s.k6)((()=>[(0,s.bF)(we,{variant:"primary",type:"submit",disabled:he.paymentProcessing},{default:(0,s.k6)((()=>[qe,(0,s.eW)(" "+(0,l.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[30]||((0,s.Vq)(-1),t[30]=he.paymentProcessing?((0,s.uX)(),(0,s.CE)("div",je,ze)):(0,s.Q3)("",!0),(0,s.Vq)(1),t[30])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])])),_:1},512),(0,s.bF)(la,{ref:"shipment_ref"},{default:(0,s.k6)((()=>[(0,s.bF)(Jt,{"hide-footer":"",size:"md",id:"modal_shipment",title:e.$t("Edit")},{default:(0,s.k6)((()=>[(0,s.bF)(sa,{onSubmit:(0,i.D$)(be.Submit_Shipment,["prevent"])},{default:(0,s.k6)((()=>[(0,s.bF)(Ht,null,{default:(0,s.k6)((()=>[(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(ea,{name:"Status",rules:{required:!0}},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{"slot-scope":"{ valid, errors }",label:e.$t("Status")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(zt,{class:(0,l.C4)({"is-invalid":!!e.errors.length}),state:!e.errors[0]&&(!!e.valid||null),modelValue:he.shipment.status,"onUpdate:modelValue":t[31]||(t[31]=e=>he.shipment.status=e),reduce:e=>e.value,placeholder:e.$t("Choose_Status"),options:[{label:"Ordered",value:"ordered"},{label:"Packed",value:"packed"},{label:"Shipped",value:"shipped"},{label:"Delivered",value:"delivered"},{label:"Cancelled",value:"cancelled"}]},null,8,["class","state","modelValue","reduce","placeholder"]),(0,s.bF)(Zt,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("delivered_to")},{default:(0,s.k6)((()=>[(0,s.bF)(qt,{label:"delivered_to",modelValue:he.shipment.delivered_to,"onUpdate:modelValue":t[32]||(t[32]=e=>he.shipment.delivered_to=e),placeholder:e.$t("delivered_to")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("Adress")},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[33]||(t[33]=e=>he.shipment.shipping_address=e),rows:"4",class:"form-control",placeholder:e.$t("Enter_Address")},null,8,He),[[i.Jo,he.shipment.shipping_address]])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(jt,{label:e.$t("Please_provide_any_details")},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[34]||(t[34]=e=>he.shipment.shipping_details=e),rows:"4",class:"form-control",placeholder:e.$t("Please_provide_any_details")},null,8,Ye),[[i.Jo,he.shipment.shipping_details]])])),_:1},8,["label"])])),_:1}),(0,s.bF)(Kt,{md:"12",class:"mt-3"},{default:(0,s.k6)((()=>[(0,s.bF)(we,{variant:"primary",type:"submit",disabled:he.Submit_Processing_shipment},{default:(0,s.k6)((()=>[Je,(0,s.eW)(" "+(0,l.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[35]||((0,s.Vq)(-1),t[35]=he.Submit_Processing_shipment?((0,s.uX)(),(0,s.CE)("div",Ze,tt)):(0,s.Q3)("",!0),(0,s.Vq)(1),t[35])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])])),_:1},512),(0,s.bF)(Jt,{"hide-footer":"",size:"sm",scrollable:"",id:"Show_invoice",title:e.$t("Invoice_POS")},{default:(0,s.k6)((()=>[(0,s.Lk)("div",at,[(0,s.Lk)("div",st,[(0,s.Lk)("div",lt,[(0,s.Lk)("div",it,[(0,s.Lk)("img",{src:"/images/"+he.invoice_pos.setting.logo,alt:"",width:"60",height:"60"},null,8,nt)]),(0,s.Lk)("p",null,[(0,s.Lk)("span",null,[(0,s.eW)((0,l.v_)(e.$t("date"))+" : "+(0,l.v_)(he.invoice_pos.sale.date)+" ",1),ot]),(0,s.bo)((0,s.Lk)("span",null,[(0,s.eW)((0,l.v_)(e.$t("Adress"))+" : "+(0,l.v_)(he.invoice_pos.setting.CompanyAdress)+" ",1),dt],512),[[i.aG,he.pos_settings.show_address]]),(0,s.bo)((0,s.Lk)("span",null,[(0,s.eW)((0,l.v_)(e.$t("Email"))+" : "+(0,l.v_)(he.invoice_pos.setting.email)+" ",1),rt],512),[[i.aG,he.pos_settings.show_email]]),(0,s.bo)((0,s.Lk)("span",null,[(0,s.eW)((0,l.v_)(e.$t("Phone"))+" : "+(0,l.v_)(he.invoice_pos.setting.CompanyPhone)+" ",1),ut],512),[[i.aG,he.pos_settings.show_phone]]),(0,s.bo)((0,s.Lk)("span",null,[(0,s.eW)((0,l.v_)(e.$t("Customer"))+" : "+(0,l.v_)(he.invoice_pos.sale.client_name)+" ",1),mt],512),[[i.aG,he.pos_settings.show_customer]]),(0,s.bo)((0,s.Lk)("span",null,[(0,s.eW)((0,l.v_)(e.$t("warehouse"))+" : "+(0,l.v_)(he.invoice_pos.sale.warehouse_name)+" ",1),ct],512),[[i.aG,he.pos_settings.show_Warehouse]])])]),(0,s.Lk)("table",null,[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(he.invoice_pos.details,(t=>((0,s.uX)(),(0,s.CE)("tr",null,[(0,s.Lk)("td",ht,[(0,s.eW)((0,l.v_)(t.name)+" ",1),(0,s.bo)((0,s.Lk)("br",null,null,512),[[i.aG,t.is_imei&&null!==t.imei_number]]),(0,s.bo)((0,s.Lk)("span",null,(0,l.v_)(e.$t("IMEI_SN"))+" : "+(0,l.v_)(t.imei_number),513),[[i.aG,t.is_imei&&null!==t.imei_number]]),pt,(0,s.Lk)("span",null,(0,l.v_)(be.formatNumber(t.quantity,2))+" "+(0,l.v_)(t.unit_sale)+" x "+(0,l.v_)(be.formatNumber(t.total/t.quantity,2)),1)]),(0,s.Lk)("td",_t,(0,l.v_)(be.formatNumber(t.total,2)),1)])))),256)),(0,s.bo)((0,s.Lk)("tr",bt,[(0,s.Lk)("td",yt,(0,l.v_)(e.$t("OrderTax")),1),(0,s.Lk)("td",vt,(0,l.v_)(he.invoice_pos.symbol)+" "+(0,l.v_)(be.formatNumber(he.invoice_pos.sale.taxe,2))+" ("+(0,l.v_)(be.formatNumber(he.invoice_pos.sale.tax_rate,2))+" %)",1)],512),[[i.aG,he.pos_settings.show_discount]]),(0,s.bo)((0,s.Lk)("tr",gt,[(0,s.Lk)("td",kt,(0,l.v_)(e.$t("Discount")),1),(0,s.Lk)("td",ft,(0,l.v_)(he.invoice_pos.symbol)+" "+(0,l.v_)(be.formatNumber(he.invoice_pos.sale.discount,2)),1)],512),[[i.aG,he.pos_settings.show_discount]]),(0,s.bo)((0,s.Lk)("tr",wt,[(0,s.Lk)("td",Ft,(0,l.v_)(e.$t("Shipping")),1),(0,s.Lk)("td",$t,(0,l.v_)(he.invoice_pos.symbol)+" "+(0,l.v_)(be.formatNumber(he.invoice_pos.sale.shipping,2)),1)],512),[[i.aG,he.pos_settings.show_discount]]),(0,s.Lk)("tr",St,[(0,s.Lk)("td",Pt,(0,l.v_)(e.$t("Total")),1),(0,s.Lk)("td",Ct,(0,l.v_)(he.invoice_pos.symbol)+" "+(0,l.v_)(be.formatNumber(he.invoice_pos.sale.GrandTotal,2)),1)]),(0,s.bo)((0,s.Lk)("tr",null,[(0,s.Lk)("td",Lt,(0,l.v_)(e.$t("Paid")),1),(0,s.Lk)("td",xt,(0,l.v_)(he.invoice_pos.symbol)+" "+(0,l.v_)(be.formatNumber(he.invoice_pos.sale.paid_amount,2)),1)],512),[[i.aG,he.invoice_pos.sale.paid_amount<he.invoice_pos.sale.GrandTotal]]),(0,s.bo)((0,s.Lk)("tr",null,[(0,s.Lk)("td",Tt,(0,l.v_)(e.$t("Due")),1),(0,s.Lk)("td",Et,(0,l.v_)(he.invoice_pos.symbol)+" "+(0,l.v_)(parseFloat(he.invoice_pos.sale.GrandTotal-he.invoice_pos.sale.paid_amount).toFixed(2)),1)],512),[[i.aG,he.invoice_pos.sale.paid_amount<he.invoice_pos.sale.GrandTotal]])])]),(0,s.bo)((0,s.Lk)("table",Rt,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",Dt,[(0,s.Lk)("th",Wt,(0,l.v_)(e.$t("PayeBy"))+":",1),(0,s.Lk)("th",Mt,(0,l.v_)(e.$t("Amount"))+":",1),(0,s.Lk)("th",Vt,(0,l.v_)(e.$t("Change"))+":",1)])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(he.payments,(e=>((0,s.uX)(),(0,s.CE)("tr",null,[(0,s.Lk)("td",At,(0,l.v_)(e.Reglement),1),(0,s.Lk)("td",Xt,(0,l.v_)(be.formatNumber(e.montant,2)),1),(0,s.Lk)("td",Ut,(0,l.v_)(be.formatNumber(e.change,2)),1)])))),256))])],512),[[i.aG,he.invoice_pos.sale.paid_amount>0]]),(0,s.Lk)("div",Gt,[(0,s.bo)((0,s.Lk)("p",Bt,[(0,s.Lk)("strong",null,(0,l.v_)(he.pos_settings.note_customer),1)],512),[[i.aG,he.pos_settings.show_note]]),(0,s.bo)((0,s.Lk)("div",It,[(0,s.bF)(ia,{class:"barcode",format:he.barcodeFormat,value:he.invoice_pos.sale.Ref,textmargin:"0",fontoptions:"bold",fontSize:"15",height:"25",width:"1"},null,8,["format","value"])],512),[[i.aG,he.pos_settings.show_barcode]])])])]),(0,s.Lk)("button",{onClick:t[36]||(t[36]=e=>be.print_it()),class:"btn btn-outline-primary"},[Nt,(0,s.eW)(" "+(0,l.v_)(e.$t("print")),1)])])),_:1},8,["title"])])}var Qt=a(95353),qt=a(5947),jt=a.n(qt),Kt=a(44323),zt=(a(13246),a(62414)),Ht=a(470),Yt=a.n(Ht),Jt=a(37427);const Zt={components:{vueEasyPrint:zt.A,barcode:Yt()},metaInfo:{title:"Sales"},data(){return{stripe_key:"",stripe:{},cardElement:{},pos_settings:{},paymentProcessing:!1,Submit_Processing_shipment:!1,savedPaymentMethods:[],hasSavedPaymentMethod:!1,useSavedPaymentMethod:!1,selectedCard:null,card_id:"",is_new_credit_card:!1,submit_showing_credit_card:!1,isLoading:!0,serverParams:{sort:{field:"id",type:"desc"},page:1,perPage:10},selectedIds:[],search:"",totalRows:"",barcodeFormat:"CODE128",showDropdown:!1,EditPaiementMode:!1,Filter_Client:"",Filter_Ref:"",Filter_date:"",Filter_status:"",Filter_Payment:"",Filter_warehouse:"",Filter_shipping:"",customers:[],warehouses:[],shipment:{},sales:[],sale_due:"",due:0,client_name:"",invoice_pos:{sale:{Ref:"",client_name:"",warehouse_name:"",discount:"",taxe:"",tax_rate:"",shipping:"",GrandTotal:"",paid_amount:""},details:[],setting:{logo:"",CompanyName:"",CompanyAdress:"",email:"",CompanyPhone:""}},payments:[],payment:{},Sale_id:"",limit:"10",sale:{},email:{to:"",subject:"",message:"",client_name:"",Sale_Ref:""},emailPayment:{id:"",to:"",subject:"",message:"",client_name:"",Ref:""}}},mounted(){this.$root.$on("bv::dropdown::show",(e=>{this.showDropdown=!0})),this.$root.$on("bv::dropdown::hide",(e=>{this.showDropdown=!1}))},computed:{...(0,Qt.L8)(["currentUserPermissions","currentUser"]),displaySavedPaymentMethods(){return!!this.hasSavedPaymentMethod},displayFormNewCard(){return!this.useSavedPaymentMethod},isSelectedCard(){return e=>this.selectedCard===e},columns(){return[{label:this.$t("date"),field:"date",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Reference"),field:"Ref",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Created_by"),field:"created_by",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Customer"),field:"client_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("warehouse"),field:"warehouse_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Status"),field:"statut",html:!0,tdClass:"text-left",thClass:"text-left"},{label:this.$t("Total"),field:"GrandTotal",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Paid"),field:"paid_amount",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("Due"),field:"due",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("PaymentStatus"),field:"payment_status",html:!0,tdClass:"text-left",thClass:"text-left"},{label:this.$t("Shipping_status"),field:"shipping_status",html:!0,tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{async Selected_PaymentMethod(e){"credit card"===e?(this.savedPaymentMethods=[],this.submit_showing_credit_card=!0,this.selectedCard=null,this.card_id="",await axios.get(`/retrieve-customer?customerId=${this.sale.client_id}`).then((e=>{this.savedPaymentMethods=e.data.data,this.card_id=e.data.customer_default_source,this.hasSavedPaymentMethod=!0,this.useSavedPaymentMethod=!0,this.is_new_credit_card=!1,this.submit_showing_credit_card=!1})).catch((e=>{this.hasSavedPaymentMethod=!1,this.useSavedPaymentMethod=!1,this.is_new_credit_card=!0,this.card_id="",setTimeout((()=>{this.loadStripe_payment()}),1e3),this.submit_showing_credit_card=!1}))):(this.hasSavedPaymentMethod=!1,this.useSavedPaymentMethod=!1,this.is_new_credit_card=!1)},show_saved_credit_card(){this.hasSavedPaymentMethod=!0,this.useSavedPaymentMethod=!0,this.is_new_credit_card=!1,this.Selected_PaymentMethod("credit card")},show_new_credit_card(){this.selectedCard=null,this.card_id="",this.useSavedPaymentMethod=!1,this.hasSavedPaymentMethod=!1,this.is_new_credit_card=!0,setTimeout((()=>{this.loadStripe_payment()}),500)},selectCard(e){this.selectedCard=e,this.card_id=e.card_id},async loadStripe_payment(){this.stripe=await(0,Jt.c)(`${this.stripe_key}`);const e=this.stripe.elements();this.cardElement=e.create("card",{classes:{base:"bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 p-3 leading-8 transition-colors duration-200 ease-in-out"}}),this.cardElement.mount("#card-element")},print_it(){var e=document.getElementById("invoice-POS").innerHTML,t=window.open("","","height=500, width=500");t.document.write('<link rel="stylesheet" href="/css/pos_print.css"><html>'),t.document.write("<body >"),t.document.write(e),t.document.write("</body></html>"),t.document.close(),setTimeout((()=>{t.print()}),1e3)},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Sales(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Sales(1))},selectionChanged({selectedRows:e}){this.selectedIds=[],e.forEach(((e,t)=>{this.selectedIds.push(e.id)}))},onSortChange(e){let t="";t="client_name"==e[0].field?"client_id":"warehouse_name"==e[0].field?"warehouse_id":"created_by"==e[0].field?"user_id":e[0].field,this.updateParams({sort:{type:e[0].type,field:t}}),this.Get_Sales(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_Sales(this.serverParams.page)},Verified_paidAmount(){isNaN(this.payment.montant)?this.payment.montant=0:this.payment.montant>this.payment.received_amount?(this.makeToast("warning",this.$t("Paying_amount_is_greater_than_Received_amount"),this.$t("Warning")),this.payment.montant=0):this.payment.montant>this.due&&(this.makeToast("warning",this.$t("Paying_amount_is_greater_than_Grand_Total"),this.$t("Warning")),this.payment.montant=0)},Verified_Received_Amount(){isNaN(this.payment.received_amount)&&(this.payment.received_amount=0)},Submit_Payment(){this.$refs.Add_payment.validate().then((e=>{e?this.payment.montant>this.payment.received_amount?(this.makeToast("warning",this.$t("Paying_amount_is_greater_than_Received_amount"),this.$t("Warning")),this.payment.received_amount=0):this.payment.montant>this.due?(this.makeToast("warning",this.$t("Paying_amount_is_greater_than_Grand_Total"),this.$t("Warning")),this.payment.montant=0):this.EditPaiementMode?this.Update_Payment():this.Create_Payment():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},getValidationState({dirty:e,validated:t,valid:a=null}){return e||t?a:null},makeToast(e,t,a){this.$root.$bvToast.toast(t,{title:a,variant:e,solid:!0})},Reset_Filter(){this.search="",this.Filter_Client="",this.Filter_status="",this.Filter_Payment="",this.Filter_shipping="",this.Filter_Ref="",this.Filter_date="",this.Filter_warehouse="",this.Get_Sales(this.serverParams.page)},formatNumber(e,t){const a=("string"===typeof e?e:e.toString()).split(".");if(t<=0)return a[0];let s=a[1]||"";if(s.length>t)return`${a[0]}.${s.substr(0,t)}`;while(s.length<t)s+="0";return`${a[0]}.${s}`},Sales_PDF(){var e=this;let t=new Kt["default"]("p","pt"),a=[{title:"Ref",dataKey:"Ref"},{title:"Client",dataKey:"client_name"},{title:"Warehouse",dataKey:"warehouse_name"},{title:"Created_by",dataKey:"created_by"},{title:"Status",dataKey:"statut"},{title:"Total",dataKey:"GrandTotal"},{title:"Paid",dataKey:"paid_amount"},{title:"Due",dataKey:"due"},{title:"Status Payment",dataKey:"payment_status"},{title:"Shipping Status",dataKey:"shipping_status"}];t.autoTable(a,e.sales),t.text("Sale List",40,25),t.save("Sale_List.pdf")},Invoice_POS(e){jt().start(),jt().set(.1),axios.get("sales_print_invoice/"+e).then((e=>{this.invoice_pos=e.data,this.payments=e.data.payments,this.pos_settings=e.data.pos_settings,setTimeout((()=>{jt().done(),this.$bvModal.show("Show_invoice")}),500),e.data.pos_settings.is_printable&&setTimeout((()=>this.print_it()),1e3)})).catch((()=>{setTimeout((()=>jt().done()),500)}))},Invoice_PDF(e,t){jt().start(),jt().set(.1),axios.get("sale_pdf/"+t,{responseType:"blob",headers:{"Content-Type":"application/json"}}).then((t=>{const a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=a,s.setAttribute("download","Sale-"+e.Ref+".pdf"),document.body.appendChild(s),s.click(),setTimeout((()=>jt().done()),500)})).catch((()=>{setTimeout((()=>jt().done()),500)}))},Payment_Sale_PDF(e,t){jt().start(),jt().set(.1),axios.get("payment_sale_pdf/"+t,{responseType:"blob",headers:{"Content-Type":"application/json"}}).then((t=>{const a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=a,s.setAttribute("download","Payment-"+e.Ref+".pdf"),document.body.appendChild(s),s.click(),setTimeout((()=>jt().done()),500)})).catch((()=>{setTimeout((()=>jt().done()),500)}))},setToStrings(){null===this.Filter_Client?this.Filter_Client="":null===this.Filter_warehouse?this.Filter_warehouse="":null===this.Filter_status?this.Filter_status="":null===this.Filter_Payment?this.Filter_Payment="":null===this.Filter_shipping&&(this.Filter_shipping="")},Get_Sales(e){jt().start(),jt().set(.1),this.setToStrings(),axios.get("sales?page="+e+"&Ref="+this.Filter_Ref+"&date="+this.Filter_date+"&client_id="+this.Filter_Client+"&statut="+this.Filter_status+"&warehouse_id="+this.Filter_warehouse+"&payment_statut="+this.Filter_Payment+"&shipping_status="+this.Filter_shipping+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.sales=e.data.sales,this.customers=e.data.customers,this.warehouses=e.data.warehouses,this.totalRows=e.data.totalRows,this.stripe_key=e.data.stripe_key,jt().done(),this.isLoading=!1})).catch((e=>{jt().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},Payment_Sale_SMS(e){jt().start(),jt().set(.1),axios.post("payment_sale_send_sms",{id:e}).then((e=>{setTimeout((()=>jt().done()),500),this.makeToast("success",this.$t("Send_SMS"),this.$t("Success"))})).catch((e=>{setTimeout((()=>jt().done()),500),this.makeToast("danger",this.$t("sms_config_invalid"),this.$t("Failed"))}))},Send_Email_Payment(e){jt().start(),jt().set(.1),axios.post("payment_sale_send_email",{id:e}).then((e=>{setTimeout((()=>jt().done()),500),this.makeToast("success",this.$t("Send.TitleEmail"),this.$t("Success"))})).catch((e=>{setTimeout((()=>jt().done()),500),this.makeToast("danger",this.$t("SMTPIncorrect"),this.$t("Failed"))}))},Send_Email(e){jt().start(),jt().set(.1),axios.post("sales_send_email",{id:e}).then((e=>{setTimeout((()=>jt().done()),500),this.makeToast("success",this.$t("Send.TitleEmail"),this.$t("Success"))})).catch((e=>{setTimeout((()=>jt().done()),500),this.makeToast("danger",this.$t("SMTPIncorrect"),this.$t("Failed"))}))},Sale_SMS(e){jt().start(),jt().set(.1),axios.post("sales_send_sms",{id:e}).then((e=>{setTimeout((()=>jt().done()),500),this.makeToast("success",this.$t("Send_SMS"),this.$t("Success"))})).catch((e=>{setTimeout((()=>jt().done()),500),this.makeToast("danger",this.$t("sms_config_invalid"),this.$t("Failed"))}))},Number_Order_Payment(){axios.get("payment_sale_get_number").then((({data:e})=>this.payment.Ref=e))},New_Payment(e){"paid"==e.payment_status?this.$swal({icon:"error",title:"Oops...",text:this.$t("PaymentComplete")}):(jt().start(),jt().set(.1),this.reset_form_payment(),this.EditPaiementMode=!1,this.sale=e,this.payment.date=(new Date).toISOString().slice(0,10),this.Number_Order_Payment(),this.payment.montant=e.due,this.payment.Reglement="Cash",this.payment.received_amount=e.due,this.due=parseFloat(e.due),this.client_name=e.client_name,setTimeout((()=>{jt().done(),this.$bvModal.show("Add_Payment")}),500))},Edit_Payment(e){jt().start(),jt().set(.1),this.reset_form_payment(),this.EditPaiementMode=!0,this.payment.id=e.id,this.payment.Ref=e.Ref,this.payment.Reglement=e.Reglement,this.payment.date=e.date,this.payment.change=e.change,this.payment.montant=e.montant,this.payment.received_amount=parseFloat(e.montant+e.change).toFixed(2),this.payment.notes=e.notes,this.due=parseFloat(this.sale_due)+e.montant,setTimeout((()=>{jt().done(),this.$bvModal.show("Add_Payment")}),1e3)},Show_Payments(e,t){jt().start(),jt().set(.1),this.reset_form_payment(),this.Sale_id=e,this.sale=t,this.client_name=t.client_name,this.Get_Payments(e)},async processPayment_Create(){const{token:e,error:t}=await this.stripe.createToken(this.cardElement);t?(this.paymentProcessing=!1,jt().done(),this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed"))):axios.post("payment_sale",{sale_id:this.sale.id,client_email:this.sale.client_email,client_id:this.sale.client_id,date:this.payment.date,montant:parseFloat(this.payment.montant).toFixed(2),received_amount:parseFloat(this.payment.received_amount).toFixed(2),change:parseFloat(this.payment.received_amount-this.payment.montant).toFixed(2),Reglement:this.payment.Reglement,notes:this.payment.notes,token:e.id,is_new_credit_card:this.is_new_credit_card,selectedCard:this.selectedCard,card_id:this.card_id}).then((e=>{this.paymentProcessing=!1,Fire.$emit("Create_Facture_sale"),this.makeToast("success",this.$t("Create.TitlePayment"),this.$t("Success"))})).catch((e=>{this.paymentProcessing=!1,jt().done(),this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed"))}))},Create_Payment(){this.paymentProcessing=!0,jt().start(),jt().set(.1),"credit card"==this.payment.Reglement&&this.is_new_credit_card?""!=this.stripe_key?this.processPayment_Create():(this.makeToast("danger",this.$t("credit_card_account_not_available"),this.$t("Failed")),jt().done(),this.paymentProcessing=!1):axios.post("payment_sale",{sale_id:this.sale.id,date:this.payment.date,montant:parseFloat(this.payment.montant).toFixed(2),received_amount:parseFloat(this.payment.received_amount).toFixed(2),change:parseFloat(this.payment.received_amount-this.payment.montant).toFixed(2),Reglement:this.payment.Reglement,notes:this.payment.notes,is_new_credit_card:this.is_new_credit_card,selectedCard:this.selectedCard,card_id:this.card_id}).then((e=>{this.paymentProcessing=!1,Fire.$emit("Create_Facture_sale"),this.makeToast("success",this.$t("Create.TitlePayment"),this.$t("Success"))})).catch((e=>{this.paymentProcessing=!1,jt().done()}))},Update_Payment(){this.paymentProcessing=!0,jt().start(),jt().set(.1),axios.put("payment_sale/"+this.payment.id,{sale_id:this.sale.id,date:this.payment.date,montant:parseFloat(this.payment.montant).toFixed(2),received_amount:parseFloat(this.payment.received_amount).toFixed(2),change:parseFloat(this.payment.received_amount-this.payment.montant).toFixed(2),Reglement:this.payment.Reglement,notes:this.payment.notes}).then((e=>{this.paymentProcessing=!1,Fire.$emit("Update_Facture_sale"),this.makeToast("success",this.$t("Update.TitlePayment"),this.$t("Success"))})).catch((e=>{this.paymentProcessing=!1,jt().done()}))},Remove_Payment(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&(jt().start(),jt().set(.1),axios.delete("payment_sale/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.PaymentDeleted"),"success"),Fire.$emit("Delete_Facture_sale")})).catch((()=>{setTimeout((()=>jt().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))},Get_Payments(e){axios.get("get_payments_by_sale/"+e).then((e=>{this.payments=e.data.payments,this.sale_due=e.data.due,setTimeout((()=>{jt().done(),this.$bvModal.show("Show_payment")}),500)})).catch((()=>{setTimeout((()=>jt().done()),500)}))},reset_form_payment(){this.due=0,this.payment={id:"",Sale_id:"",date:"",Ref:"",montant:"",received_amount:"",Reglement:"",notes:""}},Get_shipment_by_sale(e){axios.get("/shipments/"+e).then((e=>{this.shipment=e.data.shipment,setTimeout((()=>{jt().done(),this.$bvModal.show("modal_shipment")}),1e3)})).catch((e=>{jt().done()}))},Submit_Shipment(){this.$refs.shipment_ref.validate().then((e=>{e?this.Update_Shipment():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},Update_Shipment(){var e=this;e.Submit_Processing_shipment=!0,axios.post("shipments",{Ref:e.shipment.Ref,sale_id:e.shipment.sale_id,shipping_address:e.shipment.shipping_address,delivered_to:e.shipment.delivered_to,shipping_details:e.shipment.shipping_details,status:e.shipment.status}).then((t=>{this.makeToast("success",this.$t("Updated_in_successfully"),this.$t("Success")),Fire.$emit("event_update_shipment"),e.Submit_Processing_shipment=!1})).catch((t=>{this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed")),e.Submit_Processing_shipment=!1}))},Edit_Shipment(e){jt().start(),jt().set(.1),this.reset_Form_shipment(),this.Get_shipment_by_sale(e)},reset_Form_shipment(){this.shipment={id:"",date:"",Ref:"",sale_id:"",attachment:"",delivered_to:"",shipping_address:"",status:"",shipping_details:""}},Remove_Sale(e,t){"yes"==t?this.makeToast("danger",this.$t("Return_exist_for_the_Transaction"),this.$t("Failed")):this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&(jt().start(),jt().set(.1),axios.delete("sales/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.SaleDeleted"),"success"),Fire.$emit("Delete_sale")})).catch((()=>{setTimeout((()=>jt().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))},delete_by_selected(){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&(jt().start(),jt().set(.1),axios.post("sales_delete_by_selection",{selectedIds:this.selectedIds}).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.SaleDeleted"),"success"),Fire.$emit("Delete_sale")})).catch((()=>{setTimeout((()=>jt().done()),500),this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")})))}))}},created(){this.Get_Sales(1),Fire.$on("Create_Facture_sale",(()=>{setTimeout((()=>{this.Get_Sales(this.serverParams.page),jt().done(),this.$bvModal.hide("Add_Payment")}),800)})),Fire.$on("Update_Facture_sale",(()=>{setTimeout((()=>{jt().done(),this.$bvModal.hide("Add_Payment"),this.$bvModal.hide("Show_payment"),this.Get_Sales(this.serverParams.page)}),800)})),Fire.$on("Delete_Facture_sale",(()=>{setTimeout((()=>{jt().done(),this.$bvModal.hide("Show_payment"),this.Get_Sales(this.serverParams.page)}),800)})),Fire.$on("Delete_sale",(()=>{setTimeout((()=>{this.Get_Sales(this.serverParams.page),jt().done()}),800)})),Fire.$on("event_update_shipment",(()=>{setTimeout((()=>{this.Get_Sales(this.serverParams.page),this.$bvModal.hide("modal_shipment")}),800)}))}};var ea=a(66262);const ta=(0,ea.A)(Zt,[["render",Ot]]),aa=ta}}]);
//# sourceMappingURL=index_sales.b88b7194.js.map