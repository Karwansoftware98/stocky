"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[6380],{85395:(t,e,a)=>{a.r(e),a.d(e,{default:()=>y});var s=a(20641),o=a(90033);const l={class:"main-content"},r={key:0,class:"loading_page spinner spinner-primary mr-3"},n={slot:"table-actions",class:"mt-2 mb-3"},d=(0,s.Lk)("i",{class:"i-File-Copy"},null,-1),i=(0,s.Lk)("i",{class:"i-File-Excel"},null,-1),c={slot:"table-row","slot-scope":"props"},p={key:0};function u(t,e,a,u,g,h){const m=(0,s.g2)("breadcumb"),_=(0,s.g2)("date-range-picker"),b=(0,s.g2)("b-col"),f=(0,s.g2)("b-button"),P=(0,s.g2)("vue-excel-xlsx"),D=(0,s.g2)("vue-good-table");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(m,{page:t.$t("Top_Selling_Products"),folder:t.$t("Reports")},null,8,["page","folder"]),g.isLoading?((0,s.uX)(),(0,s.CE)("div",r)):(0,s.Q3)("",!0),g.isLoading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(b,{key:1,md:"12",class:"text-center"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{modelValue:g.dateRange,"onUpdate:modelValue":e[0]||(e[0]=t=>g.dateRange=t),startDate:g.startDate,endDate:g.endDate,onUpdate:h.Submit_filter_dateRange,"locale-data":g.locale},{input:(0,s.k6)((t=>[(0,s.eW)((0,o.v_)(t.startDate.toJSON().slice(0,10))+" - "+(0,o.v_)(t.endDate.toJSON().slice(0,10)),1)])),_:1},8,["modelValue","startDate","endDate","onUpdate","locale-data"])])),_:1})),g.isLoading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(D,{key:2,mode:"remote",columns:h.columns,totalRows:g.totalRows,rows:g.products,onOnPageChange:h.onPageChange,onOnPerPageChange:h.onPerPageChange,onOnSearch:h.onSearch_products,"search-options":{placeholder:t.$t("Search_this_table"),enabled:!0},"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:"mt-5 table-hover tableOne vgt-table"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.bF)(f,{onClick:e[1]||(e[1]=t=>h.export_PDF()),size:"sm",variant:"outline-success ripple m-1"},{default:(0,s.k6)((()=>[d,(0,s.eW)(" PDF ")])),_:1}),(0,s.bF)(P,{class:"btn btn-sm btn-outline-danger ripple m-1",data:g.products,columns:h.columns,"file-name":"product_report","file-type":"xlsx","sheet-name":"product_report"},{default:(0,s.k6)((()=>[i,(0,s.eW)(" EXCEL ")])),_:1},8,["data","columns"])]),(0,s.Lk)("template",c,["total"==t.props.column.field?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.Lk)("span",null,(0,o.v_)(t.currentUser.currency)+" "+(0,o.v_)(t.props.row.total),1)])):(0,s.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSearch","search-options"]))])}var g=a(5947),h=a.n(g),m=a(95353),_=a(32464),b=a.n(_),f=a(95093),P=a.n(f),D=a(44323);a(13246);const C={metaInfo:{title:"Top Selling Products"},components:{DateRangePicker:b()},data(){return{isLoading:!0,serverParams:{sort:{field:"id",type:"desc"},page:1,perPage:10},limit:"10",totalRows:"",products:[],search_products:"",today_mode:!0,startDate:"",endDate:"",dateRange:{startDate:"",endDate:""},locale:{Label:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:P().weekdaysMin(),monthNames:P().monthsShort(),firstDay:1}}},computed:{...(0,m.L8)(["currentUser"]),columns(){return[{label:this.$t("ProductCode"),field:"code",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("ProductName"),field:"name",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("TotalSales"),field:"total_sales",tdClass:"text-left",thClass:"text-left",sortable:!1},{label:this.$t("TotalAmount"),field:"total",tdClass:"text-left",thClass:"text-left",sortable:!1}]}},methods:{onSearch_products(t){this.search_products=t.searchTerm,this.Get_top_products(1)},export_PDF(){var t=this;let e=new D["default"]("p","pt"),a=[{title:"Product Code",dataKey:"code"},{title:"Product Name",dataKey:"name"},{title:"Total Sales",dataKey:"total_sales"},{title:"Total Amount",dataKey:"total"}];e.autoTable(a,t.products),e.text("Top Selling Products",40,25),e.save("Top_Selling_Products.pdf")},updateParams(t){this.serverParams=Object.assign({},this.serverParams,t)},onPageChange({currentPage:t}){this.serverParams.page!==t&&(this.updateParams({page:t}),this.Get_top_products(t))},onPerPageChange({currentPerPage:t}){this.limit!==t&&(this.limit=t,this.updateParams({page:1,perPage:t}),this.Get_top_products(1))},Submit_filter_dateRange(){var t=this;t.startDate=t.dateRange.startDate.toJSON().slice(0,10),t.endDate=t.dateRange.endDate.toJSON().slice(0,10),t.Get_top_products(1)},get_data_loaded(){var t=this;if(t.today_mode){let e=new Date;t.startDate=e.getFullYear(),t.endDate=(new Date).toJSON().slice(0,10),t.dateRange.startDate=e.getFullYear(),t.dateRange.endDate=(new Date).toJSON().slice(0,10)}},Get_top_products(t){h().start(),h().set(.1),this.get_data_loaded(),axios.get("report/top_products?page="+t+"&limit="+this.limit+"&to="+this.endDate+"&from="+this.startDate+"&search="+this.search_products).then((t=>{this.products=t.data.products,this.totalRows=t.data.totalRows,h().done(),this.isLoading=!1,this.today_mode=!1})).catch((t=>{h().done(),setTimeout((()=>{this.isLoading=!1,this.today_mode=!1}),500)}))}},created:function(){this.Get_top_products(1)}};var v=a(66262);const k=(0,v.A)(C,[["render",u]]),y=k}}]);
//# sourceMappingURL=top_selling_products.3a45149f.js.map