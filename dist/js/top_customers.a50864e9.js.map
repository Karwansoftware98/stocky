{"version":3,"file":"js/top_customers.a50864e9.js","mappings":"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","sources":["webpack:///./src/views/app/pages/reports/top_customers.vue","webpack:///./src/views/app/pages/reports/top_customers.vue?99be"],"sourcesContent":["<template>\r\n  <div class=\"main-content\">\r\n    <breadcumb :page=\"$t('Top_customers')\" :folder=\"$t('Reports')\"/>\r\n    <div v-if=\"isLoading\" class=\"loading_page spinner spinner-primary mr-3\"></div>\r\n\r\n    <vue-good-table\r\n      v-if=\"!isLoading\"\r\n      mode=\"remote\"\r\n      :columns=\"columns\"\r\n      :totalRows=\"totalRows\"\r\n      :rows=\"customers\"\r\n      @on-page-change=\"onPageChange\"\r\n      @on-per-page-change=\"onPerPageChange\"\r\n      :pagination-options=\"{\r\n        enabled: true,\r\n        mode: 'records',\r\n        nextLabel: 'next',\r\n        prevLabel: 'prev',\r\n      }\"\r\n      styleClass=\"table-hover tableOne vgt-table\"\r\n    >\r\n     <div slot=\"table-actions\" class=\"mt-2 mb-3\">\r\n        <b-button @click=\"export_PDF()\" size=\"sm\" variant=\"outline-success ripple m-1\">\r\n          <i class=\"i-File-Copy\"></i> PDF\r\n        </b-button>\r\n      </div>\r\n\r\n     <template slot=\"table-row\" slot-scope=\"props\">\r\n      \r\n        <div v-if=\"props.column.field == 'total'\">\r\n          <span>{{currentUser.currency}} {{props.row.total}}</span>\r\n        </div>\r\n      </template>\r\n\r\n    </vue-good-table>\r\n    <!-- </b-card> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NProgress from \"nprogress\";\r\nimport { mapGetters } from \"vuex\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\nexport default {\r\n  metaInfo: {\r\n    title: \"Top Customers\"\r\n  },\r\n  data() {\r\n    return {\r\n      isLoading: true,\r\n      serverParams: {\r\n        sort: {\r\n          field: \"id\",\r\n          type: \"desc\"\r\n        },\r\n        page: 1,\r\n        perPage: 10\r\n      },\r\n      limit: \"10\",\r\n      totalRows: \"\",\r\n      customers: [],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n     ...mapGetters([\"currentUser\"]),\r\n    columns() {\r\n      return [\r\n        {\r\n          label: this.$t(\"Name\"),\r\n          field: \"name\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n        {\r\n          label: this.$t(\"Phone\"),\r\n          field: \"phone\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n        {\r\n          label: this.$t(\"Email\"),\r\n          field: \"email\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n        {\r\n          label: this.$t(\"TotalSales\"),\r\n          field: \"total_sales\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n         {\r\n          label: this.$t(\"TotalAmount\"),\r\n          field: \"total\",\r\n          tdClass: \"text-left\",\r\n          thClass: \"text-left\",\r\n          sortable: false\r\n        },\r\n       \r\n      ];\r\n    }\r\n  },\r\n\r\n  methods: {\r\n\r\n     //----------------------------------- Export PDF ------------------------------\\\\\r\n    export_PDF() {\r\n      var self = this;\r\n      let pdf = new jsPDF(\"p\", \"pt\");\r\n      let columns = [\r\n        { title: \"Customer Name\", dataKey: \"name\" },\r\n        { title: \"Phone\", dataKey: \"phone\" },\r\n        { title: \"Email\", dataKey: \"email\" },\r\n        { title: \"Total Sales\", dataKey: \"total_sales\" },\r\n        { title: \"Total Amount\", dataKey: \"total\" },\r\n      ];\r\n      pdf.autoTable(columns, self.customers);\r\n      pdf.text(\"Top Customers\", 40, 25);\r\n      pdf.save(\"Top_Customers.pdf\");\r\n    },\r\n\r\n    //---- update Params Table\r\n    updateParams(newProps) {\r\n      this.serverParams = Object.assign({}, this.serverParams, newProps);\r\n    },\r\n\r\n    //---- Event Page Change\r\n    onPageChange({ currentPage }) {\r\n      if (this.serverParams.page !== currentPage) {\r\n        this.updateParams({ page: currentPage });\r\n        this.Get_top_Customers(currentPage);\r\n      }\r\n    },\r\n\r\n    //---- Event Per Page Change\r\n    onPerPageChange({ currentPerPage }) {\r\n      if (this.limit !== currentPerPage) {\r\n        this.limit = currentPerPage;\r\n        this.updateParams({ page: 1, perPage: currentPerPage });\r\n        this.Get_top_Customers(1);\r\n      }\r\n    },\r\n\r\n    //----------------------------- Get_top_Customers-------------------\\\\\r\n    Get_top_Customers(page) {\r\n      // Start the progress bar.\r\n      NProgress.start();\r\n      NProgress.set(0.1);\r\n      axios\r\n        .get(\r\n          \"report/top_customers?page=\" +\r\n            page +\r\n            \"&limit=\" +\r\n            this.limit\r\n        )\r\n        .then(response => {\r\n          this.customers = response.data.customers;\r\n          this.totalRows = response.data.totalRows;\r\n          // Complete the animation of theprogress bar.\r\n          NProgress.done();\r\n          this.isLoading = false;\r\n        })\r\n        .catch(response => {\r\n          // Complete the animation of theprogress bar.\r\n          NProgress.done();\r\n          setTimeout(() => {\r\n            this.isLoading = false;\r\n          }, 500);\r\n        });\r\n    }\r\n  }, //end Methods\r\n\r\n  //----------------------------- Created function------------------- \\\\\r\n\r\n  created: function() {\r\n    this.Get_top_Customers(1);\r\n  }\r\n};\r\n</script>","import { render } from \"./top_customers.vue?vue&type=template&id=593957b7\"\nimport script from \"./top_customers.vue?vue&type=script&lang=js\"\nexport * from \"./top_customers.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","slot","page","$t","folder","isLoading","mode","columns","totalRows","rows","customers","onPageChange","onPerPageChange","styleClass","export_PDF","size","variant","props","column","field","currentUser","currency","row","total","metaInfo","title","data","serverParams","sort","type","perPage","limit","computed","label","this","tdClass","thClass","sortable","methods","self","pdf","dataKey","autoTable","text","save","updateParams","newProps","Object","assign","currentPage","Get_top_Customers","currentPerPage","axios","get","then","response","catch","setTimeout","created","__exports__","render"],"sourceRoot":""}