"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[6025],{56235:(e,t,s)=>{s.r(t),s.d(t,{default:()=>G});var a=s(20641),i=s(90033),l=s(53751);const n={class:"main-content"},r={key:0,class:"loading_page spinner spinner-primary mr-3"},o={key:1},d={slot:"table-actions",class:"mt-2 mb-3"},h=(0,a.Lk)("i",{class:"i-File-Copy"},null,-1),p=(0,a.Lk)("i",{class:"i-File-Excel"},null,-1),m={slot:"table-row","slot-scope":"props"},u={key:0},c=(0,a.Lk)("i",{class:"i-Edit text-25 text-success"},null,-1),b=[c],g=(0,a.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),_=[g],v={key:1},f={key:0,class:"badge badge-outline-warning"},C={key:1,class:"badge badge-outline-info"},k={key:2,class:"badge badge-outline-secondary"},$={key:3,class:"badge badge-outline-success"},P={key:4,class:"badge badge-outline-danger"},S=["placeholder"],w=["placeholder"],y=(0,a.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1),x={key:0,class:"typo__p"},F=(0,a.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),E=[F];function T(e,t,s,c,g,F){const T=(0,a.g2)("breadcumb"),L=(0,a.g2)("b-button"),D=(0,a.g2)("vue-excel-xlsx"),O=(0,a.g2)("vue-good-table"),R=(0,a.g2)("v-select"),X=(0,a.g2)("b-form-invalid-feedback"),U=(0,a.g2)("b-form-group"),V=(0,a.g2)("validation-provider"),G=(0,a.g2)("b-col"),B=(0,a.g2)("b-form-input"),K=(0,a.g2)("b-row"),W=(0,a.g2)("b-form"),I=(0,a.g2)("b-modal"),A=(0,a.g2)("validation-observer"),Q=(0,a.gN)("b-tooltip");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(T,{page:e.$t("Shipments"),folder:e.$t("Sales")},null,8,["page","folder"]),g.isLoading?((0,a.uX)(),(0,a.CE)("div",r)):((0,a.uX)(),(0,a.CE)("div",o,[(0,a.bF)(O,{mode:"remote",columns:F.columns,totalRows:g.totalRows,rows:g.shipments,onOnPageChange:F.onPageChange,onOnPerPageChange:F.onPerPageChange,onOnSortChange:F.onSortChange,onOnSearch:F.onSearch,"search-options":{placeholder:e.$t("Search_this_table"),enabled:!0},"select-options":{enabled:!0,clearSelectionText:""},onOnSelectedRowsChange:F.selectionChanged,"pagination-options":{enabled:!0,mode:"records",nextLabel:"next",prevLabel:"prev"},styleClass:e.showDropdown?"tableOne table-hover vgt-table full-height":"tableOne table-hover vgt-table non-height"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",d,[(0,a.bF)(L,{onClick:t[0]||(t[0]=e=>F.Shipments_pdf()),size:"sm",variant:"outline-success ripple m-1"},{default:(0,a.k6)((()=>[h,(0,a.eW)(" PDF ")])),_:1}),(0,a.bF)(D,{class:"btn btn-sm btn-outline-danger ripple m-1",data:g.shipments,columns:F.columns,"file-name":"shipments","file-type":"xlsx","sheet-name":"shipments"},{default:(0,a.k6)((()=>[p,(0,a.eW)(" EXCEL ")])),_:1},8,["data","columns"])]),(0,a.Lk)("template",m,["actions"==e.props.column.field?((0,a.uX)(),(0,a.CE)("span",u,[e.currentUserPermissions&&e.currentUserPermissions.includes("shipment")?(0,a.bo)(((0,a.uX)(),(0,a.CE)("a",{key:0,onClick:t[1]||(t[1]=t=>F.Edit_Shipment(e.props.row)),title:"Edit",class:"cursor-pointer"},b)),[[Q,void 0,void 0,{hover:!0}]]):(0,a.Q3)("",!0),e.currentUserPermissions&&e.currentUserPermissions.includes("shipment")?(0,a.bo)(((0,a.uX)(),(0,a.CE)("a",{key:1,title:"Delete",class:"cursor-pointer",onClick:t[2]||(t[2]=t=>F.Remove_Shipment(e.props.row.id))},_)),[[Q,void 0,void 0,{hover:!0}]]):(0,a.Q3)("",!0)])):"status"==e.props.column.field?((0,a.uX)(),(0,a.CE)("div",v,["ordered"==e.props.row.status?((0,a.uX)(),(0,a.CE)("span",f,(0,i.v_)(e.$t("Ordered")),1)):"packed"==e.props.row.status?((0,a.uX)(),(0,a.CE)("span",C,(0,i.v_)(e.$t("Packed")),1)):"shipped"==e.props.row.status?((0,a.uX)(),(0,a.CE)("span",k,(0,i.v_)(e.$t("Shipped")),1)):"delivered"==e.props.row.status?((0,a.uX)(),(0,a.CE)("span",$,(0,i.v_)(e.$t("Delivered")),1)):((0,a.uX)(),(0,a.CE)("span",P,(0,i.v_)(e.$t("Cancelled")),1))])):(0,a.Q3)("",!0)])])),_:1},8,["columns","totalRows","rows","onOnPageChange","onOnPerPageChange","onOnSortChange","onOnSearch","search-options","onOnSelectedRowsChange","styleClass"])])),(0,a.bF)(A,{ref:"shipment_ref"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{"hide-footer":"",size:"md",id:"modal_shipment",title:e.$t("Edit")},{default:(0,a.k6)((()=>[(0,a.bF)(W,{onSubmit:(0,l.D$)(F.Submit_Shipment,["prevent"])},{default:(0,a.k6)((()=>[(0,a.bF)(K,null,{default:(0,a.k6)((()=>[(0,a.bF)(G,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{name:"Status",rules:{required:!0}},{default:(0,a.k6)((()=>[(0,a.bF)(U,{"slot-scope":"{ valid, errors }",label:e.$t("Status")+" *"},{default:(0,a.k6)((()=>[(0,a.bF)(R,{class:(0,i.C4)({"is-invalid":!!e.errors.length}),state:!e.errors[0]&&(!!e.valid||null),modelValue:g.shipment.status,"onUpdate:modelValue":t[3]||(t[3]=e=>g.shipment.status=e),reduce:e=>e.value,placeholder:e.$t("Choose_Status"),options:[{label:"Ordered",value:"ordered"},{label:"Packed",value:"packed"},{label:"Shipped",value:"shipped"},{label:"Delivered",value:"delivered"},{label:"Cancelled",value:"cancelled"}]},null,8,["class","state","modelValue","reduce","placeholder"]),(0,a.bF)(X,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,i.v_)(e.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,a.bF)(G,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(U,{label:e.$t("delivered_to")},{default:(0,a.k6)((()=>[(0,a.bF)(B,{label:"delivered_to",modelValue:g.shipment.delivered_to,"onUpdate:modelValue":t[4]||(t[4]=e=>g.shipment.delivered_to=e),placeholder:e.$t("delivered_to")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),(0,a.bF)(G,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(U,{label:e.$t("Adress")},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>g.shipment.shipping_address=e),rows:"4",class:"form-control",placeholder:e.$t("Enter_Address")},null,8,S),[[l.Jo,g.shipment.shipping_address]])])),_:1},8,["label"])])),_:1}),(0,a.bF)(G,{md:"12"},{default:(0,a.k6)((()=>[(0,a.bF)(U,{label:e.$t("Please_provide_any_details")},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>g.shipment.shipping_details=e),rows:"4",class:"form-control",placeholder:e.$t("Please_provide_any_details")},null,8,w),[[l.Jo,g.shipment.shipping_details]])])),_:1},8,["label"])])),_:1}),(0,a.bF)(G,{md:"12",class:"mt-3"},{default:(0,a.k6)((()=>[(0,a.bF)(L,{variant:"primary",type:"submit",disabled:g.SubmitProcessing},{default:(0,a.k6)((()=>[y,(0,a.eW)(" "+(0,i.v_)(e.$t("submit")),1)])),_:1},8,["disabled"]),t[7]||((0,a.Vq)(-1),t[7]=g.SubmitProcessing?((0,a.uX)(),(0,a.CE)("div",x,E)):(0,a.Q3)("",!0),(0,a.Vq)(1),t[7])])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])])),_:1},512)])}var L=s(95353),D=s(5947),O=s.n(D),R=s(44323);s(13246);const X={metaInfo:{title:"Shipment"},data(){return{isLoading:!0,SubmitProcessing:!1,ImportProcessing:!1,serverParams:{columnFilters:{},sort:{field:"id",type:"desc"},page:1,perPage:10},totalRows:"",search:"",limit:"10",shipments:[],shipment:{}}},computed:{...(0,L.L8)(["currentUserPermissions"]),columns(){return[{label:this.$t("date"),field:"date",tdClass:"text-left",thClass:"text-left"},{label:this.$t("shipment_ref"),field:"shipment_ref",tdClass:"text-left",thClass:"text-left"},{label:this.$t("sale_ref"),field:"sale_ref",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Customer"),field:"customer_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("warehouse"),field:"warehouse_name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Status"),field:"status",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",html:!0,tdClass:"text-right",thClass:"text-right",sortable:!1}]}},methods:{Submit_Shipment(){this.$refs.shipment_ref.validate().then((e=>{e?this.Update_Shipment():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},onPageChange({currentPage:e}){this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_shipments(e))},onPerPageChange({currentPerPage:e}){this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_shipments(1))},selectionChanged({selectedRows:e}){this.selectedIds=[],e.forEach(((e,t)=>{this.selectedIds.push(e.id)}))},onSortChange(e){this.updateParams({sort:{type:e[0].type,field:e[0].field}}),this.Get_shipments(this.serverParams.page)},onSearch(e){this.search=e.searchTerm,this.Get_shipments(this.serverParams.page)},getValidationState({dirty:e,validated:t,valid:s=null}){return e||t?s:null},makeToast(e,t,s){this.$root.$bvToast.toast(t,{title:s,variant:e,solid:!0})},Shipments_pdf(){var e=this;let t=new R["default"]("p","pt"),s=[{title:"Date",dataKey:"date"},{title:"Shipment Ref",dataKey:"shipment_ref"},{title:"Sale Ref",dataKey:"sale_ref"},{title:"Customer",dataKey:"customer_name"},{title:"Warehouse",dataKey:"warehouse_name"},{title:"Status",dataKey:"status"}];t.autoTable(s,e.shipments),t.text("Shipments",40,25),t.save("Shipments.pdf")},Get_shipments(e){O().start(),O().set(.1),axios.get("shipments?page="+e+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then((e=>{this.shipments=e.data.shipments,this.totalRows=e.data.totalRows,O().done(),this.isLoading=!1})).catch((e=>{O().done(),setTimeout((()=>{this.isLoading=!1}),500)}))},Edit_Shipment(e){O().start(),O().set(.1),this.Get_shipments(this.serverParams.page),this.reset_Form(),this.shipment=e,setTimeout((()=>{O().done(),this.$bvModal.show("modal_shipment")}),800)},Update_Shipment(){var e=this;e.SubmitProcessing=!0,axios.put("shipments/"+e.shipment.id,{sale_id:e.shipment.sale_id,shipping_address:e.shipment.shipping_address,delivered_to:e.shipment.delivered_to,shipping_details:e.shipment.shipping_details,status:e.shipment.status}).then((t=>{this.makeToast("success",this.$t("Updated_in_successfully"),this.$t("Success")),Fire.$emit("event_update_shipment"),e.SubmitProcessing=!1})).catch((t=>{this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed")),e.SubmitProcessing=!1}))},reset_Form(){this.shipment={id:"",date:"",Ref:"",sale_id:"",attachment:"",delivered_to:"",shipping_address:"",status:"",shipping_details:""}},Remove_Shipment(e){this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&axios.delete("shipments/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Deleted_in_successfully"),"success"),Fire.$emit("event_delete_shipment")})).catch((()=>{this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")}))}))}},created:function(){this.Get_shipments(1),Fire.$on("event_update_shipment",(()=>{setTimeout((()=>{this.Get_shipments(this.serverParams.page),this.$bvModal.hide("modal_shipment")}),500)})),Fire.$on("event_delete_shipment",(()=>{setTimeout((()=>{this.Get_shipments(this.serverParams.page)}),500)}))}};var U=s(66262);const V=(0,U.A)(X,[["render",T]]),G=V}}]);
//# sourceMappingURL=shipment.0763ff51.js.map