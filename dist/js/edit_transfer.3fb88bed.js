"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[3283],{36734:(t,e,a)=>{a.r(e),a.d(e,{default:()=>st});var s=a(20641),l=a(53751),i=a(90033);const d={class:"main-content"},r={key:0,class:"loading_page spinner spinner-primary mr-3"},o={id:"autocomplete",class:"autocomplete"},n=["placeholder"],u={class:"autocomplete-result-list"},c=["onMousedown"],h={class:"table-responsive"},_={class:"table table-hover"},p={class:"bg-gray-300"},b=(0,s.Lk)("th",{scope:"col"},"#",-1),m={scope:"col"},f={scope:"col"},k={scope:"col"},g={scope:"col"},v={scope:"col"},F={scope:"col"},y={scope:"col"},$=(0,s.Lk)("th",{scope:"col",class:"text-center"},[(0,s.Lk)("i",{class:"fa fa-trash"})],-1),x={key:0},L={colspan:"9"},T=(0,s.Lk)("br",null,null,-1),U={class:"badge badge-success"},C=["onClick"],w={class:"badge badge-outline-warning"},V={class:"quantity"},q=["onClick"],S=["onKeyup","onUpdate:modelValue","disabled"],D=["onClick"],N=["onClick"],W=(0,s.Lk)("i",{class:"i-Close-Window text-25 text-danger"},null,-1),P=[W],M={class:"offset-md-9 col-md-3 mt-4"},G={class:"table table-striped table-sm"},E={class:"bold"},O={class:"bold"},I={class:"bold"},X={class:"font-weight-bold"},K={class:"font-weight-bold"},Q=["placeholder"],A=(0,s.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1),B={key:0,class:"typo__p"},R=(0,s.Lk)("div",{class:"spinner sm spinner-primary mt-3"},null,-1),J=[R],Y=(0,s.Lk)("i",{class:"i-Yes me-2 font-weight-bold"},null,-1);function z(t,e,a,W,R,z){const j=(0,s.g2)("breadcumb"),H=(0,s.g2)("b-form-input"),Z=(0,s.g2)("b-form-invalid-feedback"),tt=(0,s.g2)("b-form-group"),et=(0,s.g2)("validation-provider"),at=(0,s.g2)("b-col"),st=(0,s.g2)("v-select"),lt=(0,s.g2)("b-input-group-prepend"),it=(0,s.g2)("b-input-group-append"),dt=(0,s.g2)("b-input-group"),rt=(0,s.g2)("b-button"),ot=(0,s.g2)("b-row"),nt=(0,s.g2)("b-card"),ut=(0,s.g2)("b-form"),ct=(0,s.g2)("validation-observer"),ht=(0,s.g2)("b-modal");return(0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(j,{page:t.$t("EditTransfer"),folder:t.$t("ListTransfers")},null,8,["page","folder"]),R.isLoading?((0,s.uX)(),(0,s.CE)("div",r)):(0,s.Q3)("",!0),R.isLoading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(ct,{key:1,ref:"Edit_transfer"},{default:(0,s.k6)((()=>[(0,s.bF)(ut,{onSubmit:(0,l.D$)(z.Submit_Transfer,["prevent"])},{default:(0,s.k6)((()=>[(0,s.bF)(ot,null,{default:(0,s.k6)((()=>[(0,s.bF)(at,{lg:"12",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(nt,null,{default:(0,s.k6)((()=>[(0,s.bF)(ot,null,{default:(0,s.k6)((()=>[(0,s.bF)(at,{lg:"4",md:"4",sm:"12",class:"mb-3"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"date",rules:{required:!0}},{default:(0,s.k6)((a=>[(0,s.bF)(tt,{label:t.$t("date")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(H,{state:z.getValidationState(a),"aria-describedby":"date-feedback",type:"date",modelValue:R.transfer.date,"onUpdate:modelValue":e[0]||(e[0]=t=>R.transfer.date=t)},null,8,["state","modelValue"]),(0,s.bF)(Z,{id:"OrderTax-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{lg:"4",md:"4",sm:"12",class:"mb-3"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"From Warehouse",rules:{required:!0}},{default:(0,s.k6)((()=>[(0,s.bF)(tt,{"slot-scope":"{ valid, errors }",label:t.$t("FromWarehouse")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(st,{class:(0,i.C4)({"is-invalid":!!t.errors.length}),state:!t.errors[0]&&(!!t.valid||null),disabled:R.details.length>0,onInput:z.Selected_From_Warehouse,modelValue:R.transfer.from_warehouse,"onUpdate:modelValue":e[1]||(e[1]=t=>R.transfer.from_warehouse=t),reduce:t=>t.value,placeholder:t.$t("Choose_Warehouse"),options:R.warehouses.map((t=>({label:t.name,value:t.id})))},null,8,["class","state","disabled","onInput","modelValue","reduce","placeholder","options"]),(0,s.bF)(Z,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{lg:"4",md:"4",sm:"12",class:"mb-3"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"To Warehouse",rules:{required:!0}},{default:(0,s.k6)((()=>[(0,s.bF)(tt,{"slot-scope":"{ valid, errors }",label:t.$t("ToWarehouse")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(st,{class:(0,i.C4)({"is-invalid":!!t.errors.length}),state:!t.errors[0]&&(!!t.valid||null),modelValue:R.transfer.to_warehouse,"onUpdate:modelValue":e[2]||(e[2]=t=>R.transfer.to_warehouse=t),reduce:t=>t.value,placeholder:t.$t("Choose_Warehouse"),options:R.warehouses.map((t=>({label:t.name,value:t.id})))},null,8,["class","state","modelValue","reduce","placeholder","options"]),(0,s.bF)(Z,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{md:"12",class:"mb-5"},{default:(0,s.k6)((()=>[(0,s.Lk)("h6",null,(0,i.v_)(t.$t("ProductName")),1),(0,s.Lk)("div",o,[(0,s.Lk)("input",{placeholder:t.$t("Scan_Search_Product_by_Code_Name"),onInput:e[3]||(e[3]=t=>R.search_input=t.target.value),onKeyup:e[4]||(e[4]=t=>z.search(R.search_input)),onFocus:e[5]||(e[5]=(...t)=>z.handleFocus&&z.handleFocus(...t)),onBlur:e[6]||(e[6]=(...t)=>z.handleBlur&&z.handleBlur(...t)),ref:"product_autocomplete",class:"autocomplete-input"},null,40,n),(0,s.bo)((0,s.Lk)("ul",u,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(R.product_filter,(t=>((0,s.uX)(),(0,s.CE)("li",{class:"autocomplete-result",onMousedown:e=>z.SearchProduct(t)},(0,i.v_)(z.getResultValue(t)),41,c)))),256))],512),[[l.aG,R.focused]])])])),_:1}),(0,s.bF)(at,{md:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",h,[(0,s.Lk)("table",_,[(0,s.Lk)("thead",p,[(0,s.Lk)("tr",null,[b,(0,s.Lk)("th",m,(0,i.v_)(t.$t("ProductName")),1),(0,s.Lk)("th",f,(0,i.v_)(t.$t("Net_Unit_Cost")),1),(0,s.Lk)("th",k,(0,i.v_)(t.$t("CurrentStock")),1),(0,s.Lk)("th",g,(0,i.v_)(t.$t("Qty")),1),(0,s.Lk)("th",v,(0,i.v_)(t.$t("Discount")),1),(0,s.Lk)("th",F,(0,i.v_)(t.$t("Tax")),1),(0,s.Lk)("th",y,(0,i.v_)(t.$t("SubTotal")),1),$])]),(0,s.Lk)("tbody",null,[R.details.length<=0?((0,s.uX)(),(0,s.CE)("tr",x,[(0,s.Lk)("td",L,(0,i.v_)(t.$t("NodataAvailable")),1)])):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(R.details,(e=>((0,s.uX)(),(0,s.CE)("tr",{class:(0,i.C4)({row_deleted:1===e.del||0===e.no_unit}),key:e.detail_id},[(0,s.Lk)("td",null,(0,i.v_)(e.detail_id),1),(0,s.Lk)("td",null,[(0,s.Lk)("span",null,(0,i.v_)(e.code),1),T,(0,s.Lk)("span",U,(0,i.v_)(e.name),1),(0,s.bo)((0,s.Lk)("i",{onClick:t=>z.Modal_Updat_Detail(e),class:"i-Edit"},null,8,C),[[l.aG,0!==e.no_unit]])]),(0,s.Lk)("td",null,(0,i.v_)(t.currentUser.currency)+" "+(0,i.v_)(z.formatNumber(e.Net_cost,3)),1),(0,s.Lk)("td",null,[(0,s.Lk)("span",w,(0,i.v_)(e.stock)+" "+(0,i.v_)(e.unitPurchase),1)]),(0,s.Lk)("td",null,[(0,s.Lk)("div",V,[(0,s.bF)(dt,null,{default:(0,s.k6)((()=>[(0,s.bF)(lt,null,{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("span",{class:"btn btn-primary btn-sm",onClick:t=>z.decrement(e,e.detail_id)},"-",8,q),[[l.aG,0!==e.no_unit]])])),_:2},1024),(0,s.bo)((0,s.Lk)("input",{class:"form-control",onKeyup:t=>z.Verified_Qty(e,e.detail_id),"onUpdate:modelValue":t=>e.quantity=t,disabled:1===e.del||0===e.no_unit},null,40,S),[[l.Jo,e.quantity,void 0,{number:!0}]]),(0,s.bF)(it,null,{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("span",{class:"btn btn-primary btn-sm",onClick:t=>z.increment(e,e.detail_id)},"+",8,D),[[l.aG,0!==e.no_unit]])])),_:2},1024)])),_:2},1024)])]),(0,s.Lk)("td",null,(0,i.v_)(t.currentUser.currency)+" "+(0,i.v_)(z.formatNumber(e.DiscountNet*e.quantity,2)),1),(0,s.Lk)("td",null,(0,i.v_)(t.currentUser.currency)+" "+(0,i.v_)(z.formatNumber(e.taxe*e.quantity,2)),1),(0,s.Lk)("td",null,(0,i.v_)(t.currentUser.currency)+" "+(0,i.v_)(e.subtotal.toFixed(2)),1),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("a",{onClick:t=>z.delete_Product_Detail(e.detail_id),class:"btn btn-icon btn-sm",title:"Delete"},P,8,N),[[l.aG,0!==e.no_unit]])])],2)))),128))])])])])),_:1}),(0,s.Lk)("div",M,[(0,s.Lk)("table",G,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",E,(0,i.v_)(t.$t("OrderTax")),1),(0,s.Lk)("td",null,[(0,s.Lk)("span",null,(0,i.v_)(t.currentUser.currency)+" "+(0,i.v_)(R.transfer.TaxNet.toFixed(2))+" ("+(0,i.v_)(z.formatNumber(R.transfer.tax_rate,2))+" %)",1)])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",O,(0,i.v_)(t.$t("Discount")),1),(0,s.Lk)("td",null,(0,i.v_)(t.currentUser.currency)+" "+(0,i.v_)(R.transfer.discount.toFixed(2)),1)]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",I,(0,i.v_)(t.$t("Shipping")),1),(0,s.Lk)("td",null,(0,i.v_)(t.currentUser.currency)+" "+(0,i.v_)(R.transfer.shipping.toFixed(2)),1)]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("span",X,(0,i.v_)(t.$t("Total")),1)]),(0,s.Lk)("td",null,[(0,s.Lk)("span",K,(0,i.v_)(t.currentUser.currency)+" "+(0,i.v_)(R.GrandTotal.toFixed(2)),1)])])])])]),(0,s.bF)(at,{lg:"4",md:"4",sm:"12",class:"mb-3"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"Order Tax",rules:{regex:/^\d*\.?\d*$/}},{default:(0,s.k6)((a=>[(0,s.bF)(tt,{label:t.$t("OrderTax")},{default:(0,s.k6)((()=>[(0,s.bF)(dt,{append:"%"},{default:(0,s.k6)((()=>[(0,s.bF)(H,{state:z.getValidationState(a),"aria-describedby":"OrderTax-feedback",label:"Order Tax",modelValue:R.transfer.tax_rate,"onUpdate:modelValue":e[7]||(e[7]=t=>R.transfer.tax_rate=t),modelModifiers:{number:!0},onKeyup:e[8]||(e[8]=t=>z.keyup_OrderTax())},null,8,["state","modelValue"])])),_:2},1024),(0,s.bF)(Z,{id:"OrderTax-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{lg:"4",md:"4",sm:"12",class:"mb-3"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"Discount",rules:{regex:/^\d*\.?\d*$/}},{default:(0,s.k6)((a=>[(0,s.bF)(tt,{label:t.$t("Discount")},{default:(0,s.k6)((()=>[(0,s.bF)(dt,{append:t.currentUser.currency},{default:(0,s.k6)((()=>[(0,s.bF)(H,{state:z.getValidationState(a),"aria-describedby":"Discount-feedback",label:"Discount",modelValue:R.transfer.discount,"onUpdate:modelValue":e[9]||(e[9]=t=>R.transfer.discount=t),modelModifiers:{number:!0},onKeyup:e[10]||(e[10]=t=>z.keyup_Discount())},null,8,["state","modelValue"])])),_:2},1032,["append"]),(0,s.bF)(Z,{id:"Discount-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{lg:"4",md:"4",sm:"12",class:"mb-3"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"Shipping",rules:{regex:/^\d*\.?\d*$/}},{default:(0,s.k6)((a=>[(0,s.bF)(tt,{label:t.$t("Shipping")},{default:(0,s.k6)((()=>[(0,s.bF)(dt,{append:t.currentUser.currency},{default:(0,s.k6)((()=>[(0,s.bF)(H,{state:z.getValidationState(a),"aria-describedby":"Shipping-feedback",label:"Shipping",modelValue:R.transfer.shipping,"onUpdate:modelValue":e[11]||(e[11]=t=>R.transfer.shipping=t),modelModifiers:{number:!0},onKeyup:e[12]||(e[12]=t=>z.keyup_Shipping())},null,8,["state","modelValue"])])),_:2},1032,["append"]),(0,s.bF)(Z,{id:"Shipping-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{lg:"4",md:"4",sm:"12",class:"mb-3"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"Status",rules:{required:!0}},{default:(0,s.k6)((()=>[(0,s.bF)(tt,{"slot-scope":"{ valid, errors }",label:t.$t("Status")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(st,{class:(0,i.C4)({"is-invalid":!!t.errors.length}),state:!t.errors[0]&&(!!t.valid||null),modelValue:R.transfer.statut,"onUpdate:modelValue":e[13]||(e[13]=t=>R.transfer.statut=t),reduce:t=>t.value,placeholder:t.$t("Choose_Status"),options:[{label:"Completed",value:"completed"},{label:"Sent",value:"sent"},{label:"Pending",value:"pending"}]},null,8,["class","state","modelValue","reduce","placeholder"]),(0,s.bF)(Z,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(tt,{label:t.$t("Note")},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":e[14]||(e[14]=t=>R.transfer.notes=t),rows:"4",class:"form-control",placeholder:t.$t("Afewwords")},null,8,Q),[[l.Jo,R.transfer.notes]])])),_:1},8,["label"])])),_:1}),(0,s.bF)(at,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(tt,null,{default:(0,s.k6)((()=>[(0,s.bF)(rt,{variant:"primary",onClick:z.Submit_Transfer,disabled:R.SubmitProcessing},{default:(0,s.k6)((()=>[A,(0,s.eW)(" "+(0,i.v_)(t.$t("submit")),1)])),_:1},8,["onClick","disabled"]),e[15]||((0,s.Vq)(-1),e[15]=R.SubmitProcessing?((0,s.uX)(),(0,s.CE)("div",B,J)):(0,s.Q3)("",!0),(0,s.Vq)(1),e[15])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},512)),(0,s.bF)(ct,{ref:"Update_Detail_transfer"},{default:(0,s.k6)((()=>[(0,s.bF)(ht,{"hide-footer":"",size:"md",id:"form_Update_Detail",title:R.detail.name},{default:(0,s.k6)((()=>[(0,s.bF)(ut,{onSubmit:(0,l.D$)(z.submit_Update_Detail,["prevent"])},{default:(0,s.k6)((()=>[(0,s.bF)(ot,null,{default:(0,s.k6)((()=>[(0,s.bF)(at,{lg:"12",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"Product Cost",rules:{required:!0,regex:/^\d*\.?\d*$/}},{default:(0,s.k6)((a=>[(0,s.bF)(tt,{label:t.$t("ProductCost")+" *",id:"cost-input"},{default:(0,s.k6)((()=>[(0,s.bF)(H,{label:"Product Cost",modelValue:R.detail.Unit_cost,"onUpdate:modelValue":e[16]||(e[16]=t=>R.detail.Unit_cost=t),modelModifiers:{number:!0},state:z.getValidationState(a),"aria-describedby":"cost-feedback"},null,8,["modelValue","state"]),(0,s.bF)(Z,{id:"cost-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{lg:"12",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"Tax Method",rules:{required:!0}},{default:(0,s.k6)((()=>[(0,s.bF)(tt,{"slot-scope":"{ valid, errors }",label:t.$t("TaxMethod")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(st,{class:(0,i.C4)({"is-invalid":!!t.errors.length}),state:!t.errors[0]&&(!!t.valid||null),modelValue:R.detail.tax_method,"onUpdate:modelValue":e[17]||(e[17]=t=>R.detail.tax_method=t),reduce:t=>t.value,placeholder:t.$t("Choose_Method"),options:[{label:"Exclusive",value:"1"},{label:"Inclusive",value:"2"}]},null,8,["class","state","modelValue","reduce","placeholder"]),(0,s.bF)(Z,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{lg:"12",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"Order Tax",rules:{required:!0,regex:/^\d*\.?\d*$/}},{default:(0,s.k6)((a=>[(0,s.bF)(tt,{label:t.$t("OrderTax")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(dt,{append:"%"},{default:(0,s.k6)((()=>[(0,s.bF)(H,{label:"Order Tax",modelValue:R.detail.tax_percent,"onUpdate:modelValue":e[18]||(e[18]=t=>R.detail.tax_percent=t),modelModifiers:{number:!0},state:z.getValidationState(a),"aria-describedby":"OrderTax-feedback"},null,8,["modelValue","state"])])),_:2},1024),(0,s.bF)(Z,{id:"OrderTax-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{lg:"12",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"Discount Method",rules:{required:!0}},{default:(0,s.k6)((()=>[(0,s.bF)(tt,{"slot-scope":"{ valid, errors }",label:t.$t("Discount_Method")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(st,{modelValue:R.detail.discount_Method,"onUpdate:modelValue":e[19]||(e[19]=t=>R.detail.discount_Method=t),reduce:t=>t.value,placeholder:t.$t("Choose_Method"),class:(0,i.C4)({"is-invalid":!!t.errors.length}),state:!t.errors[0]&&(!!t.valid||null),options:[{label:"Percent %",value:"1"},{label:"Fixed",value:"2"}]},null,8,["modelValue","reduce","placeholder","class","state"]),(0,s.bF)(Z,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(t.errors[0]),1)])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{lg:"12",md:"12",sm:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(et,{name:"Discount Rate",rules:{required:!0,regex:/^\d*\.?\d*$/}},{default:(0,s.k6)((a=>[(0,s.bF)(tt,{label:t.$t("Discount")+" *"},{default:(0,s.k6)((()=>[(0,s.bF)(H,{label:"Discount",modelValue:R.detail.discount,"onUpdate:modelValue":e[20]||(e[20]=t=>R.detail.discount=t),modelModifiers:{number:!0},state:z.getValidationState(a),"aria-describedby":"Discount-feedback"},null,8,["modelValue","state"]),(0,s.bF)(Z,{id:"Discount-feedback"},{default:(0,s.k6)((()=>[(0,s.eW)((0,i.v_)(a.errors[0]),1)])),_:2},1024)])),_:2},1032,["label"])])),_:1})])),_:1}),(0,s.bF)(at,{md:"12"},{default:(0,s.k6)((()=>[(0,s.bF)(tt,null,{default:(0,s.k6)((()=>[(0,s.bF)(rt,{variant:"primary",type:"submit"},{default:(0,s.k6)((()=>[Y,(0,s.eW)(" "+(0,i.v_)(t.$t("submit")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1},8,["title"])])),_:1},512)])}var j=a(95353),H=a(5947),Z=a.n(H);const tt={metaInfo:{title:"Update Transfer"},data(){return{focused:!1,timer:null,search_input:"",product_filter:[],isLoading:!0,SubmitProcessing:!1,details:[],detail:{quantity:"",discount:"",Unit_cost:"",discount_Method:"",tax_percent:"",tax_method:""},warehouses:[],products:[],total:0,GrandTotal:0,transfer:{id:"",from_warehouse:"",to_warehouse:"",statut:"",notes:"",items:"",date:"",tax_rate:0,TaxNet:0,shipping:0,discount:0},product:{id:"",code:"",stock:"",quantity:"",discount:"",DiscountNet:"",discount_Method:"",name:"",no_unit:"",unitPurchase:"",purchase_unit_id:"",Net_cost:"",Unit_cost:"",Total_cost:"",subtotal:"",product_id:"",detail_id:"",taxe:"",tax_percent:"",tax_method:"",product_variant_id:"",etat:""}}},computed:{...(0,j.L8)(["currentUser"])},methods:{handleFocus(){this.focused=!0},handleBlur(){this.focused=!1},Submit_Transfer(){this.$refs.Edit_transfer.validate().then((t=>{t?this.Update_Transfer():this.makeToast("danger",this.$t("Please_fill_the_form_correctly"),this.$t("Failed"))}))},submit_Update_Detail(){this.$refs.Update_Detail_transfer.validate().then((t=>{t&&this.Update_Detail()}))},getValidationState({dirty:t,validated:e,valid:a=null}){return t||e?a:null},Modal_Updat_Detail(t){this.detail={},this.detail.name=t.name,this.detail.detail_id=t.detail_id,this.detail.Unit_cost=t.Unit_cost,this.detail.tax_method=t.tax_method,this.detail.discount_Method=t.discount_Method,this.detail.discount=t.discount,this.detail.quantity=t.quantity,this.detail.tax_percent=t.tax_percent,this.$bvModal.show("form_Update_Detail")},Update_Detail(){for(var t=0;t<this.details.length;t++)this.details[t].detail_id===this.detail.detail_id&&(this.details[t].tax_percent=this.detail.tax_percent,this.details[t].Unit_cost=this.detail.Unit_cost,this.details[t].quantity=this.detail.quantity,this.details[t].tax_method=this.detail.tax_method,this.details[t].discount_Method=this.detail.discount_Method,this.details[t].discount=this.detail.discount,"2"==this.details[t].discount_Method?this.details[t].DiscountNet=this.detail.discount:this.details[t].DiscountNet=parseFloat(this.detail.Unit_cost*this.details[t].discount/100),"1"==this.details[t].tax_method?(this.details[t].Net_cost=parseFloat(this.detail.Unit_cost-this.details[t].DiscountNet),this.details[t].taxe=parseFloat(this.detail.tax_percent*(this.detail.Unit_cost-this.details[t].DiscountNet)/100)):(this.details[t].Net_cost=parseFloat((this.detail.Unit_cost-this.details[t].DiscountNet)/(this.detail.tax_percent/100+1)),this.details[t].taxe=parseFloat(this.detail.Unit_cost-this.details[t].Net_cost-this.details[t].DiscountNet)),this.$forceUpdate());this.Calcul_Total(),this.$bvModal.hide("form_Update_Detail")},makeToast(t,e,a){this.$root.$bvToast.toast(e,{title:a,variant:t,solid:!0})},search(){if(this.timer&&(clearTimeout(this.timer),this.timer=null),this.search_input.length<2)return this.product_filter=[];""!=this.transfer.from_warehouse&&null!=this.transfer.from_warehouse?this.timer=setTimeout((()=>{const t=this.products.filter((t=>t.code===this.search_input||t.barcode.includes(this.search_input)));1===t.length?this.SearchProduct(t[0]):this.product_filter=this.products.filter((t=>t.name.toLowerCase().includes(this.search_input.toLowerCase())||t.code.toLowerCase().includes(this.search_input.toLowerCase())||t.barcode.toLowerCase().includes(this.search_input.toLowerCase())))}),800):this.makeToast("warning",this.$t("SelectWarehouse"),this.$t("Warning"))},getResultValue(t){return t.code+" ("+t.name+")"},SearchProduct(t){this.product={},this.details.length>0&&this.details.some((e=>e.code===t.code))?this.makeToast("warning",this.$t("AlreadyAdd"),this.$t("Warning")):(this.product.code=t.code,this.product.no_unit=1,this.product.stock=t.qte_purchase,t.qte_purchase<1?this.product.quantity=t.qte_purchase:this.product.quantity=1,this.product.product_variant_id=t.product_variant_id,this.Get_Product_Details(t.id,t.product_variant_id)),this.search_input="",this.$refs.product_autocomplete.value="",this.product_filter=[]},verifiedForm(){if(this.details.length<=0)return this.makeToast("warning",this.$t("AddProductToList"),this.$t("Warning")),!1;if(this.transfer.from_warehouse===this.transfer.to_warehouse)return this.makeToast("warning",this.$t("WarehouseIdentical"),this.$t("Warning")),!1;for(var t=0,e=0;e<this.details.length;e++)""==this.details[e].quantity&&(t+=1);return!(t>0)||(this.makeToast("warning",this.$t("AddQuantity"),this.$t("Warning")),!1)},Update_Transfer(){if(this.verifiedForm()){this.SubmitProcessing=!0,Z().start(),Z().set(.1);let t=this.$route.params.id;axios.put(`transfers/${t}`,{transfer:this.transfer,details:this.details,GrandTotal:this.GrandTotal}).then((t=>{Z().done(),this.SubmitProcessing=!1,this.$router.push({name:"index_transfer"}),this.makeToast("success",this.$t("Update.TitleTransfer"),this.$t("Success"))})).catch((t=>{Z().done(),this.makeToast("danger",this.$t("InvalidData"),this.$t("Failed")),this.SubmitProcessing=!1}))}},Last_Detail_id(){this.product.detail_id=0;var t=this.details.length;this.product.detail_id=this.details[t-1].detail_id+1},add_product(){this.details.length>0?this.Last_Detail_id():0===this.details.length&&(this.product.detail_id=1),this.details.push(this.product)},Verified_Qty(t,e){for(var a=0;a<this.details.length;a++)this.details[a].detail_id===e&&(isNaN(t.quantity)&&(this.details[a].quantity=t.qte_copy),"new"==t.etat&&t.quantity>t.stock?(this.makeToast("warning",this.$t("LowStock"),this.$t("Warning")),this.details[a].quantity=t.stock):"current"==t.etat&&t.quantity>t.stock+t.qte_copy?(this.makeToast("warning",this.$t("LowStock"),this.$t("Warning")),this.details[a].quantity=t.qte_copy):this.details[a].quantity=t.quantity);this.$forceUpdate(),this.Calcul_Total()},increment(t,e){for(var a=0;a<this.details.length;a++)this.details[a].detail_id==e&&("new"==t.etat&&t.quantity+1>t.stock||"current"==t.etat&&t.quantity+1>t.stock+t.qte_copy?this.makeToast("warning",this.$t("LowStock"),this.$t("Warning")):this.formatNumber(this.details[a].quantity++,2));this.$forceUpdate(),this.Calcul_Total()},decrement(t,e){for(var a=0;a<this.details.length;a++)this.details[a].detail_id==e&&t.quantity-1>0&&("new"==t.etat&&t.quantity-1>t.stock||"current"==t.etat&&t.quantity-1>t.stock+t.qte_copy?this.makeToast("warning",this.$t("LowStock"),this.$t("Warning")):this.formatNumber(this.details[a].quantity--,2));this.$forceUpdate(),this.Calcul_Total()},Calcul_Total(){this.total=0;for(let s=0;s<this.details.length;s++){var t=this.details[s].taxe*this.details[s].quantity;this.details[s].subtotal=parseFloat(this.details[s].quantity*this.details[s].Net_cost+t),this.total=parseFloat(this.total+this.details[s].subtotal)}const e=parseFloat(this.total-this.transfer.discount);this.transfer.TaxNet=parseFloat(e*this.transfer.tax_rate/100),this.GrandTotal=parseFloat(e+this.transfer.TaxNet+this.transfer.shipping);var a=this.GrandTotal.toFixed(2);this.GrandTotal=parseFloat(a)},delete_Product_Detail(t){for(var e=0;e<this.details.length;e++)t===this.details[e].detail_id&&(this.details.splice(e,1),this.Calcul_Total())},keyup_OrderTax(){isNaN(this.transfer.tax_rate)?this.transfer.tax_rate=0:""==this.transfer.tax_rate?(this.transfer.tax_rate=0,this.Calcul_Total()):this.Calcul_Total()},keyup_Discount(){isNaN(this.transfer.discount)?this.transfer.discount=0:""==this.transfer.discount?(this.transfer.discount=0,this.Calcul_Total()):this.Calcul_Total()},keyup_Shipping(){isNaN(this.transfer.shipping)?this.transfer.shipping=0:""==this.transfer.shipping?(this.transfer.shipping=0,this.Calcul_Total()):this.Calcul_Total()},formatNumber(t,e){const a=("string"===typeof t?t:t.toString()).split(".");if(e<=0)return a[0];let s=a[1]||"";if(s.length>e)return`${a[0]}.${s.substr(0,e)}`;while(s.length<e)s+="0";return`${a[0]}.${s}`},Get_Products_By_Warehouse(t){Z().start(),Z().set(.1),axios.get("get_Products_by_warehouse/"+t+"?stock=1&product_service=0").then((t=>{this.products=t.data,Z().done()})).catch((t=>{}))},Get_Product_Details(t,e){axios.get("/show_product_data/"+t+"/"+e).then((t=>{this.product.discount=0,this.product.DiscountNet=0,this.product.discount_Method="2",this.product.del=0,this.product.id=0,this.product.etat="new",this.product.product_id=t.data.id,this.product.name=t.data.name,this.product.Net_cost=t.data.Net_cost,this.product.Unit_cost=t.data.Unit_cost,this.product.taxe=t.data.tax_cost,this.product.tax_method=t.data.tax_method,this.product.tax_percent=t.data.tax_percent,this.product.unitPurchase=t.data.unitPurchase,this.product.purchase_unit_id=t.data.purchase_unit_id,this.add_product(),this.Calcul_Total()}))},Selected_From_Warehouse(t){this.search_input="",this.product_filter=[],this.Get_Products_By_Warehouse(t)},GetElements(){let t=this.$route.params.id;axios.get(`transfers/${t}/edit`).then((t=>{this.transfer=t.data.transfer,this.details=t.data.details,this.warehouses=t.data.warehouses,this.Get_Products_By_Warehouse(this.transfer.from_warehouse),this.Calcul_Total(),this.isLoading=!1})).catch((t=>{setTimeout((()=>{this.isLoading=!1}),500)}))}},created:function(){this.GetElements()}};var et=a(66262);const at=(0,et.A)(tt,[["render",z]]),st=at}}]);
//# sourceMappingURL=edit_transfer.3fb88bed.js.map