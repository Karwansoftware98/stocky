"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[6526],{60495:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Z});var s=l(20641),n=l(90033),a=l(53751);const i={class:"main-content"},r={key:0,class:"loading_page spinner spinner-primary mr-3"},o=(0,s.Lk)("i",{class:"i-Edit"},null,-1),u=(0,s.Lk)("i",{class:"i-Envelope-2"},null,-1),c=(0,s.Lk)("i",{class:"i-Speach-Bubble"},null,-1),d=(0,s.Lk)("i",{class:"i-File-TXT"},null,-1),_=(0,s.Lk)("i",{class:"i-Billing"},null,-1),m=(0,s.Lk)("i",{class:"i-Close-Window"},null,-1),k={class:"invoice",id:"print_Invoice"},b={class:"invoice-print"},p={class:"font-weight-bold"},v=(0,s.Lk)("hr",null,null,-1),h={class:"font-weight-bold"},L={class:"font-weight-bold"},$={class:"font-weight-bold"},g={key:0,class:"badge badge-outline-success"},f={key:1,class:"badge badge-outline-primary"},y={key:2,class:"badge badge-outline-warning"},S={key:0,class:"badge badge-outline-success"},w={key:1,class:"badge badge-outline-info"},T={key:2,class:"badge badge-outline-warning"},C={class:"font-weight-bold"},D={class:"table-responsive"},F={class:"table table-hover table-md"},U={class:"bg-gray-300"},x={scope:"col"},E={scope:"col"},P={scope:"col"},N={scope:"col"},X={scope:"col"},I={scope:"col"},B={scope:"col"},W={class:"offset-md-9 col-md-3 mt-4"},R={class:"table table-striped table-sm"},M={class:"font-weight-bold"},G={class:"font-weight-bold"},Q={class:"font-weight-bold"},j={class:"font-weight-bold"},O={class:"font-weight-bold"},A={class:"font-weight-bold"};function q(e,t,l,q,K,z){const H=(0,s.g2)("breadcumb"),J=(0,s.g2)("router-link"),V=(0,s.g2)("b-col"),Y=(0,s.g2)("b-row"),Z=(0,s.g2)("b-card");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(H,{page:e.$t("SaleDetail"),folder:e.$t("Sales")},null,8,["page","folder"]),K.isLoading?((0,s.uX)(),(0,s.CE)("div",r)):(0,s.Q3)("",!0),K.isLoading?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(Z,{key:1},{default:(0,s.k6)((()=>[(0,s.bF)(Y,null,{default:(0,s.k6)((()=>[(0,s.bF)(V,{md:"12",class:"mb-5"},{default:(0,s.k6)((()=>[e.currentUserPermissions&&e.currentUserPermissions.includes("Sales_edit")&&"no"==K.sale.sale_has_return?((0,s.uX)(),(0,s.Wv)(J,{key:0,title:"Edit",class:"btn btn-success btn-icon ripple btn-sm",to:{name:"edit_sale",params:{id:e.$route.params.id}}},{default:(0,s.k6)((()=>[o,(0,s.Lk)("span",null,(0,n.v_)(e.$t("EditSale")),1)])),_:1},8,["to"])):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>z.Send_Email()),class:"btn btn-info btn-icon ripple btn-sm"},[u,(0,s.eW)(" "+(0,n.v_)(e.$t("Email")),1)]),(0,s.Lk)("button",{onClick:t[1]||(t[1]=e=>z.Sale_SMS()),class:"btn btn-secondary btn-icon ripple btn-sm"},[c,(0,s.eW)(" SMS ")]),(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>z.Sale_PDF()),class:"btn btn-primary btn-icon ripple btn-sm"},[d,(0,s.eW)(" PDF ")]),(0,s.Lk)("button",{onClick:t[3]||(t[3]=e=>z.print()),class:"btn btn-warning btn-icon ripple btn-sm"},[_,(0,s.eW)(" "+(0,n.v_)(e.$t("print")),1)]),e.currentUserPermissions&&e.currentUserPermissions.includes("Sales_delete")&&"no"==K.sale.sale_has_return?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:t[4]||(t[4]=e=>z.Delete_Sale()),class:"btn btn-danger btn-icon ripple btn-sm"},[m,(0,s.eW)(" "+(0,n.v_)(e.$t("Del")),1)])):(0,s.Q3)("",!0)])),_:1})])),_:1}),(0,s.Lk)("div",k,[(0,s.Lk)("div",b,[(0,s.bF)(Y,{class:"justify-content-md-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("h4",p,(0,n.v_)(e.$t("SaleDetail"))+" : "+(0,n.v_)(K.sale.Ref),1)])),_:1}),v,(0,s.bF)(Y,{class:"mt-5"},{default:(0,s.k6)((()=>[(0,s.bF)(V,{lg:"4",md:"4",sm:"12",class:"mb-4"},{default:(0,s.k6)((()=>[(0,s.Lk)("h5",h,(0,n.v_)(e.$t("Customer_Info")),1),(0,s.Lk)("div",null,(0,n.v_)(K.sale.client_name),1),(0,s.Lk)("div",null,(0,n.v_)(K.sale.client_email),1),(0,s.Lk)("div",null,(0,n.v_)(K.sale.client_phone),1),(0,s.Lk)("div",null,(0,n.v_)(K.sale.client_adr),1)])),_:1}),(0,s.bF)(V,{lg:"4",md:"4",sm:"12",class:"mb-4"},{default:(0,s.k6)((()=>[(0,s.Lk)("h5",L,(0,n.v_)(e.$t("Company_Info")),1),(0,s.Lk)("div",null,(0,n.v_)(K.company.CompanyName),1),(0,s.Lk)("div",null,(0,n.v_)(K.company.email),1),(0,s.Lk)("div",null,(0,n.v_)(K.company.CompanyPhone),1),(0,s.Lk)("div",null,(0,n.v_)(K.company.CompanyAdress),1)])),_:1}),(0,s.bF)(V,{lg:"4",md:"4",sm:"12",class:"mb-4"},{default:(0,s.k6)((()=>[(0,s.Lk)("h5",$,(0,n.v_)(e.$t("Invoice_Info")),1),(0,s.Lk)("div",null,(0,n.v_)(e.$t("Reference"))+" : "+(0,n.v_)(K.sale.Ref),1),(0,s.Lk)("div",null,[(0,s.eW)((0,n.v_)(e.$t("PaymentStatus"))+" : ",1),"paid"==K.sale.payment_status?((0,s.uX)(),(0,s.CE)("span",g,(0,n.v_)(e.$t("Paid")),1)):"partial"==K.sale.payment_status?((0,s.uX)(),(0,s.CE)("span",f,(0,n.v_)(e.$t("partial")),1)):((0,s.uX)(),(0,s.CE)("span",y,(0,n.v_)(e.$t("Unpaid")),1))]),(0,s.Lk)("div",null,(0,n.v_)(e.$t("warehouse"))+" : "+(0,n.v_)(K.sale.warehouse),1),(0,s.Lk)("div",null,[(0,s.eW)((0,n.v_)(e.$t("Status"))+" : ",1),"completed"==K.sale.statut?((0,s.uX)(),(0,s.CE)("span",S,(0,n.v_)(e.$t("complete")),1)):"pending"==K.sale.statut?((0,s.uX)(),(0,s.CE)("span",w,(0,n.v_)(e.$t("Pending")),1)):((0,s.uX)(),(0,s.CE)("span",T,(0,n.v_)(e.$t("Ordered")),1))])])),_:1})])),_:1}),(0,s.bF)(Y,{class:"mt-3"},{default:(0,s.k6)((()=>[(0,s.bF)(V,{md:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("h5",C,(0,n.v_)(e.$t("Order_Summary")),1),(0,s.Lk)("div",D,[(0,s.Lk)("table",F,[(0,s.Lk)("thead",U,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",x,(0,n.v_)(e.$t("ProductName")),1),(0,s.Lk)("th",E,(0,n.v_)(e.$t("Net_Unit_Price")),1),(0,s.Lk)("th",P,(0,n.v_)(e.$t("Quantity")),1),(0,s.Lk)("th",N,(0,n.v_)(e.$t("UnitPrice")),1),(0,s.Lk)("th",X,(0,n.v_)(e.$t("Discount")),1),(0,s.Lk)("th",I,(0,n.v_)(e.$t("Tax")),1),(0,s.Lk)("th",B,(0,n.v_)(e.$t("SubTotal")),1)])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(K.details,(t=>((0,s.uX)(),(0,s.CE)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("span",null,(0,n.v_)(t.code)+" ("+(0,n.v_)(t.name)+")",1),(0,s.bo)((0,s.Lk)("p",null,(0,n.v_)(e.$t("IMEI_SN"))+" : "+(0,n.v_)(t.imei_number),513),[[a.aG,t.is_imei&&null!==t.imei_number]])]),(0,s.Lk)("td",null,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(z.formatNumber(t.Net_price,3)),1),(0,s.Lk)("td",null,(0,n.v_)(z.formatNumber(t.quantity,2))+" "+(0,n.v_)(t.unit_sale),1),(0,s.Lk)("td",null,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(z.formatNumber(t.price,2)),1),(0,s.Lk)("td",null,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(z.formatNumber(t.DiscountNet,2)),1),(0,s.Lk)("td",null,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(z.formatNumber(t.taxe,2)),1),(0,s.Lk)("td",null,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(t.total.toFixed(2)),1)])))),256))])])])])),_:1}),(0,s.Lk)("div",W,[(0,s.Lk)("table",R,[(0,s.Lk)("tbody",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,n.v_)(e.$t("OrderTax")),1),(0,s.Lk)("td",null,[(0,s.Lk)("span",null,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(K.sale.TaxNet.toFixed(2))+" ("+(0,n.v_)(z.formatNumber(K.sale.tax_rate,2))+" %)",1)])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,n.v_)(e.$t("Discount")),1),(0,s.Lk)("td",null,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(K.sale.discount.toFixed(2)),1)]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,(0,n.v_)(e.$t("Shipping")),1),(0,s.Lk)("td",null,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(K.sale.shipping.toFixed(2)),1)]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("span",M,(0,n.v_)(e.$t("Total")),1)]),(0,s.Lk)("td",null,[(0,s.Lk)("span",G,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(K.sale.GrandTotal),1)])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("span",Q,(0,n.v_)(e.$t("Paid")),1)]),(0,s.Lk)("td",null,[(0,s.Lk)("span",j,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(K.sale.paid_amount),1)])]),(0,s.Lk)("tr",null,[(0,s.Lk)("td",null,[(0,s.Lk)("span",O,(0,n.v_)(e.$t("Due")),1)]),(0,s.Lk)("td",null,[(0,s.Lk)("span",A,(0,n.v_)(e.currentUser.currency)+" "+(0,n.v_)(K.sale.due),1)])])])])])])),_:1}),(0,s.bo)((0,s.Lk)("hr",null,null,512),[[a.aG,K.sale.note]]),(0,s.bF)(Y,{class:"mt-4"},{default:(0,s.k6)((()=>[(0,s.bF)(V,{md:"12"},{default:(0,s.k6)((()=>[(0,s.Lk)("p",null,(0,n.v_)(e.$t("sale_note"))+" : "+(0,n.v_)(K.sale.note),1)])),_:1})])),_:1})])])])),_:1}))])}var K=l(95353),z=l(5947),H=l.n(z);const J={computed:(0,K.L8)(["currentUserPermissions","currentUser"]),metaInfo:{title:"Detail Sale"},data(){return{isLoading:!0,sale:{},details:[],variants:[],company:{},email:{to:"",subject:"",message:"",client_name:"",Sale_Ref:""}}},methods:{Sale_PDF(){H().start(),H().set(.1);let e=this.$route.params.id;axios.get(`sale_pdf/${e}`,{responseType:"blob",headers:{"Content-Type":"application/json"}}).then((e=>{const t=window.URL.createObjectURL(new Blob([e.data])),l=document.createElement("a");l.href=t,l.setAttribute("download","Sale_"+this.sale.Ref+".pdf"),document.body.appendChild(l),l.click(),setTimeout((()=>H().done()),500)})).catch((()=>{setTimeout((()=>H().done()),500)}))},makeToast(e,t,l){this.$root.$bvToast.toast(t,{title:l,variant:e,solid:!0})},formatNumber(e,t){const l=("string"===typeof e?e:e.toString()).split(".");if(t<=0)return l[0];let s=l[1]||"";if(s.length>t)return`${l[0]}.${s.substr(0,t)}`;while(s.length<t)s+="0";return`${l[0]}.${s}`},print(){this.$htmlToPaper("print_Invoice")},Send_Email(){H().start(),H().set(.1);let e=this.$route.params.id;axios.post("sales_send_email",{id:e}).then((e=>{setTimeout((()=>H().done()),500),this.makeToast("success",this.$t("Send.TitleEmail"),this.$t("Success"))})).catch((e=>{setTimeout((()=>H().done()),500),this.makeToast("danger",this.$t("SMTPIncorrect"),this.$t("Failed"))}))},Sale_SMS(){H().start(),H().set(.1);let e=this.$route.params.id;axios.post("sales_send_sms",{id:e}).then((e=>{setTimeout((()=>H().done()),500),this.makeToast("success",this.$t("Send_SMS"),this.$t("Success"))})).catch((e=>{setTimeout((()=>H().done()),500),this.makeToast("danger",this.$t("sms_config_invalid"),this.$t("Failed"))}))},Get_Details(){let e=this.$route.params.id;axios.get(`sales/${e}`).then((e=>{this.sale=e.data.sale,this.details=e.data.details,this.company=e.data.company,this.isLoading=!1})).catch((e=>{setTimeout((()=>{this.isLoading=!1}),500)}))},Delete_Sale(){let e=this.$route.params.id;this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((t=>{t.value&&axios.delete("sales/"+e).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.SaleDeleted"),"success"),this.$router.push({name:"index_sales"})})).catch((()=>{this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")}))}))}},created:function(){this.Get_Details()}};var V=l(66262);const Y=(0,V.A)(J,[["render",q]]),Z=Y}}]);
//# sourceMappingURL=detail_sale.df1b2c3a.js.map