"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[4234],{48117:(t,e,s)=>{s.r(e),s.d(e,{default:()=>st});var a=s(20641),n=s(90033),l=s(53751);const r={class:"main-content"},i={key:0,class:"loading_page spinner spinner-primary mr-3"},u=(0,a.Lk)("i",{class:"i-Edit"},null,-1),c=(0,a.Lk)("i",{class:"i-Envelope-2"},null,-1),o=(0,a.Lk)("i",{class:"i-Speach-Bubble"},null,-1),d=(0,a.Lk)("i",{class:"i-File-TXT"},null,-1),p=(0,a.Lk)("i",{class:"i-Billing"},null,-1),h=(0,a.Lk)("i",{class:"i-Close-Window"},null,-1),_={class:"invoice mt-5",id:"print_Invoice"},m={class:"invoice-print"},k={class:"font-weight-bold"},b=(0,a.Lk)("hr",null,null,-1),v={class:"font-weight-bold"},L={class:"font-weight-bold"},$={class:"font-weight-bold"},g={key:0,class:"badge badge-outline-success"},f={key:1,class:"badge badge-outline-info"},y={key:2,class:"badge badge-outline-warning"},P={key:0,class:"badge badge-outline-success"},w={key:1,class:"badge badge-outline-primary"},T={key:2,class:"badge badge-outline-warning"},C={class:"font-weight-bold"},D={class:"table-responsive"},F={class:"table table-hover table-md"},S={class:"bg-gray-300"},U={scope:"col"},x={scope:"col"},E={scope:"col"},N={scope:"col"},X={scope:"col"},B={scope:"col"},I={scope:"col"},W={class:"offset-md-9 col-md-3 mt-4"},R={class:"table table-striped table-sm"},M={class:"bold"},G={class:"bold"},Q={class:"bold"},j={class:"font-weight-bold"},O={class:"font-weight-bold"},A={class:"font-weight-bold"},q={class:"font-weight-bold"},K={class:"font-weight-bold"},z={class:"font-weight-bold"};function H(t,e,s,H,J,V){const Y=(0,a.g2)("breadcumb"),Z=(0,a.g2)("router-link"),tt=(0,a.g2)("b-col"),et=(0,a.g2)("b-row"),st=(0,a.g2)("b-card");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(Y,{page:t.$t("PurchaseDetail"),folder:t.$t("ListPurchases")},null,8,["page","folder"]),J.isLoading?((0,a.uX)(),(0,a.CE)("div",i)):(0,a.Q3)("",!0),J.isLoading?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(st,{key:1},{default:(0,a.k6)((()=>[(0,a.bF)(et,null,{default:(0,a.k6)((()=>[(0,a.bF)(tt,{md:"12",class:"mb-2"},{default:(0,a.k6)((()=>[t.currentUserPermissions&&t.currentUserPermissions.includes("Purchases_edit")&&"no"==J.purchase.purchase_has_return?((0,a.uX)(),(0,a.Wv)(Z,{key:0,title:"Edit",class:"btn btn-success btn-icon ripple btn-sm",to:{name:"edit_purchase",params:{id:t.$route.params.id}}},{default:(0,a.k6)((()=>[u,(0,a.Lk)("span",null,(0,n.v_)(t.$t("EditPurchase")),1)])),_:1},8,["to"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:e[0]||(e[0]=t=>V.Send_Email()),class:"btn btn-info btn-icon ripple btn-sm"},[c,(0,a.eW)(" "+(0,n.v_)(t.$t("Email")),1)]),(0,a.Lk)("button",{onClick:e[1]||(e[1]=t=>V.Purchase_SMS()),class:"btn btn-secondary btn-icon ripple btn-sm"},[o,(0,a.eW)(" SMS ")]),(0,a.Lk)("button",{onClick:e[2]||(e[2]=t=>V.Print_Purchase_PDF()),class:"btn btn-primary btn-icon ripple btn-sm"},[d,(0,a.eW)(" PDF ")]),(0,a.Lk)("button",{onClick:e[3]||(e[3]=t=>V.print()),class:"btn btn-warning btn-icon ripple btn-sm"},[p,(0,a.eW)(" "+(0,n.v_)(t.$t("print")),1)]),t.currentUserPermissions&&t.currentUserPermissions.includes("Purchases_delete")&&"no"==J.purchase.purchase_has_return?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:e[4]||(e[4]=t=>V.Delete_Purchase()),class:"btn btn-danger btn-icon ripple btn-sm"},[h,(0,a.eW)(" "+(0,n.v_)(t.$t("Del")),1)])):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.Lk)("div",_,[(0,a.Lk)("div",m,[(0,a.bF)(et,{class:"justify-content-md-center"},{default:(0,a.k6)((()=>[(0,a.Lk)("h4",k,(0,n.v_)(t.$t("PurchaseDetail"))+" : "+(0,n.v_)(J.purchase.Ref),1)])),_:1}),b,(0,a.bF)(et,{class:"mt-5"},{default:(0,a.k6)((()=>[(0,a.bF)(tt,{lg:"4",md:"4",sm:"12",class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.Lk)("h5",v,(0,n.v_)(t.$t("Supplier_Info")),1),(0,a.Lk)("div",null,(0,n.v_)(J.purchase.supplier_name),1),(0,a.Lk)("div",null,(0,n.v_)(J.purchase.supplier_email),1),(0,a.Lk)("div",null,(0,n.v_)(J.purchase.supplier_phone),1),(0,a.Lk)("div",null,(0,n.v_)(J.purchase.supplier_adr),1)])),_:1}),(0,a.bF)(tt,{lg:"4",md:"4",sm:"12",class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.Lk)("h5",L,(0,n.v_)(t.$t("Company_Info")),1),(0,a.Lk)("div",null,(0,n.v_)(J.company.CompanyName),1),(0,a.Lk)("div",null,(0,n.v_)(J.company.email),1),(0,a.Lk)("div",null,(0,n.v_)(J.company.CompanyPhone),1),(0,a.Lk)("div",null,(0,n.v_)(J.company.CompanyAdress),1)])),_:1}),(0,a.bF)(tt,{lg:"4",md:"4",sm:"12",class:"mb-4"},{default:(0,a.k6)((()=>[(0,a.Lk)("h5",$,(0,n.v_)(t.$t("Purchase_Info")),1),(0,a.Lk)("div",null,(0,n.v_)(t.$t("Reference"))+" : "+(0,n.v_)(J.purchase.Ref),1),(0,a.Lk)("div",null,[(0,a.eW)((0,n.v_)(t.$t("Status"))+" : ",1),"received"==J.purchase.statut?((0,a.uX)(),(0,a.CE)("span",g,(0,n.v_)(t.$t("Received")),1)):"pending"==J.purchase.statut?((0,a.uX)(),(0,a.CE)("span",f,(0,n.v_)(t.$t("Pending")),1)):((0,a.uX)(),(0,a.CE)("span",y,(0,n.v_)(t.$t("Ordered")),1))]),(0,a.Lk)("div",null,(0,n.v_)(t.$t("warehouse"))+" : "+(0,n.v_)(J.purchase.warehouse),1),(0,a.Lk)("div",null,[(0,a.eW)((0,n.v_)(t.$t("PaymentStatus"))+" : ",1),"paid"==J.purchase.payment_status?((0,a.uX)(),(0,a.CE)("span",P,(0,n.v_)(t.$t("Paid")),1)):"partial"==J.purchase.payment_status?((0,a.uX)(),(0,a.CE)("span",w,(0,n.v_)(t.$t("partial")),1)):((0,a.uX)(),(0,a.CE)("span",T,(0,n.v_)(t.$t("Unpaid")),1))])])),_:1})])),_:1}),(0,a.bF)(et,{class:"mt-3"},{default:(0,a.k6)((()=>[(0,a.bF)(tt,{md:"12"},{default:(0,a.k6)((()=>[(0,a.Lk)("h5",C,(0,n.v_)(t.$t("Order_Summary")),1),(0,a.Lk)("div",D,[(0,a.Lk)("table",F,[(0,a.Lk)("thead",S,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",U,(0,n.v_)(t.$t("ProductName")),1),(0,a.Lk)("th",x,(0,n.v_)(t.$t("Net_Unit_Cost")),1),(0,a.Lk)("th",E,(0,n.v_)(t.$t("Quantity")),1),(0,a.Lk)("th",N,(0,n.v_)(t.$t("Unitcost")),1),(0,a.Lk)("th",X,(0,n.v_)(t.$t("Discount")),1),(0,a.Lk)("th",B,(0,n.v_)(t.$t("Tax")),1),(0,a.Lk)("th",I,(0,n.v_)(t.$t("SubTotal")),1)])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(J.details,(e=>((0,a.uX)(),(0,a.CE)("tr",null,[(0,a.Lk)("td",null,[(0,a.Lk)("span",null,(0,n.v_)(e.code)+" ("+(0,n.v_)(e.name)+")",1),(0,a.bo)((0,a.Lk)("p",null,(0,n.v_)(t.$t("IMEI_SN"))+" : "+(0,n.v_)(e.imei_number),513),[[l.aG,e.is_imei&&null!==e.imei_number]])]),(0,a.Lk)("td",null,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(V.formatNumber(e.Net_cost,3)),1),(0,a.Lk)("td",null,(0,n.v_)(V.formatNumber(e.quantity,2))+" "+(0,n.v_)(e.unit_purchase),1),(0,a.Lk)("td",null,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(V.formatNumber(e.cost,2)),1),(0,a.Lk)("td",null,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(V.formatNumber(e.DiscountNet,2)),1),(0,a.Lk)("td",null,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(V.formatNumber(e.taxe,2)),1),(0,a.Lk)("td",null,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(e.total.toFixed(2)),1)])))),256))])])])])),_:1}),(0,a.Lk)("div",W,[(0,a.Lk)("table",R,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",M,(0,n.v_)(t.$t("OrderTax")),1),(0,a.Lk)("td",null,[(0,a.Lk)("span",null,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(J.purchase.TaxNet.toFixed(2))+" ("+(0,n.v_)(V.formatNumber(J.purchase.tax_rate,2))+" %)",1)])]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",G,(0,n.v_)(t.$t("Discount")),1),(0,a.Lk)("td",null,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(J.purchase.discount.toFixed(2)),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",Q,(0,n.v_)(t.$t("Shipping")),1),(0,a.Lk)("td",null,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(J.purchase.shipping.toFixed(2)),1)]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,[(0,a.Lk)("span",j,(0,n.v_)(t.$t("Total")),1)]),(0,a.Lk)("td",null,[(0,a.Lk)("span",O,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(J.purchase.GrandTotal),1)])]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,[(0,a.Lk)("span",A,(0,n.v_)(t.$t("Paid")),1)]),(0,a.Lk)("td",null,[(0,a.Lk)("span",q,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(J.purchase.paid_amount),1)])]),(0,a.Lk)("tr",null,[(0,a.Lk)("td",null,[(0,a.Lk)("span",K,(0,n.v_)(t.$t("Due")),1)]),(0,a.Lk)("td",null,[(0,a.Lk)("span",z,(0,n.v_)(t.currentUser.currency)+" "+(0,n.v_)(J.purchase.due),1)])])])])])])),_:1}),(0,a.bo)((0,a.Lk)("hr",null,null,512),[[l.aG,J.purchase.note]]),(0,a.bF)(et,{class:"mt-4"},{default:(0,a.k6)((()=>[(0,a.bF)(tt,{md:"12"},{default:(0,a.k6)((()=>[(0,a.Lk)("p",null,(0,n.v_)(J.purchase.note),1)])),_:1})])),_:1})])])])),_:1}))])}var J=s(95353),V=s(5947),Y=s.n(V);const Z={computed:(0,J.L8)(["currentUserPermissions","currentUser"]),metaInfo:{title:"Detail Purchase"},data(){return{isLoading:!0,purchase:{},details:[],variants:[],company:{},email:{to:"",subject:"",message:"",supplier_name:"",Purchase_Ref:""}}},methods:{Print_Purchase_PDF(){Y().start(),Y().set(.1);let t=this.$route.params.id;axios.get(`purchase_pdf/${t}`,{responseType:"blob",headers:{"Content-Type":"application/json"}}).then((t=>{const e=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=e,s.setAttribute("download","purchase_"+this.purchase.Ref+".pdf"),document.body.appendChild(s),s.click(),setTimeout((()=>Y().done()),500)})).catch((()=>{setTimeout((()=>Y().done()),500)}))},print(){this.$htmlToPaper("print_Invoice")},formatNumber(t,e){const s=("string"===typeof t?t:t.toString()).split(".");if(e<=0)return s[0];let a=s[1]||"";if(a.length>e)return`${s[0]}.${a.substr(0,e)}`;while(a.length<e)a+="0";return`${s[0]}.${a}`},Get_Details(){let t=this.$route.params.id;axios.get(`purchases/${t}`).then((t=>{this.purchase=t.data.purchase,this.details=t.data.details,this.company=t.data.company,this.isLoading=!1})).catch((t=>{setTimeout((()=>{this.isLoading=!1}),500)}))},Send_Email(){Y().start(),Y().set(.1);let t=this.$route.params.id;axios.post("purchase_send_email",{id:t}).then((t=>{setTimeout((()=>Y().done()),500),this.makeToast("success",this.$t("Send.TitleEmail"),this.$t("Success"))})).catch((t=>{setTimeout((()=>Y().done()),500),this.makeToast("danger",this.$t("SMTPIncorrect"),this.$t("Failed"))}))},Purchase_SMS(){Y().start(),Y().set(.1);let t=this.$route.params.id;axios.post("purchase_send_sms",{id:t}).then((t=>{setTimeout((()=>Y().done()),500),this.makeToast("success",this.$t("Send_SMS"),this.$t("Success"))})).catch((t=>{setTimeout((()=>Y().done()),500),this.makeToast("danger",this.$t("sms_config_invalid"),this.$t("Failed"))}))},makeToast(t,e,s){this.$root.$bvToast.toast(e,{title:s,variant:t,solid:!0})},Delete_Purchase(){let t=this.$route.params.id;this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((e=>{e.value&&axios.delete("purchases/"+t).then((()=>{this.$swal(this.$t("Delete.Deleted"),this.$t("Delete.PurchaseDeleted"),"success"),this.$router.push({name:"index_purchases"})})).catch((()=>{this.$swal(this.$t("Delete.Failed"),this.$t("Delete.Therewassomethingwronge"),"warning")}))}))}},created:function(){this.Get_Details()}};var tt=s(66262);const et=(0,tt.A)(Z,[["render",H]]),st=et}}]);
//# sourceMappingURL=detail_purchase.5769aef6.js.map